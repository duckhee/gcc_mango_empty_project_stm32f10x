ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"usb_core.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.Standard_GetConfiguration,"ax",%progbits
  20              		.align	2
  21              		.global	Standard_GetConfiguration
  22              		.thumb
  23              		.thumb_func
  25              	Standard_GetConfiguration:
  26              	.LFB27:
  27              		.file 1 "STM32_USB-FS-Device_Driver/src/usb_core.c"
   1:STM32_USB-FS-Device_Driver/src/usb_core.c **** /******************** (C) COPYRIGHT 2009 STMicroelectronics ********************
   2:STM32_USB-FS-Device_Driver/src/usb_core.c **** * File Name          : usb_core.c
   3:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Author             : MCD Application Team
   4:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Version            : V3.0.1
   5:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Date               : 04/27/2009
   6:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description        : Standard protocol processing (USB v2.0)
   7:STM32_USB-FS-Device_Driver/src/usb_core.c **** ********************************************************************************
   8:STM32_USB-FS-Device_Driver/src/usb_core.c **** * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
   9:STM32_USB-FS-Device_Driver/src/usb_core.c **** * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
  10:STM32_USB-FS-Device_Driver/src/usb_core.c **** * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
  11:STM32_USB-FS-Device_Driver/src/usb_core.c **** * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
  12:STM32_USB-FS-Device_Driver/src/usb_core.c **** * CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
  13:STM32_USB-FS-Device_Driver/src/usb_core.c **** * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  14:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
  15:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  16:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Includes ------------------------------------------------------------------*/
  17:STM32_USB-FS-Device_Driver/src/usb_core.c **** #include "usb_lib.h"
  18:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private typedef -----------------------------------------------------------*/
  19:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private define ------------------------------------------------------------*/
  20:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define ValBit(VAR,Place)    (VAR & (1 << Place))
  21:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define SetBit(VAR,Place)    (VAR |= (1 << Place))
  22:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define ClrBit(VAR,Place)    (VAR &= ((1 << Place) ^ 255))
  23:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  24:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define Send0LengthData() { _SetEPTxCount(ENDP0, 0); \
  25:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPTxStatus(EP_TX_VALID); \
  26:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
  27:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  28:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define vSetEPRxStatus(st) (SaveRState = st)
  29:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define vSetEPTxStatus(st) (SaveTState = st)
  30:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  31:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define USB_StatusIn() Send0LengthData()
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 2


  32:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define USB_StatusOut() vSetEPRxStatus(EP_RX_VALID)
  33:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  34:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define StatusInfo0 StatusInfo.bw.bb1 /* Reverse bb0 & bb1 */
  35:STM32_USB-FS-Device_Driver/src/usb_core.c **** #define StatusInfo1 StatusInfo.bw.bb0
  36:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  37:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private macro -------------------------------------------------------------*/
  38:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private variables ---------------------------------------------------------*/
  39:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint16_t_uint8_t StatusInfo;
  40:STM32_USB-FS-Device_Driver/src/usb_core.c **** bool Data_Mul_MaxPacketSize = FALSE;
  41:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private function prototypes -----------------------------------------------*/
  42:STM32_USB-FS-Device_Driver/src/usb_core.c **** static void DataStageOut(void);
  43:STM32_USB-FS-Device_Driver/src/usb_core.c **** static void DataStageIn(void);
  44:STM32_USB-FS-Device_Driver/src/usb_core.c **** static void NoData_Setup0(void);
  45:STM32_USB-FS-Device_Driver/src/usb_core.c **** static void Data_Setup0(void);
  46:STM32_USB-FS-Device_Driver/src/usb_core.c **** /* Private functions ---------------------------------------------------------*/
  47:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  48:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
  49:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_GetConfiguration.
  50:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Return the current configuration variable address.
  51:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : Length - How many bytes are needed.
  52:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
  53:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Return 1 , if the request is invalid when "Length" is 0.
  54:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Return "Buffer" if the "Length" is not 0.
  55:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
  56:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t *Standard_GetConfiguration(uint16_t Length)
  57:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
  28              		.loc 1 57 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  58:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length == 0)
  38              		.loc 1 58 0
  39 0002 20B9     		cbnz	r0, .L2
  59:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
  60:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.Usb_wLength =
  40              		.loc 1 60 0
  41 0004 064B     		ldr	r3, .L5
  42 0006 1B68     		ldr	r3, [r3]
  43 0008 0122     		movs	r2, #1
  44 000a 1A82     		strh	r2, [r3, #16]	@ movhi
  61:STM32_USB-FS-Device_Driver/src/usb_core.c ****       sizeof(pInformation->Current_Configuration);
  62:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return 0;
  45              		.loc 1 62 0
  46 000c 08BD     		pop	{r3, pc}
  47              	.L2:
  63:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
  64:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_GetConfiguration();
  48              		.loc 1 64 0
  49 000e 054B     		ldr	r3, .L5+4
  50 0010 1B68     		ldr	r3, [r3]
  51 0012 1B68     		ldr	r3, [r3]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 3


  52 0014 9847     		blx	r3
  53              	.LVL1:
  65:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return (uint8_t *)&pInformation->Current_Configuration;
  54              		.loc 1 65 0
  55 0016 024B     		ldr	r3, .L5
  56 0018 1868     		ldr	r0, [r3]
  57 001a 0A30     		adds	r0, r0, #10
  66:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
  58              		.loc 1 66 0
  59 001c 08BD     		pop	{r3, pc}
  60              	.L6:
  61 001e 00BF     		.align	2
  62              	.L5:
  63 0020 00000000 		.word	pInformation
  64 0024 00000000 		.word	pUser_Standard_Requests
  65              		.cfi_endproc
  66              	.LFE27:
  68              		.section	.text.Standard_GetInterface,"ax",%progbits
  69              		.align	2
  70              		.global	Standard_GetInterface
  71              		.thumb
  72              		.thumb_func
  74              	Standard_GetInterface:
  75              	.LFB29:
  67:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  68:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
  69:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_SetConfiguration.
  70:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : This routine is called to set the configuration value
  71:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Then each class should configure device themself.
  72:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
  73:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
  74:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Return USB_SUCCESS, if the request is performed.
  75:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Return USB_UNSUPPORT, if the request is invalid.
  76:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
  77:STM32_USB-FS-Device_Driver/src/usb_core.c **** RESULT Standard_SetConfiguration(void)
  78:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
  79:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  80:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if ((pInformation->USBwValue0 <=
  81:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Device_Table.Total_Configuration) && (pInformation->USBwValue1 == 0)
  82:STM32_USB-FS-Device_Driver/src/usb_core.c ****       && (pInformation->USBwIndex == 0)) /*call Back usb spec 2.0*/
  83:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
  84:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Current_Configuration = pInformation->USBwValue0;
  85:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pUser_Standard_Requests->User_SetConfiguration();
  86:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
  87:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
  88:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
  89:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
  90:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_UNSUPPORT;
  91:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
  92:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
  93:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
  94:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
  95:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_GetInterface.
  96:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Return the Alternate Setting of the current interface.
  97:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : Length - How many bytes are needed.
  98:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
  99:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Return 0, if the request is invalid when "Length" is 0.
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 4


 100:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Return "Buffer" if the "Length" is not 0.
 101:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 102:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t *Standard_GetInterface(uint16_t Length)
 103:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
  76              		.loc 1 103 0
  77              		.cfi_startproc
  78              		@ args = 0, pretend = 0, frame = 0
  79              		@ frame_needed = 0, uses_anonymous_args = 0
  80              	.LVL2:
  81 0000 08B5     		push	{r3, lr}
  82              	.LCFI1:
  83              		.cfi_def_cfa_offset 8
  84              		.cfi_offset 3, -8
  85              		.cfi_offset 14, -4
 104:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length == 0)
  86              		.loc 1 104 0
  87 0002 20B9     		cbnz	r0, .L8
 105:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 106:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.Usb_wLength =
  88              		.loc 1 106 0
  89 0004 064B     		ldr	r3, .L11
  90 0006 1B68     		ldr	r3, [r3]
  91 0008 0122     		movs	r2, #1
  92 000a 1A82     		strh	r2, [r3, #16]	@ movhi
 107:STM32_USB-FS-Device_Driver/src/usb_core.c ****       sizeof(pInformation->Current_AlternateSetting);
 108:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return 0;
  93              		.loc 1 108 0
  94 000c 08BD     		pop	{r3, pc}
  95              	.L8:
 109:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 110:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_GetInterface();
  96              		.loc 1 110 0
  97 000e 054B     		ldr	r3, .L11+4
  98 0010 1B68     		ldr	r3, [r3]
  99 0012 9B68     		ldr	r3, [r3, #8]
 100 0014 9847     		blx	r3
 101              	.LVL3:
 111:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return (uint8_t *)&pInformation->Current_AlternateSetting;
 102              		.loc 1 111 0
 103 0016 024B     		ldr	r3, .L11
 104 0018 1868     		ldr	r0, [r3]
 105 001a 0C30     		adds	r0, r0, #12
 112:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 106              		.loc 1 112 0
 107 001c 08BD     		pop	{r3, pc}
 108              	.L12:
 109 001e 00BF     		.align	2
 110              	.L11:
 111 0020 00000000 		.word	pInformation
 112 0024 00000000 		.word	pUser_Standard_Requests
 113              		.cfi_endproc
 114              	.LFE29:
 116              		.section	.text.Standard_GetStatus,"ax",%progbits
 117              		.align	2
 118              		.global	Standard_GetStatus
 119              		.thumb
 120              		.thumb_func
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 5


 122              	Standard_GetStatus:
 123              	.LFB31:
 113:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 114:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 115:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_SetInterface.
 116:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : This routine is called to set the interface.
 117:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Then each class should configure the interface them self.
 118:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 119:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 120:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : - Return USB_SUCCESS, if the request is performed.
 121:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - Return USB_UNSUPPORT, if the request is invalid.
 122:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 123:STM32_USB-FS-Device_Driver/src/usb_core.c **** RESULT Standard_SetInterface(void)
 124:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 125:STM32_USB-FS-Device_Driver/src/usb_core.c ****   RESULT Re;
 126:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*Test if the specified Interface and Alternate Setting are supported by
 127:STM32_USB-FS-Device_Driver/src/usb_core.c ****     the application Firmware*/
 128:STM32_USB-FS-Device_Driver/src/usb_core.c ****   Re = (*pProperty->Class_Get_Interface_Setting)(pInformation->USBwIndex0, pInformation->USBwValue0
 129:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 130:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->Current_Configuration != 0)
 131:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 132:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((Re != USB_SUCCESS) || (pInformation->USBwIndex1 != 0)
 133:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->USBwValue1 != 0))
 134:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 135:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return  USB_UNSUPPORT;
 136:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 137:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (Re == USB_SUCCESS)
 138:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 139:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pUser_Standard_Requests->User_SetInterface();
 140:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->Current_Interface = pInformation->USBwIndex0;
 141:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->Current_AlternateSetting = pInformation->USBwValue0;
 142:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return USB_SUCCESS;
 143:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 144:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 145:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 146:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 147:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_UNSUPPORT;
 148:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 149:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 150:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 151:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_GetStatus.
 152:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Copy the device request data to "StatusInfo buffer".
 153:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : - Length - How many bytes are needed.
 154:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 155:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Return 0, if the request is at end of data block,
 156:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  or is invalid when "Length" is 0.
 157:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 158:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t *Standard_GetStatus(uint16_t Length)
 159:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 124              		.loc 1 159 0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 128              	.LVL4:
 129 0000 08B5     		push	{r3, lr}
 130              	.LCFI2:
 131              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 6


 132              		.cfi_offset 3, -8
 133              		.cfi_offset 14, -4
 160:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length == 0)
 134              		.loc 1 160 0
 135 0002 20B9     		cbnz	r0, .L14
 161:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 162:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.Usb_wLength = 2;
 136              		.loc 1 162 0
 137 0004 294B     		ldr	r3, .L24
 138 0006 1B68     		ldr	r3, [r3]
 139 0008 0222     		movs	r2, #2
 140 000a 1A82     		strh	r2, [r3, #16]	@ movhi
 163:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return 0;
 141              		.loc 1 163 0
 142 000c 08BD     		pop	{r3, pc}
 143              	.L14:
 164:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 165:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 166:STM32_USB-FS-Device_Driver/src/usb_core.c ****   StatusInfo.w = 0;
 144              		.loc 1 166 0
 145 000e 0022     		movs	r2, #0
 146 0010 274B     		ldr	r3, .L24+4
 147 0012 1A80     		strh	r2, [r3]	@ movhi
 167:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* Reset Status Information */
 168:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 169:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 148              		.loc 1 169 0
 149 0014 254B     		ldr	r3, .L24
 150 0016 1A68     		ldr	r2, [r3]
 151 0018 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 152 001a 13F07F03 		ands	r3, r3, #127
 153 001e 15D1     		bne	.L16
 154              	.LBB2:
 170:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 171:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*Get Device Status */
 172:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint8_t Feature = pInformation->Current_Feature;
 155              		.loc 1 172 0
 156 0020 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 157              	.LVL5:
 173:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 174:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Remote Wakeup enabled */
 175:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (ValBit(Feature, 5))
 158              		.loc 1 175 0
 159 0022 13F0200F 		tst	r3, #32
 160 0026 02D0     		beq	.L17
 176:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 177:STM32_USB-FS-Device_Driver/src/usb_core.c ****       SetBit(StatusInfo0, 1);
 161              		.loc 1 177 0
 162 0028 0221     		movs	r1, #2
 163 002a 214A     		ldr	r2, .L24+4
 164 002c 1170     		strb	r1, [r2]
 165              	.L17:
 178:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 179:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 180:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Bus-powered */
 181:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (ValBit(Feature, 6))
 166              		.loc 1 181 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 7


 167 002e 13F0400F 		tst	r3, #64
 168 0032 05D0     		beq	.L18
 182:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 183:STM32_USB-FS-Device_Driver/src/usb_core.c ****       ClrBit(StatusInfo0, 0);
 169              		.loc 1 183 0
 170 0034 1E4A     		ldr	r2, .L24+4
 171 0036 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 172              	.LVL6:
 173 0038 23F00103 		bic	r3, r3, #1
 174 003c 1370     		strb	r3, [r2]
 175 003e 2BE0     		b	.L19
 176              	.LVL7:
 177              	.L18:
 184:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 185:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else /* Self-powered */
 186:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 187:STM32_USB-FS-Device_Driver/src/usb_core.c ****       SetBit(StatusInfo0, 0);
 178              		.loc 1 187 0
 179 0040 1B4A     		ldr	r2, .L24+4
 180 0042 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 181              	.LVL8:
 182 0044 43F00103 		orr	r3, r3, #1
 183 0048 1370     		strb	r3, [r2]
 184 004a 25E0     		b	.L19
 185              	.LVL9:
 186              	.L16:
 187              	.LBE2:
 188:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 189:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 190:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*Interface Status*/
 191:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Type_Recipient == (STANDARD_REQUEST | INTERFACE_RECIPIENT))
 188              		.loc 1 191 0
 189 004c 012B     		cmp	r3, #1
 190 004e 29D0     		beq	.L21
 192:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 193:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return (uint8_t *)&StatusInfo;
 194:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 195:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*Get EndPoint Status*/
 196:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Type_Recipient == (STANDARD_REQUEST | ENDPOINT_RECIPIENT))
 191              		.loc 1 196 0
 192 0050 022B     		cmp	r3, #2
 193 0052 29D1     		bne	.L22
 194              	.LBB3:
 197:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 198:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint8_t Related_Endpoint;
 199:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint8_t wIndex0 = pInformation->USBwIndex0;
 195              		.loc 1 199 0
 196 0054 5279     		ldrb	r2, [r2, #5]	@ zero_extendqisi2
 197              	.LVL10:
 200:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 201:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Related_Endpoint = (wIndex0 & 0x0f);
 198              		.loc 1 201 0
 199 0056 02F00F03 		and	r3, r2, #15
 200              	.LVL11:
 202:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (ValBit(wIndex0, 7))
 201              		.loc 1 202 0
 202 005a 12F0800F 		tst	r2, #128
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 8


 203 005e 0DD0     		beq	.L20
 203:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 204:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* IN endpoint */
 205:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (_GetTxStallStatus(Related_Endpoint))
 204              		.loc 1 205 0
 205 0060 9B00     		lsls	r3, r3, #2
 206              	.LVL12:
 207 0062 03F18043 		add	r3, r3, #1073741824
 208 0066 03F5B843 		add	r3, r3, #23552
 209 006a 1B68     		ldr	r3, [r3]
 210 006c 03F03003 		and	r3, r3, #48
 211 0070 102B     		cmp	r3, #16
 212 0072 11D1     		bne	.L19
 206:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 207:STM32_USB-FS-Device_Driver/src/usb_core.c ****         SetBit(StatusInfo0, 0); /* IN Endpoint stalled */
 213              		.loc 1 207 0
 214 0074 0122     		movs	r2, #1
 215              	.LVL13:
 216 0076 0E4B     		ldr	r3, .L24+4
 217 0078 1A70     		strb	r2, [r3]
 218 007a 0DE0     		b	.L19
 219              	.LVL14:
 220              	.L20:
 208:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 209:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 210:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else
 211:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 212:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* OUT endpoint */
 213:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (_GetRxStallStatus(Related_Endpoint))
 221              		.loc 1 213 0
 222 007c 9B00     		lsls	r3, r3, #2
 223              	.LVL15:
 224 007e 03F18043 		add	r3, r3, #1073741824
 225 0082 03F5B843 		add	r3, r3, #23552
 226 0086 1B68     		ldr	r3, [r3]
 227 0088 03F44053 		and	r3, r3, #12288
 228 008c B3F5805F 		cmp	r3, #4096
 229 0090 02D1     		bne	.L19
 214:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 215:STM32_USB-FS-Device_Driver/src/usb_core.c ****         SetBit(StatusInfo0, 0); /* OUT Endpoint stalled */
 230              		.loc 1 215 0
 231 0092 0122     		movs	r2, #1
 232              	.LVL16:
 233 0094 064B     		ldr	r3, .L24+4
 234 0096 1A70     		strb	r2, [r3]
 235              	.LVL17:
 236              	.L19:
 237              	.LBE3:
 216:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 217:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 218:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 219:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 220:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 221:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 222:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return NULL;
 223:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 224:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_GetStatus();
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 9


 238              		.loc 1 224 0
 239 0098 064B     		ldr	r3, .L24+8
 240 009a 1B68     		ldr	r3, [r3]
 241 009c 1B69     		ldr	r3, [r3, #16]
 242 009e 9847     		blx	r3
 243              	.LVL18:
 225:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return (uint8_t *)&StatusInfo;
 244              		.loc 1 225 0
 245 00a0 0348     		ldr	r0, .L24+4
 246 00a2 08BD     		pop	{r3, pc}
 247              	.LVL19:
 248              	.L21:
 193:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 249              		.loc 1 193 0
 250 00a4 0248     		ldr	r0, .L24+4
 251              	.LVL20:
 252 00a6 08BD     		pop	{r3, pc}
 253              	.LVL21:
 254              	.L22:
 222:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 255              		.loc 1 222 0
 256 00a8 0020     		movs	r0, #0
 257              	.LVL22:
 226:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 258              		.loc 1 226 0
 259 00aa 08BD     		pop	{r3, pc}
 260              	.L25:
 261              		.align	2
 262              	.L24:
 263 00ac 00000000 		.word	pInformation
 264 00b0 00000000 		.word	StatusInfo
 265 00b4 00000000 		.word	pUser_Standard_Requests
 266              		.cfi_endproc
 267              	.LFE31:
 269              		.section	.text.DataStageIn,"ax",%progbits
 270              		.align	2
 271              		.thumb
 272              		.thumb_func
 274              	DataStageIn:
 275              	.LFB37:
 227:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 228:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 229:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_ClearFeature.
 230:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Clear or disable a specific feature.
 231:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 232:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 233:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : - Return USB_SUCCESS, if the request is performed.
 234:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - Return USB_UNSUPPORT, if the request is invalid.
 235:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 236:STM32_USB-FS-Device_Driver/src/usb_core.c **** RESULT Standard_ClearFeature(void)
 237:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 238:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t     Type_Rec = Type_Recipient;
 239:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t     Status;
 240:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 241:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 242:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Type_Rec == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 243:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {/*Device Clear Feature*/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 10


 244:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ClrBit(pInformation->Current_Feature, 5);
 245:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
 246:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 247:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Type_Rec == (STANDARD_REQUEST | ENDPOINT_RECIPIENT))
 248:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {/*EndPoint Clear Feature*/
 249:STM32_USB-FS-Device_Driver/src/usb_core.c ****     DEVICE* pDev;
 250:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint32_t Related_Endpoint;
 251:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint32_t wIndex0;
 252:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint32_t rEP;
 253:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 254:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((pInformation->USBwValue != ENDPOINT_STALL)
 255:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->USBwIndex1 != 0))
 256:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 257:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return USB_UNSUPPORT;
 258:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 259:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 260:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pDev = &Device_Table;
 261:STM32_USB-FS-Device_Driver/src/usb_core.c ****     wIndex0 = pInformation->USBwIndex0;
 262:STM32_USB-FS-Device_Driver/src/usb_core.c ****     rEP = wIndex0 & ~0x80;
 263:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Related_Endpoint = ENDP0 + rEP;
 264:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 265:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (ValBit(pInformation->USBwIndex0, 7))
 266:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 267:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /*Get Status of endpoint & stall the request if the related_ENdpoint
 268:STM32_USB-FS-Device_Driver/src/usb_core.c ****       is Disabled*/
 269:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Status = _GetEPTxStatus(Related_Endpoint);
 270:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 271:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else
 272:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 273:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Status = _GetEPRxStatus(Related_Endpoint);
 274:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 275:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 276:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((rEP >= pDev->Total_Endpoint) || (Status == 0)
 277:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->Current_Configuration == 0))
 278:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 279:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return USB_UNSUPPORT;
 280:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 281:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 282:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 283:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (wIndex0 & 0x80)
 284:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 285:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* IN endpoint */
 286:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (_GetTxStallStatus(Related_Endpoint ))
 287:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 288:STM32_USB-FS-Device_Driver/src/usb_core.c ****         ClearDTOG_TX(Related_Endpoint);
 289:STM32_USB-FS-Device_Driver/src/usb_core.c ****         SetEPTxStatus(Related_Endpoint, EP_TX_VALID);
 290:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 291:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 292:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else
 293:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 294:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* OUT endpoint */
 295:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (_GetRxStallStatus(Related_Endpoint))
 296:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 297:STM32_USB-FS-Device_Driver/src/usb_core.c ****         if (Related_Endpoint == ENDP0)
 298:STM32_USB-FS-Device_Driver/src/usb_core.c ****         {
 299:STM32_USB-FS-Device_Driver/src/usb_core.c ****           /* After clear the STALL, enable the default endpoint receiver */
 300:STM32_USB-FS-Device_Driver/src/usb_core.c ****           SetEPRxCount(Related_Endpoint, Device_Property.MaxPacketSize);
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 11


 301:STM32_USB-FS-Device_Driver/src/usb_core.c ****           _SetEPRxStatus(Related_Endpoint, EP_RX_VALID);
 302:STM32_USB-FS-Device_Driver/src/usb_core.c ****         }
 303:STM32_USB-FS-Device_Driver/src/usb_core.c ****         else
 304:STM32_USB-FS-Device_Driver/src/usb_core.c ****         {
 305:STM32_USB-FS-Device_Driver/src/usb_core.c ****           ClearDTOG_RX(Related_Endpoint);
 306:STM32_USB-FS-Device_Driver/src/usb_core.c ****           _SetEPRxStatus(Related_Endpoint, EP_RX_VALID);
 307:STM32_USB-FS-Device_Driver/src/usb_core.c ****         }
 308:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 309:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 310:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pUser_Standard_Requests->User_ClearFeature();
 311:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
 312:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 313:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 314:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_UNSUPPORT;
 315:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 316:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 317:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 318:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_SetEndPointFeature
 319:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Set or enable a specific feature of EndPoint
 320:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 321:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 322:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : - Return USB_SUCCESS, if the request is performed.
 323:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - Return USB_UNSUPPORT, if the request is invalid.
 324:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 325:STM32_USB-FS-Device_Driver/src/usb_core.c **** RESULT Standard_SetEndPointFeature(void)
 326:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 327:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t    wIndex0;
 328:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t    Related_Endpoint;
 329:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t    rEP;
 330:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t   Status;
 331:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 332:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wIndex0 = pInformation->USBwIndex0;
 333:STM32_USB-FS-Device_Driver/src/usb_core.c ****   rEP = wIndex0 & ~0x80;
 334:STM32_USB-FS-Device_Driver/src/usb_core.c ****   Related_Endpoint = ENDP0 + rEP;
 335:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 336:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (ValBit(pInformation->USBwIndex0, 7))
 337:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 338:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* get Status of endpoint & stall the request if the related_ENdpoint
 339:STM32_USB-FS-Device_Driver/src/usb_core.c ****     is Disabled*/
 340:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Status = _GetEPTxStatus(Related_Endpoint);
 341:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 342:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 343:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 344:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Status = _GetEPRxStatus(Related_Endpoint);
 345:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 346:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 347:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Related_Endpoint >= Device_Table.Total_Endpoint
 348:STM32_USB-FS-Device_Driver/src/usb_core.c ****       || pInformation->USBwValue != 0 || Status == 0
 349:STM32_USB-FS-Device_Driver/src/usb_core.c ****       || pInformation->Current_Configuration == 0)
 350:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 351:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_UNSUPPORT;
 352:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 353:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 354:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 355:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (wIndex0 & 0x80)
 356:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 357:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* IN endpoint */
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 12


 358:STM32_USB-FS-Device_Driver/src/usb_core.c ****       _SetEPTxStatus(Related_Endpoint, EP_TX_STALL);
 359:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 360:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 361:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else
 362:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 363:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* OUT endpoint */
 364:STM32_USB-FS-Device_Driver/src/usb_core.c ****       _SetEPRxStatus(Related_Endpoint, EP_RX_STALL);
 365:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 366:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 367:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_SetEndPointFeature();
 368:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_SUCCESS;
 369:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 370:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 371:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 372:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_SetDeviceFeature.
 373:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Set or enable a specific feature of Device.
 374:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 375:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 376:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : - Return USB_SUCCESS, if the request is performed.
 377:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - Return USB_UNSUPPORT, if the request is invalid.
 378:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 379:STM32_USB-FS-Device_Driver/src/usb_core.c **** RESULT Standard_SetDeviceFeature(void)
 380:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 381:STM32_USB-FS-Device_Driver/src/usb_core.c ****   SetBit(pInformation->Current_Feature, 5);
 382:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_SetDeviceFeature();
 383:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_SUCCESS;
 384:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 385:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 386:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 387:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Standard_GetDescriptorData.
 388:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Standard_GetDescriptorData is used for descriptors transfer.
 389:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                : This routine is used for the descriptors resident in Flash
 390:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  or RAM
 391:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  pDesc can be in either Flash or RAM
 392:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  The purpose of this routine is to have a versatile way to
 393:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  response descriptors request. It allows user to generate
 394:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  certain descriptors with software or read descriptors from
 395:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  external storage part by part.
 396:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : - Length - Length of the data in this transfer.
 397:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - pDesc - A pointer points to descriptor struct.
 398:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  The structure gives the initial address of the descriptor and
 399:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  its original size.
 400:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 401:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Address of a part of the descriptor pointed by the Usb_
 402:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  wOffset The buffer pointed by this address contains at least
 403:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  Length bytes.
 404:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 405:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t *Standard_GetDescriptorData(uint16_t Length, ONE_DESCRIPTOR *pDesc)
 406:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 407:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t  wOffset;
 408:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 409:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = pInformation->Ctrl_Info.Usb_wOffset;
 410:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length == 0)
 411:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 412:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.Usb_wLength = pDesc->Descriptor_Size - wOffset;
 413:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return 0;
 414:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 13


 415:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 416:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return pDesc->Descriptor + wOffset;
 417:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 418:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 419:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 420:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : DataStageOut.
 421:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Data stage of a Control Write Transfer.
 422:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 423:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 424:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
 425:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 426:STM32_USB-FS-Device_Driver/src/usb_core.c **** void DataStageOut(void)
 427:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 428:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ENDPOINT_INFO *pEPinfo = &pInformation->Ctrl_Info;
 429:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t save_rLength;
 430:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 431:STM32_USB-FS-Device_Driver/src/usb_core.c ****   save_rLength = pEPinfo->Usb_rLength;
 432:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 433:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pEPinfo->CopyData && save_rLength)
 434:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 435:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint8_t *Buffer;
 436:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint32_t Length;
 437:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 438:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Length = pEPinfo->PacketSize;
 439:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Length > save_rLength)
 440:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 441:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Length = save_rLength;
 442:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 443:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 444:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Buffer = (*pEPinfo->CopyData)(Length);
 445:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pEPinfo->Usb_rLength -= Length;
 446:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pEPinfo->Usb_rOffset += Length;
 447:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 448:STM32_USB-FS-Device_Driver/src/usb_core.c ****     PMAToUserBufferCopy(Buffer, GetEPRxAddr(ENDP0), Length);
 449:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 450:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 451:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pEPinfo->Usb_rLength != 0)
 452:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 453:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPRxStatus(EP_RX_VALID);/* re-enable for next data reception */
 454:STM32_USB-FS-Device_Driver/src/usb_core.c ****     SetEPTxCount(ENDP0, 0);
 455:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPTxStatus(EP_TX_VALID);/* Expect the host to abort the data OUT stage */
 456:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 457:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* Set the next State*/
 458:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pEPinfo->Usb_rLength >= pEPinfo->PacketSize)
 459:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 460:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->ControlState = OUT_DATA;
 461:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 462:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 463:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 464:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (pEPinfo->Usb_rLength > 0)
 465:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 466:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->ControlState = LAST_OUT_DATA;
 467:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 468:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (pEPinfo->Usb_rLength == 0)
 469:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 470:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->ControlState = WAIT_STATUS_IN;
 471:STM32_USB-FS-Device_Driver/src/usb_core.c ****       USB_StatusIn();
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 14


 472:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 473:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 474:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 475:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 476:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 477:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : DataStageIn.
 478:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Data stage of a Control Read Transfer.
 479:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 480:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 481:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
 482:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 483:STM32_USB-FS-Device_Driver/src/usb_core.c **** void DataStageIn(void)
 484:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 276              		.loc 1 484 0
 277              		.cfi_startproc
 278              		@ args = 0, pretend = 0, frame = 0
 279              		@ frame_needed = 0, uses_anonymous_args = 0
 280 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 281              	.LCFI3:
 282              		.cfi_def_cfa_offset 24
 283              		.cfi_offset 3, -24
 284              		.cfi_offset 4, -20
 285              		.cfi_offset 5, -16
 286              		.cfi_offset 6, -12
 287              		.cfi_offset 7, -8
 288              		.cfi_offset 14, -4
 485:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ENDPOINT_INFO *pEPinfo = &pInformation->Ctrl_Info;
 289              		.loc 1 485 0
 290 0002 254B     		ldr	r3, .L34
 291 0004 1D68     		ldr	r5, [r3]
 292              	.LVL23:
 486:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t save_wLength = pEPinfo->Usb_wLength;
 293              		.loc 1 486 0
 294 0006 2C8A     		ldrh	r4, [r5, #16]
 295              	.LVL24:
 487:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState = pInformation->ControlState;
 296              		.loc 1 487 0
 297 0008 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
 298              	.LVL25:
 488:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 489:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint8_t *DataBuffer;
 490:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t Length;
 491:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 492:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if ((save_wLength == 0) && (ControlState == LAST_IN_DATA))
 299              		.loc 1 492 0
 300 000a CCB9     		cbnz	r4, .L27
 301              		.loc 1 492 0 is_stmt 0 discriminator 1
 302 000c 042B     		cmp	r3, #4
 303 000e 17D1     		bne	.L27
 493:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 494:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if(Data_Mul_MaxPacketSize == TRUE)
 304              		.loc 1 494 0 is_stmt 1
 305 0010 224B     		ldr	r3, .L34+4
 306              	.LVL26:
 307 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 308 0014 012B     		cmp	r3, #1
 309 0016 0ED1     		bne	.L28
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 15


 495:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 496:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* No more data to send and empty packet */
 497:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Send0LengthData();
 310              		.loc 1 497 0
 311 0018 214B     		ldr	r3, .L34+8
 312 001a 1A68     		ldr	r2, [r3]
 313 001c 92B2     		uxth	r2, r2
 314 001e 214B     		ldr	r3, .L34+12
 315 0020 1344     		add	r3, r3, r2
 316 0022 5B00     		lsls	r3, r3, #1
 317 0024 0022     		movs	r2, #0
 318 0026 1A60     		str	r2, [r3]
 319              	.LVL27:
 320 0028 3021     		movs	r1, #48
 321 002a 1F4B     		ldr	r3, .L34+16
 322 002c 1980     		strh	r1, [r3]	@ movhi
 323              	.LVL28:
 498:STM32_USB-FS-Device_Driver/src/usb_core.c ****       ControlState = LAST_IN_DATA;
 499:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Data_Mul_MaxPacketSize = FALSE;
 324              		.loc 1 499 0
 325 002e 1B4B     		ldr	r3, .L34+4
 326 0030 1A70     		strb	r2, [r3]
 498:STM32_USB-FS-Device_Driver/src/usb_core.c ****       ControlState = LAST_IN_DATA;
 327              		.loc 1 498 0
 328 0032 0426     		movs	r6, #4
 329 0034 2BE0     		b	.L29
 330              	.LVL29:
 331              	.L28:
 500:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 501:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else 
 502:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 503:STM32_USB-FS-Device_Driver/src/usb_core.c ****       /* No more data to send so STALL the TX Status*/
 504:STM32_USB-FS-Device_Driver/src/usb_core.c ****       ControlState = WAIT_STATUS_OUT;
 505:STM32_USB-FS-Device_Driver/src/usb_core.c ****       vSetEPTxStatus(EP_TX_STALL);
 332              		.loc 1 505 0
 333 0036 1022     		movs	r2, #16
 334 0038 1B4B     		ldr	r3, .L34+16
 335 003a 1A80     		strh	r2, [r3]	@ movhi
 504:STM32_USB-FS-Device_Driver/src/usb_core.c ****       vSetEPTxStatus(EP_TX_STALL);
 336              		.loc 1 504 0
 337 003c 0726     		movs	r6, #7
 338 003e 26E0     		b	.L29
 339              	.LVL30:
 340              	.L27:
 506:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 507:STM32_USB-FS-Device_Driver/src/usb_core.c ****     
 508:STM32_USB-FS-Device_Driver/src/usb_core.c ****     goto Expect_Status_Out;
 509:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 510:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 511:STM32_USB-FS-Device_Driver/src/usb_core.c ****   Length = pEPinfo->PacketSize;
 341              		.loc 1 511 0
 342 0040 AB8A     		ldrh	r3, [r5, #20]
 343              	.LVL31:
 512:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ControlState = (save_wLength <= Length) ? LAST_IN_DATA : IN_DATA;
 344              		.loc 1 512 0
 345 0042 9C42     		cmp	r4, r3
 346 0044 01D8     		bhi	.L32
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 16


 347 0046 0426     		movs	r6, #4
 348 0048 00E0     		b	.L30
 349              	.L32:
 350 004a 0226     		movs	r6, #2
 351              	.L30:
 352              	.LVL32:
 513:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 514:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length > save_wLength)
 353              		.loc 1 514 0 discriminator 4
 354 004c 9C42     		cmp	r4, r3
 355 004e 00D3     		bcc	.L31
 511:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ControlState = (save_wLength <= Length) ? LAST_IN_DATA : IN_DATA;
 356              		.loc 1 511 0
 357 0050 1C46     		mov	r4, r3
 358              	.LVL33:
 359              	.L31:
 515:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 516:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Length = save_wLength;
 517:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 518:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 519:STM32_USB-FS-Device_Driver/src/usb_core.c ****   DataBuffer = (*pEPinfo->CopyData)(Length);
 360              		.loc 1 519 0
 361 0052 AB69     		ldr	r3, [r5, #24]
 362 0054 A4B2     		uxth	r4, r4
 363              	.LVL34:
 364 0056 2046     		mov	r0, r4
 365 0058 9847     		blx	r3
 366              	.LVL35:
 367 005a 0746     		mov	r7, r0
 368              	.LVL36:
 520:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 521:STM32_USB-FS-Device_Driver/src/usb_core.c ****   UserToPMABufferCopy(DataBuffer, GetEPTxAddr(ENDP0), Length);
 369              		.loc 1 521 0
 370 005c 0020     		movs	r0, #0
 371              	.LVL37:
 372 005e FFF7FEFF 		bl	GetEPTxAddr
 373              	.LVL38:
 374 0062 2246     		mov	r2, r4
 375 0064 0146     		mov	r1, r0
 376 0066 3846     		mov	r0, r7
 377 0068 FFF7FEFF 		bl	UserToPMABufferCopy
 378              	.LVL39:
 522:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 523:STM32_USB-FS-Device_Driver/src/usb_core.c ****   SetEPTxCount(ENDP0, Length);
 379              		.loc 1 523 0
 380 006c 2146     		mov	r1, r4
 381 006e 0020     		movs	r0, #0
 382 0070 FFF7FEFF 		bl	SetEPTxCount
 383              	.LVL40:
 524:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 525:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pEPinfo->Usb_wLength -= Length;
 384              		.loc 1 525 0
 385 0074 2B8A     		ldrh	r3, [r5, #16]
 386 0076 1B1B     		subs	r3, r3, r4
 387 0078 2B82     		strh	r3, [r5, #16]	@ movhi
 526:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pEPinfo->Usb_wOffset += Length;
 388              		.loc 1 526 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 17


 389 007a 6B8A     		ldrh	r3, [r5, #18]
 390 007c 1C44     		add	r4, r4, r3
 391 007e 6C82     		strh	r4, [r5, #18]	@ movhi
 527:STM32_USB-FS-Device_Driver/src/usb_core.c ****   vSetEPTxStatus(EP_TX_VALID);
 392              		.loc 1 527 0
 393 0080 3022     		movs	r2, #48
 394 0082 094B     		ldr	r3, .L34+16
 395 0084 1A80     		strh	r2, [r3]	@ movhi
 528:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 529:STM32_USB-FS-Device_Driver/src/usb_core.c ****   USB_StatusOut();/* Expect the host to abort the data IN stage */
 396              		.loc 1 529 0
 397 0086 4FF44052 		mov	r2, #12288
 398 008a 084B     		ldr	r3, .L34+20
 399 008c 1A80     		strh	r2, [r3]	@ movhi
 400              	.LVL41:
 401              	.L29:
 530:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 531:STM32_USB-FS-Device_Driver/src/usb_core.c **** Expect_Status_Out:
 532:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pInformation->ControlState = ControlState;
 402              		.loc 1 532 0
 403 008e 024B     		ldr	r3, .L34
 404 0090 1B68     		ldr	r3, [r3]
 405 0092 1E72     		strb	r6, [r3, #8]
 406 0094 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 407              	.LVL42:
 408              	.L35:
 409 0096 00BF     		.align	2
 410              	.L34:
 411 0098 00000000 		.word	pInformation
 412 009c 00000000 		.word	.LANCHOR0
 413 00a0 505C0040 		.word	1073765456
 414 00a4 02300020 		.word	536883202
 415 00a8 00000000 		.word	SaveTState
 416 00ac 00000000 		.word	SaveRState
 417              		.cfi_endproc
 418              	.LFE37:
 420              		.section	.text.Data_Setup0,"ax",%progbits
 421              		.align	2
 422              		.thumb
 423              		.thumb_func
 425              	Data_Setup0:
 426              	.LFB39:
 533:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 534:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 535:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 536:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : NoData_Setup0.
 537:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Proceed the processing of setup request without data stage.
 538:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 539:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 540:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
 541:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 542:STM32_USB-FS-Device_Driver/src/usb_core.c **** void NoData_Setup0(void)
 543:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 544:STM32_USB-FS-Device_Driver/src/usb_core.c ****   RESULT Result = USB_UNSUPPORT;
 545:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t RequestNo = pInformation->USBbRequest;
 546:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState;
 547:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 18


 548:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 549:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 550:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Device Request*/
 551:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* SET_CONFIGURATION*/
 552:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (RequestNo == SET_CONFIGURATION)
 553:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 554:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Result = Standard_SetConfiguration();
 555:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 556:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 557:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*SET ADDRESS*/
 558:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (RequestNo == SET_ADDRESS)
 559:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 560:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if ((pInformation->USBwValue0 > 127) || (pInformation->USBwValue1 != 0)
 561:STM32_USB-FS-Device_Driver/src/usb_core.c ****           || (pInformation->USBwIndex != 0)
 562:STM32_USB-FS-Device_Driver/src/usb_core.c ****           || (pInformation->Current_Configuration != 0))
 563:STM32_USB-FS-Device_Driver/src/usb_core.c ****         /* Device Address should be 127 or less*/
 564:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 565:STM32_USB-FS-Device_Driver/src/usb_core.c ****         ControlState = STALLED;
 566:STM32_USB-FS-Device_Driver/src/usb_core.c ****         goto exit_NoData_Setup0;
 567:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 568:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else
 569:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 570:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Result = USB_SUCCESS;
 571:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 572:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 573:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*SET FEATURE for Device*/
 574:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (RequestNo == SET_FEATURE)
 575:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 576:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if ((pInformation->USBwValue0 == DEVICE_REMOTE_WAKEUP)
 577:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (pInformation->USBwIndex == 0)
 578:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (ValBit(pInformation->Current_Feature, 5)))
 579:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 580:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Result = Standard_SetDeviceFeature();
 581:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 582:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else
 583:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 584:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Result = USB_UNSUPPORT;
 585:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 586:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 587:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*Clear FEATURE for Device */
 588:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (RequestNo == CLEAR_FEATURE)
 589:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 590:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (pInformation->USBwValue0 == DEVICE_REMOTE_WAKEUP
 591:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && pInformation->USBwIndex == 0
 592:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && ValBit(pInformation->Current_Feature, 5))
 593:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 594:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Result = Standard_ClearFeature();
 595:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 596:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else
 597:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 598:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Result = USB_UNSUPPORT;
 599:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 600:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 601:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 602:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 603:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 604:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* Interface Request*/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 19


 605:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Type_Recipient == (STANDARD_REQUEST | INTERFACE_RECIPIENT))
 606:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 607:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*SET INTERFACE*/
 608:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (RequestNo == SET_INTERFACE)
 609:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 610:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Result = Standard_SetInterface();
 611:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 612:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 613:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 614:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* EndPoint Request*/
 615:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Type_Recipient == (STANDARD_REQUEST | ENDPOINT_RECIPIENT))
 616:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 617:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /*CLEAR FEATURE for EndPoint*/
 618:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (RequestNo == CLEAR_FEATURE)
 619:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 620:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Result = Standard_ClearFeature();
 621:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 622:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* SET FEATURE for EndPoint*/
 623:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (RequestNo == SET_FEATURE)
 624:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 625:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Result = Standard_SetEndPointFeature();
 626:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 627:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 628:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 629:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 630:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Result = USB_UNSUPPORT;
 631:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 632:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 633:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 634:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Result != USB_SUCCESS)
 635:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 636:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Result = (*pProperty->Class_NoData_Setup)(RequestNo);
 637:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Result == USB_NOT_READY)
 638:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 639:STM32_USB-FS-Device_Driver/src/usb_core.c ****       ControlState = PAUSE;
 640:STM32_USB-FS-Device_Driver/src/usb_core.c ****       goto exit_NoData_Setup0;
 641:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 642:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 643:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 644:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Result != USB_SUCCESS)
 645:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 646:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 647:STM32_USB-FS-Device_Driver/src/usb_core.c ****     goto exit_NoData_Setup0;
 648:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 649:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 650:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ControlState = WAIT_STATUS_IN;/* After no data stage SETUP */
 651:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 652:STM32_USB-FS-Device_Driver/src/usb_core.c ****   USB_StatusIn();
 653:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 654:STM32_USB-FS-Device_Driver/src/usb_core.c **** exit_NoData_Setup0:
 655:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pInformation->ControlState = ControlState;
 656:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return;
 657:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 658:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 659:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 660:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Data_Setup0.
 661:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Proceed the processing of setup request with data stage.
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 20


 662:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 663:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 664:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
 665:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 666:STM32_USB-FS-Device_Driver/src/usb_core.c **** void Data_Setup0(void)
 667:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 427              		.loc 1 667 0
 428              		.cfi_startproc
 429              		@ args = 0, pretend = 0, frame = 8
 430              		@ frame_needed = 0, uses_anonymous_args = 0
 431 0000 10B5     		push	{r4, lr}
 432              	.LCFI4:
 433              		.cfi_def_cfa_offset 8
 434              		.cfi_offset 4, -8
 435              		.cfi_offset 14, -4
 436 0002 82B0     		sub	sp, sp, #8
 437              	.LCFI5:
 438              		.cfi_def_cfa_offset 16
 668:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint8_t *(*CopyRoutine)(uint16_t);
 669:STM32_USB-FS-Device_Driver/src/usb_core.c ****   RESULT Result;
 670:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t Request_No = pInformation->USBbRequest;
 439              		.loc 1 670 0
 440 0004 7C4B     		ldr	r3, .L74
 441 0006 1A68     		ldr	r2, [r3]
 442 0008 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 443              	.LVL43:
 671:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 672:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t Related_Endpoint, Reserved;
 673:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t wOffset, Status;
 674:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 675:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 676:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   CopyRoutine = NULL;
 678:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 679:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 680:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Request_No == GET_DESCRIPTOR)
 444              		.loc 1 680 0
 445 000a 062B     		cmp	r3, #6
 446 000c 16D1     		bne	.L37
 681:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 682:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 447              		.loc 1 682 0
 448 000e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 449              	.LVL44:
 450 0010 13F07F0F 		tst	r3, #127
 451 0014 78D1     		bne	.L57
 452              	.LBB4:
 683:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 684:STM32_USB-FS-Device_Driver/src/usb_core.c ****       uint8_t wValue1 = pInformation->USBwValue1;
 453              		.loc 1 684 0
 454 0016 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 455              	.LVL45:
 685:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (wValue1 == DEVICE_DESCRIPTOR)
 456              		.loc 1 685 0
 457 0018 012B     		cmp	r3, #1
 458 001a 03D1     		bne	.L39
 686:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 21


 687:STM32_USB-FS-Device_Driver/src/usb_core.c ****         CopyRoutine = pProperty->GetDeviceDescriptor;
 459              		.loc 1 687 0
 460 001c 774B     		ldr	r3, .L74+4
 461              	.LVL46:
 462 001e 1B68     		ldr	r3, [r3]
 463 0020 DB69     		ldr	r3, [r3, #28]
 464              	.LVL47:
 465 0022 90E0     		b	.L38
 466              	.LVL48:
 467              	.L39:
 688:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 689:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else if (wValue1 == CONFIG_DESCRIPTOR)
 468              		.loc 1 689 0
 469 0024 022B     		cmp	r3, #2
 470 0026 03D1     		bne	.L40
 690:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 691:STM32_USB-FS-Device_Driver/src/usb_core.c ****         CopyRoutine = pProperty->GetConfigDescriptor;
 471              		.loc 1 691 0
 472 0028 744B     		ldr	r3, .L74+4
 473              	.LVL49:
 474 002a 1B68     		ldr	r3, [r3]
 475 002c 1B6A     		ldr	r3, [r3, #32]
 476              	.LVL50:
 477 002e 8AE0     		b	.L38
 478              	.LVL51:
 479              	.L40:
 692:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 693:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else if (wValue1 == STRING_DESCRIPTOR)
 480              		.loc 1 693 0
 481 0030 032B     		cmp	r3, #3
 482 0032 6BD1     		bne	.L58
 694:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 695:STM32_USB-FS-Device_Driver/src/usb_core.c ****         CopyRoutine = pProperty->GetStringDescriptor;
 483              		.loc 1 695 0
 484 0034 714B     		ldr	r3, .L74+4
 485              	.LVL52:
 486 0036 1B68     		ldr	r3, [r3]
 487 0038 5B6A     		ldr	r3, [r3, #36]
 488              	.LVL53:
 489 003a 84E0     		b	.L38
 490              	.LVL54:
 491              	.L37:
 492              	.LBE4:
 696:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }  /* End of GET_DESCRIPTOR */
 697:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 698:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 699:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 700:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*GET STATUS*/
 701:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if ((Request_No == GET_STATUS) && (pInformation->USBwValue == 0)
 493              		.loc 1 701 0
 494 003c 002B     		cmp	r3, #0
 495 003e 41D1     		bne	.L41
 496              		.loc 1 701 0 is_stmt 0 discriminator 1
 497 0040 5188     		ldrh	r1, [r2, #2]
 498 0042 0029     		cmp	r1, #0
 499 0044 3ED1     		bne	.L41
 702:STM32_USB-FS-Device_Driver/src/usb_core.c ****            && (pInformation->USBwLength == 0x0002)
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 22


 703:STM32_USB-FS-Device_Driver/src/usb_core.c ****            && (pInformation->USBwIndex1 == 0))
 500              		.loc 1 703 0 is_stmt 1
 501 0046 5168     		ldr	r1, [r2, #4]
 502 0048 21F47F41 		bic	r1, r1, #65280
 503 004c B1F5003F 		cmp	r1, #131072
 504 0050 38D1     		bne	.L41
 704:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 705:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* GET STATUS for Device*/
 706:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 505              		.loc 1 706 0
 506 0052 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 507              	.LVL55:
 508 0054 13F07F03 		ands	r3, r3, #127
 509 0058 02D1     		bne	.L42
 707:STM32_USB-FS-Device_Driver/src/usb_core.c ****         && (pInformation->USBwIndex == 0))
 510              		.loc 1 707 0
 511 005a 9188     		ldrh	r1, [r2, #4]
 512 005c 0029     		cmp	r1, #0
 513 005e 57D0     		beq	.L59
 514              	.L42:
 708:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 709:STM32_USB-FS-Device_Driver/src/usb_core.c ****       CopyRoutine = Standard_GetStatus;
 710:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 711:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 712:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* GET STATUS for Interface*/
 713:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (Type_Recipient == (STANDARD_REQUEST | INTERFACE_RECIPIENT))
 515              		.loc 1 713 0
 516 0060 012B     		cmp	r3, #1
 517 0062 0DD1     		bne	.L43
 714:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 715:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (((*pProperty->Class_Get_Interface_Setting)(pInformation->USBwIndex0, 0) == USB_SUCCESS)
 518              		.loc 1 715 0
 519 0064 654B     		ldr	r3, .L74+4
 520 0066 1B68     		ldr	r3, [r3]
 521 0068 9B69     		ldr	r3, [r3, #24]
 522 006a 0021     		movs	r1, #0
 523 006c 5079     		ldrb	r0, [r2, #5]	@ zero_extendqisi2
 524 006e 9847     		blx	r3
 525              	.LVL56:
 526 0070 0028     		cmp	r0, #0
 527 0072 4FD1     		bne	.L60
 716:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (pInformation->Current_Configuration != 0))
 528              		.loc 1 716 0
 529 0074 604B     		ldr	r3, .L74
 530 0076 1B68     		ldr	r3, [r3]
 531 0078 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 532 007a 002B     		cmp	r3, #0
 533 007c 4CD1     		bne	.L61
 534 007e 62E0     		b	.L38
 535              	.LVL57:
 536              	.L43:
 717:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 718:STM32_USB-FS-Device_Driver/src/usb_core.c ****         CopyRoutine = Standard_GetStatus;
 719:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 720:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 721:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 722:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* GET STATUS for EndPoint*/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 23


 723:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (Type_Recipient == (STANDARD_REQUEST | ENDPOINT_RECIPIENT))
 537              		.loc 1 723 0
 538 0080 022B     		cmp	r3, #2
 539 0082 4BD1     		bne	.L62
 724:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 725:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Related_Endpoint = (pInformation->USBwIndex0 & 0x0f);
 540              		.loc 1 725 0
 541 0084 5379     		ldrb	r3, [r2, #5]	@ zero_extendqisi2
 542 0086 03F00F02 		and	r2, r3, #15
 543              	.LVL58:
 544 008a 03F07000 		and	r0, r3, #112
 545              	.LVL59:
 726:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Reserved = pInformation->USBwIndex0 & 0x70;
 727:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 728:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (ValBit(pInformation->USBwIndex0, 7))
 546              		.loc 1 728 0
 547 008e 13F0800F 		tst	r3, #128
 548 0092 08D0     		beq	.L44
 729:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 730:STM32_USB-FS-Device_Driver/src/usb_core.c ****         /*Get Status of endpoint & stall the request if the related_ENdpoint
 731:STM32_USB-FS-Device_Driver/src/usb_core.c ****         is Disabled*/
 732:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Status = _GetEPTxStatus(Related_Endpoint);
 549              		.loc 1 732 0
 550 0094 9300     		lsls	r3, r2, #2
 551 0096 03F18043 		add	r3, r3, #1073741824
 552 009a 03F5B843 		add	r3, r3, #23552
 553 009e 1B68     		ldr	r3, [r3]
 554 00a0 03F03003 		and	r3, r3, #48
 555              	.LVL60:
 556 00a4 07E0     		b	.L45
 557              	.LVL61:
 558              	.L44:
 733:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 734:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else
 735:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 736:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Status = _GetEPRxStatus(Related_Endpoint);
 559              		.loc 1 736 0
 560 00a6 9300     		lsls	r3, r2, #2
 561 00a8 03F18043 		add	r3, r3, #1073741824
 562 00ac 03F5B843 		add	r3, r3, #23552
 563 00b0 1B68     		ldr	r3, [r3]
 564 00b2 03F44053 		and	r3, r3, #12288
 565              	.LVL62:
 566              	.L45:
 737:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 738:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 739:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if ((Related_Endpoint < Device_Table.Total_Endpoint) && (Reserved == 0)
 567              		.loc 1 739 0
 568 00b6 5249     		ldr	r1, .L74+8
 569 00b8 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 570 00ba 8A42     		cmp	r2, r1
 571 00bc 30D2     		bcs	.L63
 572              		.loc 1 739 0 is_stmt 0 discriminator 1
 573 00be 88BB     		cbnz	r0, .L64
 740:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (Status != 0))
 574              		.loc 1 740 0 is_stmt 1
 575 00c0 93BB     		cbnz	r3, .L65
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 24


 576 00c2 40E0     		b	.L38
 577              	.LVL63:
 578              	.L41:
 741:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 742:STM32_USB-FS-Device_Driver/src/usb_core.c ****         CopyRoutine = Standard_GetStatus;
 743:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 744:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 745:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 746:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 747:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 748:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*GET CONFIGURATION*/
 749:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Request_No == GET_CONFIGURATION)
 579              		.loc 1 749 0
 580 00c4 082B     		cmp	r3, #8
 581 00c6 05D1     		bne	.L46
 750:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 751:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT))
 582              		.loc 1 751 0
 583 00c8 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 584              	.LVL64:
 585 00ca 13F07F0F 		tst	r3, #127
 586 00ce 2DD0     		beq	.L66
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 587              		.loc 1 677 0
 588 00d0 0023     		movs	r3, #0
 589 00d2 38E0     		b	.L38
 590              	.LVL65:
 591              	.L46:
 752:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 753:STM32_USB-FS-Device_Driver/src/usb_core.c ****       CopyRoutine = Standard_GetConfiguration;
 754:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 755:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 756:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /*GET INTERFACE*/
 757:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (Request_No == GET_INTERFACE)
 592              		.loc 1 757 0
 593 00d4 0A2B     		cmp	r3, #10
 594 00d6 2BD1     		bne	.L67
 758:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 759:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((Type_Recipient == (STANDARD_REQUEST | INTERFACE_RECIPIENT))
 595              		.loc 1 759 0
 596 00d8 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 597              	.LVL66:
 598 00da 03F07F03 		and	r3, r3, #127
 599 00de 012B     		cmp	r3, #1
 600 00e0 28D1     		bne	.L68
 760:STM32_USB-FS-Device_Driver/src/usb_core.c ****         && (pInformation->Current_Configuration != 0) && (pInformation->USBwValue == 0)
 601              		.loc 1 760 0
 602 00e2 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 603 00e4 43B3     		cbz	r3, .L69
 604              		.loc 1 760 0 is_stmt 0 discriminator 1
 605 00e6 5388     		ldrh	r3, [r2, #2]
 606 00e8 43BB     		cbnz	r3, .L70
 761:STM32_USB-FS-Device_Driver/src/usb_core.c ****         && (pInformation->USBwIndex1 == 0) && (pInformation->USBwLength == 0x0001)
 607              		.loc 1 761 0 is_stmt 1
 608 00ea 5368     		ldr	r3, [r2, #4]
 609 00ec 23F47F43 		bic	r3, r3, #65280
 610 00f0 B3F5803F 		cmp	r3, #65536
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 25


 611 00f4 24D1     		bne	.L71
 762:STM32_USB-FS-Device_Driver/src/usb_core.c ****         && ((*pProperty->Class_Get_Interface_Setting)(pInformation->USBwIndex0, 0) == USB_SUCCESS))
 612              		.loc 1 762 0
 613 00f6 414B     		ldr	r3, .L74+4
 614 00f8 1B68     		ldr	r3, [r3]
 615 00fa 9B69     		ldr	r3, [r3, #24]
 616 00fc 0021     		movs	r1, #0
 617 00fe 5079     		ldrb	r0, [r2, #5]	@ zero_extendqisi2
 618 0100 9847     		blx	r3
 619              	.LVL67:
 620 0102 F8B1     		cbz	r0, .L72
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 621              		.loc 1 677 0
 622 0104 0023     		movs	r3, #0
 623 0106 1EE0     		b	.L38
 624              	.LVL68:
 625              	.L57:
 626 0108 0023     		movs	r3, #0
 627 010a 1CE0     		b	.L38
 628              	.LVL69:
 629              	.L58:
 630 010c 0023     		movs	r3, #0
 631              	.LVL70:
 632 010e 1AE0     		b	.L38
 633              	.LVL71:
 634              	.L59:
 709:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 635              		.loc 1 709 0
 636 0110 3C4B     		ldr	r3, .L74+12
 637 0112 18E0     		b	.L38
 638              	.LVL72:
 639              	.L60:
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 640              		.loc 1 677 0
 641 0114 0023     		movs	r3, #0
 642 0116 16E0     		b	.L38
 643              	.L61:
 718:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 644              		.loc 1 718 0
 645 0118 3A4B     		ldr	r3, .L74+12
 646 011a 14E0     		b	.L38
 647              	.LVL73:
 648              	.L62:
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 649              		.loc 1 677 0
 650 011c 0023     		movs	r3, #0
 651 011e 12E0     		b	.L38
 652              	.LVL74:
 653              	.L63:
 654 0120 0023     		movs	r3, #0
 655              	.LVL75:
 656 0122 10E0     		b	.L38
 657              	.LVL76:
 658              	.L64:
 659 0124 0023     		movs	r3, #0
 660              	.LVL77:
 661 0126 0EE0     		b	.L38
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 26


 662              	.LVL78:
 663              	.L65:
 742:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 664              		.loc 1 742 0
 665 0128 364B     		ldr	r3, .L74+12
 666              	.LVL79:
 667 012a 0CE0     		b	.L38
 668              	.LVL80:
 669              	.L66:
 753:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 670              		.loc 1 753 0
 671 012c 364B     		ldr	r3, .L74+16
 672 012e 0AE0     		b	.L38
 673              	.LVL81:
 674              	.L67:
 677:STM32_USB-FS-Device_Driver/src/usb_core.c ****   wOffset = 0;
 675              		.loc 1 677 0
 676 0130 0023     		movs	r3, #0
 677              	.LVL82:
 678 0132 08E0     		b	.L38
 679              	.L68:
 680 0134 0023     		movs	r3, #0
 681 0136 06E0     		b	.L38
 682              	.L69:
 683 0138 0023     		movs	r3, #0
 684 013a 04E0     		b	.L38
 685              	.L70:
 686 013c 0023     		movs	r3, #0
 687 013e 02E0     		b	.L38
 688              	.L71:
 689 0140 0023     		movs	r3, #0
 690 0142 00E0     		b	.L38
 691              	.LVL83:
 692              	.L72:
 763:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 764:STM32_USB-FS-Device_Driver/src/usb_core.c ****       CopyRoutine = Standard_GetInterface;
 693              		.loc 1 764 0
 694 0144 314B     		ldr	r3, .L74+20
 695              	.LVL84:
 696              	.L38:
 765:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 766:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 767:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 768:STM32_USB-FS-Device_Driver/src/usb_core.c ****   
 769:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (CopyRoutine)
 697              		.loc 1 769 0
 698 0146 43B1     		cbz	r3, .L47
 770:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 771:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.Usb_wOffset = wOffset;
 699              		.loc 1 771 0
 700 0148 2B4A     		ldr	r2, .L74
 701 014a 1268     		ldr	r2, [r2]
 702 014c 0024     		movs	r4, #0
 703 014e 5482     		strh	r4, [r2, #18]	@ movhi
 772:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.CopyData = CopyRoutine;
 704              		.loc 1 772 0
 705 0150 9361     		str	r3, [r2, #24]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 27


 773:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* sb in the original the cast to word was directly */
 774:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* now the cast is made step by step */
 775:STM32_USB-FS-Device_Driver/src/usb_core.c ****     (*CopyRoutine)(0);
 706              		.loc 1 775 0
 707 0152 2046     		mov	r0, r4
 708 0154 9847     		blx	r3
 709              	.LVL85:
 776:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Result = USB_SUCCESS;
 710              		.loc 1 776 0
 711 0156 2046     		mov	r0, r4
 712 0158 0DE0     		b	.L48
 713              	.LVL86:
 714              	.L47:
 777:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 778:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 779:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 780:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Result = (*pProperty->Class_Data_Setup)(pInformation->USBbRequest);
 715              		.loc 1 780 0
 716 015a 284B     		ldr	r3, .L74+4
 717              	.LVL87:
 718 015c 1B68     		ldr	r3, [r3]
 719 015e 1B69     		ldr	r3, [r3, #16]
 720 0160 254A     		ldr	r2, .L74
 721 0162 1268     		ldr	r2, [r2]
 722 0164 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 723 0166 9847     		blx	r3
 724              	.LVL88:
 781:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Result == USB_NOT_READY)
 725              		.loc 1 781 0
 726 0168 0328     		cmp	r0, #3
 727 016a 04D1     		bne	.L48
 782:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 783:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->ControlState = PAUSE;
 728              		.loc 1 783 0
 729 016c 224B     		ldr	r3, .L74
 730 016e 1B68     		ldr	r3, [r3]
 731 0170 0922     		movs	r2, #9
 732 0172 1A72     		strb	r2, [r3, #8]
 784:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return;
 733              		.loc 1 784 0
 734 0174 3EE0     		b	.L36
 735              	.LVL89:
 736              	.L48:
 785:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 786:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 787:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 788:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->Ctrl_Info.Usb_wLength == 0xFFFF)
 737              		.loc 1 788 0
 738 0176 204B     		ldr	r3, .L74
 739 0178 1B68     		ldr	r3, [r3]
 740 017a 1A8A     		ldrh	r2, [r3, #16]
 741 017c 4FF6FF71 		movw	r1, #65535
 742 0180 8A42     		cmp	r2, r1
 743 0182 02D1     		bne	.L50
 789:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 790:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Data is not ready, wait it */
 791:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->ControlState = PAUSE;
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 28


 744              		.loc 1 791 0
 745 0184 0922     		movs	r2, #9
 746 0186 1A72     		strb	r2, [r3, #8]
 792:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return;
 747              		.loc 1 792 0
 748 0188 34E0     		b	.L36
 749              	.L50:
 793:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 794:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if ((Result == USB_UNSUPPORT) || (pInformation->Ctrl_Info.Usb_wLength == 0))
 750              		.loc 1 794 0
 751 018a 0228     		cmp	r0, #2
 752 018c 00D0     		beq	.L51
 753              		.loc 1 794 0 is_stmt 0 discriminator 1
 754 018e 12B9     		cbnz	r2, .L52
 755              	.L51:
 795:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 796:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Unsupported request */
 797:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->ControlState = STALLED;
 756              		.loc 1 797 0 is_stmt 1
 757 0190 0822     		movs	r2, #8
 758 0192 1A72     		strb	r2, [r3, #8]
 798:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return;
 759              		.loc 1 798 0
 760 0194 2EE0     		b	.L36
 761              	.L52:
 799:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 800:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 801:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 802:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (ValBit(pInformation->USBbmRequestType, 7))
 762              		.loc 1 802 0
 763 0196 93F90010 		ldrsb	r1, [r3]
 764 019a 0029     		cmp	r1, #0
 765 019c 24DA     		bge	.L53
 766              	.LBB5:
 803:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 804:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Device ==> Host */
 805:STM32_USB-FS-Device_Driver/src/usb_core.c ****     __IO uint32_t wLength = pInformation->USBwLength;
 767              		.loc 1 805 0
 768 019e D988     		ldrh	r1, [r3, #6]
 769 01a0 0191     		str	r1, [sp, #4]
 806:STM32_USB-FS-Device_Driver/src/usb_core.c ****      
 807:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Restrict the data length to be the one host asks */
 808:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (pInformation->Ctrl_Info.Usb_wLength > wLength)
 770              		.loc 1 808 0
 771 01a2 0198     		ldr	r0, [sp, #4]
 772              	.LVL90:
 773 01a4 8242     		cmp	r2, r0
 774 01a6 02D9     		bls	.L54
 809:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 810:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->Ctrl_Info.Usb_wLength = wLength;
 775              		.loc 1 810 0
 776 01a8 019A     		ldr	r2, [sp, #4]
 777 01aa 1A82     		strh	r2, [r3, #16]	@ movhi
 778 01ac 14E0     		b	.L55
 779              	.L54:
 811:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 812:STM32_USB-FS-Device_Driver/src/usb_core.c ****     
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 29


 813:STM32_USB-FS-Device_Driver/src/usb_core.c ****     else if (pInformation->Ctrl_Info.Usb_wLength < pInformation->USBwLength)
 780              		.loc 1 813 0
 781 01ae 8A42     		cmp	r2, r1
 782 01b0 12D2     		bcs	.L55
 814:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 815:STM32_USB-FS-Device_Driver/src/usb_core.c ****       if (pInformation->Ctrl_Info.Usb_wLength < pProperty->MaxPacketSize)
 783              		.loc 1 815 0
 784 01b2 1249     		ldr	r1, .L74+4
 785 01b4 0968     		ldr	r1, [r1]
 786 01b6 91F82C10 		ldrb	r1, [r1, #44]	@ zero_extendqisi2
 787 01ba 88B2     		uxth	r0, r1
 788 01bc 8242     		cmp	r2, r0
 789 01be 03D2     		bcs	.L56
 816:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 817:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Data_Mul_MaxPacketSize = FALSE;
 790              		.loc 1 817 0
 791 01c0 0021     		movs	r1, #0
 792 01c2 134A     		ldr	r2, .L74+24
 793 01c4 1170     		strb	r1, [r2]
 794 01c6 07E0     		b	.L55
 795              	.L56:
 818:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 819:STM32_USB-FS-Device_Driver/src/usb_core.c ****       else if ((pInformation->Ctrl_Info.Usb_wLength % pProperty->MaxPacketSize) == 0)
 796              		.loc 1 819 0
 797 01c8 92FBF1F0 		sdiv	r0, r2, r1
 798 01cc 01FB1022 		mls	r2, r1, r0, r2
 799 01d0 12B9     		cbnz	r2, .L55
 820:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 821:STM32_USB-FS-Device_Driver/src/usb_core.c ****         Data_Mul_MaxPacketSize = TRUE;
 800              		.loc 1 821 0
 801 01d2 0121     		movs	r1, #1
 802 01d4 0E4A     		ldr	r2, .L74+24
 803 01d6 1170     		strb	r1, [r2]
 804              	.L55:
 822:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 823:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }   
 824:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 825:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->Ctrl_Info.PacketSize = pProperty->MaxPacketSize;
 805              		.loc 1 825 0
 806 01d8 084A     		ldr	r2, .L74+4
 807 01da 1268     		ldr	r2, [r2]
 808 01dc 92F82C20 		ldrb	r2, [r2, #44]	@ zero_extendqisi2
 809 01e0 9A82     		strh	r2, [r3, #20]	@ movhi
 826:STM32_USB-FS-Device_Driver/src/usb_core.c ****     DataStageIn();
 810              		.loc 1 826 0
 811 01e2 FFF7FEFF 		bl	DataStageIn
 812              	.LVL91:
 813              	.LBE5:
 814 01e6 05E0     		b	.L36
 815              	.LVL92:
 816              	.L53:
 827:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 828:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 829:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 830:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->ControlState = OUT_DATA;
 817              		.loc 1 830 0
 818 01e8 0322     		movs	r2, #3
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 30


 819 01ea 1A72     		strb	r2, [r3, #8]
 831:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPRxStatus(EP_RX_VALID); /* enable for next data reception */
 820              		.loc 1 831 0
 821 01ec 4FF44052 		mov	r2, #12288
 822 01f0 084B     		ldr	r3, .L74+28
 823 01f2 1A80     		strh	r2, [r3]	@ movhi
 824              	.LVL93:
 825              	.L36:
 832:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 833:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 834:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return;
 835:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 826              		.loc 1 835 0
 827 01f4 02B0     		add	sp, sp, #8
 828              	.LCFI6:
 829              		.cfi_def_cfa_offset 8
 830              		@ sp needed
 831 01f6 10BD     		pop	{r4, pc}
 832              	.L75:
 833              		.align	2
 834              	.L74:
 835 01f8 00000000 		.word	pInformation
 836 01fc 00000000 		.word	pProperty
 837 0200 00000000 		.word	Device_Table
 838 0204 00000000 		.word	Standard_GetStatus
 839 0208 00000000 		.word	Standard_GetConfiguration
 840 020c 00000000 		.word	Standard_GetInterface
 841 0210 00000000 		.word	.LANCHOR0
 842 0214 00000000 		.word	SaveRState
 843              		.cfi_endproc
 844              	.LFE39:
 846              		.section	.text.DataStageOut,"ax",%progbits
 847              		.align	2
 848              		.thumb
 849              		.thumb_func
 851              	DataStageOut:
 852              	.LFB36:
 427:STM32_USB-FS-Device_Driver/src/usb_core.c ****   ENDPOINT_INFO *pEPinfo = &pInformation->Ctrl_Info;
 853              		.loc 1 427 0
 854              		.cfi_startproc
 855              		@ args = 0, pretend = 0, frame = 0
 856              		@ frame_needed = 0, uses_anonymous_args = 0
 857 0000 70B5     		push	{r4, r5, r6, lr}
 858              	.LCFI7:
 859              		.cfi_def_cfa_offset 16
 860              		.cfi_offset 4, -16
 861              		.cfi_offset 5, -12
 862              		.cfi_offset 6, -8
 863              		.cfi_offset 14, -4
 428:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t save_rLength;
 864              		.loc 1 428 0
 865 0002 244B     		ldr	r3, .L84
 866 0004 1C68     		ldr	r4, [r3]
 867              	.LVL94:
 431:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 868              		.loc 1 431 0
 869 0006 228A     		ldrh	r2, [r4, #16]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 31


 870              	.LVL95:
 433:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 871              		.loc 1 433 0
 872 0008 A369     		ldr	r3, [r4, #24]
 873 000a B3B1     		cbz	r3, .L77
 433:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 874              		.loc 1 433 0 is_stmt 0 discriminator 1
 875 000c AAB1     		cbz	r2, .L77
 876              	.LBB6:
 438:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Length > save_rLength)
 877              		.loc 1 438 0 is_stmt 1
 878 000e A18A     		ldrh	r1, [r4, #20]
 879              	.LVL96:
 439:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 880              		.loc 1 439 0
 881 0010 8A42     		cmp	r2, r1
 882 0012 00D3     		bcc	.L78
 438:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Length > save_rLength)
 883              		.loc 1 438 0
 884 0014 0A46     		mov	r2, r1
 885              	.LVL97:
 886              	.L78:
 444:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pEPinfo->Usb_rLength -= Length;
 887              		.loc 1 444 0
 888 0016 95B2     		uxth	r5, r2
 889 0018 2846     		mov	r0, r5
 890 001a 9847     		blx	r3
 891              	.LVL98:
 892 001c 0646     		mov	r6, r0
 893              	.LVL99:
 445:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pEPinfo->Usb_rOffset += Length;
 894              		.loc 1 445 0
 895 001e 238A     		ldrh	r3, [r4, #16]
 896 0020 5B1B     		subs	r3, r3, r5
 897 0022 2382     		strh	r3, [r4, #16]	@ movhi
 446:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 898              		.loc 1 446 0
 899 0024 638A     		ldrh	r3, [r4, #18]
 900 0026 2B44     		add	r3, r3, r5
 901 0028 6382     		strh	r3, [r4, #18]	@ movhi
 448:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 902              		.loc 1 448 0
 903 002a 0020     		movs	r0, #0
 904              	.LVL100:
 905 002c FFF7FEFF 		bl	GetEPRxAddr
 906              	.LVL101:
 907 0030 2A46     		mov	r2, r5
 908 0032 0146     		mov	r1, r0
 909 0034 3046     		mov	r0, r6
 910 0036 FFF7FEFF 		bl	PMAToUserBufferCopy
 911              	.LVL102:
 912              	.L77:
 913              	.LBE6:
 451:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 914              		.loc 1 451 0
 915 003a 238A     		ldrh	r3, [r4, #16]
 916 003c 53B1     		cbz	r3, .L79
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 32


 453:STM32_USB-FS-Device_Driver/src/usb_core.c ****     SetEPTxCount(ENDP0, 0);
 917              		.loc 1 453 0
 918 003e 4FF44052 		mov	r2, #12288
 919 0042 154B     		ldr	r3, .L84+4
 920 0044 1A80     		strh	r2, [r3]	@ movhi
 454:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPTxStatus(EP_TX_VALID);/* Expect the host to abort the data OUT stage */
 921              		.loc 1 454 0
 922 0046 0021     		movs	r1, #0
 923 0048 0846     		mov	r0, r1
 924 004a FFF7FEFF 		bl	SetEPTxCount
 925              	.LVL103:
 455:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 926              		.loc 1 455 0
 927 004e 3022     		movs	r2, #48
 928 0050 124B     		ldr	r3, .L84+8
 929 0052 1A80     		strh	r2, [r3]	@ movhi
 930              	.L79:
 458:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 931              		.loc 1 458 0
 932 0054 238A     		ldrh	r3, [r4, #16]
 933 0056 A28A     		ldrh	r2, [r4, #20]
 934 0058 9342     		cmp	r3, r2
 935 005a 04D3     		bcc	.L80
 460:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 936              		.loc 1 460 0
 937 005c 0D4B     		ldr	r3, .L84
 938 005e 1B68     		ldr	r3, [r3]
 939 0060 0322     		movs	r2, #3
 940 0062 1A72     		strb	r2, [r3, #8]
 941 0064 70BD     		pop	{r4, r5, r6, pc}
 942              	.LVL104:
 943              	.L80:
 464:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 944              		.loc 1 464 0
 945 0066 23B1     		cbz	r3, .L82
 466:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 946              		.loc 1 466 0
 947 0068 0A4B     		ldr	r3, .L84
 948 006a 1B68     		ldr	r3, [r3]
 949 006c 0522     		movs	r2, #5
 950 006e 1A72     		strb	r2, [r3, #8]
 951 0070 70BD     		pop	{r4, r5, r6, pc}
 952              	.LVL105:
 953              	.L82:
 468:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 954              		.loc 1 468 0
 955 0072 73B9     		cbnz	r3, .L76
 470:STM32_USB-FS-Device_Driver/src/usb_core.c ****       USB_StatusIn();
 956              		.loc 1 470 0
 957 0074 074B     		ldr	r3, .L84
 958 0076 1B68     		ldr	r3, [r3]
 959 0078 0622     		movs	r2, #6
 960 007a 1A72     		strb	r2, [r3, #8]
 471:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 961              		.loc 1 471 0
 962 007c 084B     		ldr	r3, .L84+12
 963 007e 1A68     		ldr	r2, [r3]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 33


 964 0080 92B2     		uxth	r2, r2
 965 0082 084B     		ldr	r3, .L84+16
 966 0084 1344     		add	r3, r3, r2
 967 0086 5B00     		lsls	r3, r3, #1
 968 0088 0022     		movs	r2, #0
 969 008a 1A60     		str	r2, [r3]
 970 008c 3022     		movs	r2, #48
 971 008e 034B     		ldr	r3, .L84+8
 972 0090 1A80     		strh	r2, [r3]	@ movhi
 973              	.L76:
 974 0092 70BD     		pop	{r4, r5, r6, pc}
 975              	.LVL106:
 976              	.L85:
 977              		.align	2
 978              	.L84:
 979 0094 00000000 		.word	pInformation
 980 0098 00000000 		.word	SaveRState
 981 009c 00000000 		.word	SaveTState
 982 00a0 505C0040 		.word	1073765456
 983 00a4 02300020 		.word	536883202
 984              		.cfi_endproc
 985              	.LFE36:
 987              		.section	.text.Standard_SetConfiguration,"ax",%progbits
 988              		.align	2
 989              		.global	Standard_SetConfiguration
 990              		.thumb
 991              		.thumb_func
 993              	Standard_SetConfiguration:
 994              	.LFB28:
  78:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 995              		.loc 1 78 0
 996              		.cfi_startproc
 997              		@ args = 0, pretend = 0, frame = 0
 998              		@ frame_needed = 0, uses_anonymous_args = 0
 999 0000 08B5     		push	{r3, lr}
 1000              	.LCFI8:
 1001              		.cfi_def_cfa_offset 8
 1002              		.cfi_offset 3, -8
 1003              		.cfi_offset 14, -4
  80:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Device_Table.Total_Configuration) && (pInformation->USBwValue1 == 0)
 1004              		.loc 1 80 0
 1005 0002 0C4B     		ldr	r3, .L92
 1006 0004 1B68     		ldr	r3, [r3]
 1007 0006 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
  81:STM32_USB-FS-Device_Driver/src/usb_core.c ****       && (pInformation->USBwIndex == 0)) /*call Back usb spec 2.0*/
 1008              		.loc 1 81 0
 1009 0008 0B49     		ldr	r1, .L92+4
 1010 000a 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
  80:STM32_USB-FS-Device_Driver/src/usb_core.c ****       Device_Table.Total_Configuration) && (pInformation->USBwValue1 == 0)
 1011              		.loc 1 80 0
 1012 000c 8A42     		cmp	r2, r1
 1013 000e 0AD8     		bhi	.L88
  81:STM32_USB-FS-Device_Driver/src/usb_core.c ****       && (pInformation->USBwIndex == 0)) /*call Back usb spec 2.0*/
 1014              		.loc 1 81 0
 1015 0010 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
 1016 0012 51B9     		cbnz	r1, .L89
  82:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 34


 1017              		.loc 1 82 0
 1018 0014 9988     		ldrh	r1, [r3, #4]
 1019 0016 51B9     		cbnz	r1, .L90
  84:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pUser_Standard_Requests->User_SetConfiguration();
 1020              		.loc 1 84 0
 1021 0018 9A72     		strb	r2, [r3, #10]
  85:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
 1022              		.loc 1 85 0
 1023 001a 084B     		ldr	r3, .L92+8
 1024 001c 1B68     		ldr	r3, [r3]
 1025 001e 5B68     		ldr	r3, [r3, #4]
 1026 0020 9847     		blx	r3
 1027              	.LVL107:
  86:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1028              		.loc 1 86 0
 1029 0022 0020     		movs	r0, #0
 1030 0024 08BD     		pop	{r3, pc}
 1031              	.L88:
  90:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1032              		.loc 1 90 0
 1033 0026 0220     		movs	r0, #2
 1034 0028 08BD     		pop	{r3, pc}
 1035              	.L89:
 1036 002a 0220     		movs	r0, #2
 1037 002c 08BD     		pop	{r3, pc}
 1038              	.L90:
 1039 002e 0220     		movs	r0, #2
  92:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1040              		.loc 1 92 0
 1041 0030 08BD     		pop	{r3, pc}
 1042              	.L93:
 1043 0032 00BF     		.align	2
 1044              	.L92:
 1045 0034 00000000 		.word	pInformation
 1046 0038 00000000 		.word	Device_Table
 1047 003c 00000000 		.word	pUser_Standard_Requests
 1048              		.cfi_endproc
 1049              	.LFE28:
 1051              		.section	.text.Standard_SetInterface,"ax",%progbits
 1052              		.align	2
 1053              		.global	Standard_SetInterface
 1054              		.thumb
 1055              		.thumb_func
 1057              	Standard_SetInterface:
 1058              	.LFB30:
 124:STM32_USB-FS-Device_Driver/src/usb_core.c ****   RESULT Re;
 1059              		.loc 1 124 0
 1060              		.cfi_startproc
 1061              		@ args = 0, pretend = 0, frame = 0
 1062              		@ frame_needed = 0, uses_anonymous_args = 0
 1063 0000 10B5     		push	{r4, lr}
 1064              	.LCFI9:
 1065              		.cfi_def_cfa_offset 8
 1066              		.cfi_offset 4, -8
 1067              		.cfi_offset 14, -4
 128:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1068              		.loc 1 128 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 35


 1069 0002 134B     		ldr	r3, .L102
 1070 0004 1B68     		ldr	r3, [r3]
 1071 0006 9A69     		ldr	r2, [r3, #24]
 1072 0008 124C     		ldr	r4, .L102+4
 1073 000a 2368     		ldr	r3, [r4]
 1074 000c D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 1075 000e 5879     		ldrb	r0, [r3, #5]	@ zero_extendqisi2
 1076 0010 9047     		blx	r2
 1077              	.LVL108:
 130:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1078              		.loc 1 130 0
 1079 0012 2368     		ldr	r3, [r4]
 1080 0014 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 1081 0016 82B1     		cbz	r2, .L96
 132:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->USBwValue1 != 0))
 1082              		.loc 1 132 0
 1083 0018 88B9     		cbnz	r0, .L97
 132:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->USBwValue1 != 0))
 1084              		.loc 1 132 0 is_stmt 0 discriminator 1
 1085 001a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 1086 001c 8AB9     		cbnz	r2, .L98
 133:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1087              		.loc 1 133 0 is_stmt 1
 1088 001e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1089 0020 8BB9     		cbnz	r3, .L99
 137:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1090              		.loc 1 137 0
 1091 0022 90B9     		cbnz	r0, .L100
 139:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->Current_Interface = pInformation->USBwIndex0;
 1092              		.loc 1 139 0
 1093 0024 0C4B     		ldr	r3, .L102+8
 1094 0026 1B68     		ldr	r3, [r3]
 1095 0028 DB68     		ldr	r3, [r3, #12]
 1096 002a 9847     		blx	r3
 1097              	.LVL109:
 140:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pInformation->Current_AlternateSetting = pInformation->USBwValue0;
 1098              		.loc 1 140 0
 1099 002c 2368     		ldr	r3, [r4]
 1100 002e 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 1101 0030 DA72     		strb	r2, [r3, #11]
 141:STM32_USB-FS-Device_Driver/src/usb_core.c ****       return USB_SUCCESS;
 1102              		.loc 1 141 0
 1103 0032 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1104 0034 1A73     		strb	r2, [r3, #12]
 142:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1105              		.loc 1 142 0
 1106 0036 0020     		movs	r0, #0
 1107 0038 10BD     		pop	{r4, pc}
 1108              	.LVL110:
 1109              	.L96:
 147:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1110              		.loc 1 147 0
 1111 003a 0220     		movs	r0, #2
 1112              	.LVL111:
 1113 003c 10BD     		pop	{r4, pc}
 1114              	.LVL112:
 1115              	.L97:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 36


 135:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1116              		.loc 1 135 0
 1117 003e 0220     		movs	r0, #2
 1118              	.LVL113:
 1119 0040 10BD     		pop	{r4, pc}
 1120              	.LVL114:
 1121              	.L98:
 1122 0042 0220     		movs	r0, #2
 1123              	.LVL115:
 1124 0044 10BD     		pop	{r4, pc}
 1125              	.LVL116:
 1126              	.L99:
 1127 0046 0220     		movs	r0, #2
 1128              	.LVL117:
 1129 0048 10BD     		pop	{r4, pc}
 1130              	.LVL118:
 1131              	.L100:
 147:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1132              		.loc 1 147 0
 1133 004a 0220     		movs	r0, #2
 1134              	.LVL119:
 148:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1135              		.loc 1 148 0
 1136 004c 10BD     		pop	{r4, pc}
 1137              	.L103:
 1138 004e 00BF     		.align	2
 1139              	.L102:
 1140 0050 00000000 		.word	pProperty
 1141 0054 00000000 		.word	pInformation
 1142 0058 00000000 		.word	pUser_Standard_Requests
 1143              		.cfi_endproc
 1144              	.LFE30:
 1146              		.section	.text.Standard_ClearFeature,"ax",%progbits
 1147              		.align	2
 1148              		.global	Standard_ClearFeature
 1149              		.thumb
 1150              		.thumb_func
 1152              	Standard_ClearFeature:
 1153              	.LFB32:
 237:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t     Type_Rec = Type_Recipient;
 1154              		.loc 1 237 0
 1155              		.cfi_startproc
 1156              		@ args = 0, pretend = 0, frame = 0
 1157              		@ frame_needed = 0, uses_anonymous_args = 0
 238:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t     Status;
 1158              		.loc 1 238 0
 1159 0000 414B     		ldr	r3, .L120
 1160 0002 1A68     		ldr	r2, [r3]
 1161 0004 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1162              	.LVL120:
 242:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {/*Device Clear Feature*/
 1163              		.loc 1 242 0
 1164 0006 13F07F03 		ands	r3, r3, #127
 1165              	.LVL121:
 1166 000a 05D1     		bne	.L105
 244:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
 1167              		.loc 1 244 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 37


 1168 000c 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 1169              	.LVL122:
 1170 000e 23F02003 		bic	r3, r3, #32
 1171 0012 5372     		strb	r3, [r2, #9]
 245:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1172              		.loc 1 245 0
 1173 0014 0020     		movs	r0, #0
 1174 0016 7047     		bx	lr
 1175              	.LVL123:
 1176              	.L105:
 247:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {/*EndPoint Clear Feature*/
 1177              		.loc 1 247 0
 1178 0018 022B     		cmp	r3, #2
 1179 001a 68D1     		bne	.L112
 1180              	.LBB7:
 254:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->USBwIndex1 != 0))
 1181              		.loc 1 254 0
 1182 001c 5388     		ldrh	r3, [r2, #2]
 1183              	.LVL124:
 1184 001e 002B     		cmp	r3, #0
 1185 0020 67D1     		bne	.L113
 255:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1186              		.loc 1 255 0
 1187 0022 1379     		ldrb	r3, [r2, #4]	@ zero_extendqisi2
 1188 0024 002B     		cmp	r3, #0
 1189 0026 66D1     		bne	.L114
 1190              	.LBE7:
 237:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t     Type_Rec = Type_Recipient;
 1191              		.loc 1 237 0
 1192 0028 10B5     		push	{r4, lr}
 1193              	.LCFI10:
 1194              		.cfi_def_cfa_offset 8
 1195              		.cfi_offset 4, -8
 1196              		.cfi_offset 14, -4
 1197              	.LVL125:
 1198              	.LBB10:
 261:STM32_USB-FS-Device_Driver/src/usb_core.c ****     rEP = wIndex0 & ~0x80;
 1199              		.loc 1 261 0
 1200 002a 5179     		ldrb	r1, [r2, #5]	@ zero_extendqisi2
 1201              	.LVL126:
 262:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Related_Endpoint = ENDP0 + rEP;
 1202              		.loc 1 262 0
 1203 002c 21F08000 		bic	r0, r1, #128
 1204              	.LVL127:
 265:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1205              		.loc 1 265 0
 1206 0030 11F0800F 		tst	r1, #128
 1207 0034 08D0     		beq	.L107
 269:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1208              		.loc 1 269 0
 1209 0036 8300     		lsls	r3, r0, #2
 1210 0038 03F18043 		add	r3, r3, #1073741824
 1211 003c 03F5B843 		add	r3, r3, #23552
 1212 0040 1B68     		ldr	r3, [r3]
 1213 0042 03F03003 		and	r3, r3, #48
 1214              	.LVL128:
 1215 0046 07E0     		b	.L108
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 38


 1216              	.LVL129:
 1217              	.L107:
 273:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1218              		.loc 1 273 0
 1219 0048 8300     		lsls	r3, r0, #2
 1220 004a 03F18043 		add	r3, r3, #1073741824
 1221 004e 03F5B843 		add	r3, r3, #23552
 1222 0052 1B68     		ldr	r3, [r3]
 1223 0054 03F44053 		and	r3, r3, #12288
 1224              	.LVL130:
 1225              	.L108:
 276:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->Current_Configuration == 0))
 1226              		.loc 1 276 0
 1227 0058 2C4C     		ldr	r4, .L120+4
 1228 005a 2478     		ldrb	r4, [r4]	@ zero_extendqisi2
 1229 005c A042     		cmp	r0, r4
 1230 005e 4CD2     		bcs	.L115
 276:STM32_USB-FS-Device_Driver/src/usb_core.c ****         || (pInformation->Current_Configuration == 0))
 1231              		.loc 1 276 0 is_stmt 0 discriminator 1
 1232 0060 002B     		cmp	r3, #0
 1233 0062 4CD0     		beq	.L116
 277:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1234              		.loc 1 277 0 is_stmt 1
 1235 0064 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 1236              	.LVL131:
 1237 0066 002B     		cmp	r3, #0
 1238 0068 4BD0     		beq	.L117
 283:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1239              		.loc 1 283 0
 1240 006a 11F0800F 		tst	r1, #128
 1241 006e 12D0     		beq	.L109
 286:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 1242              		.loc 1 286 0
 1243 0070 8300     		lsls	r3, r0, #2
 1244 0072 03F18043 		add	r3, r3, #1073741824
 1245 0076 03F5B843 		add	r3, r3, #23552
 1246 007a 1B68     		ldr	r3, [r3]
 1247 007c 03F03003 		and	r3, r3, #48
 1248 0080 102B     		cmp	r3, #16
 1249 0082 2ED1     		bne	.L110
 288:STM32_USB-FS-Device_Driver/src/usb_core.c ****         SetEPTxStatus(Related_Endpoint, EP_TX_VALID);
 1250              		.loc 1 288 0
 1251 0084 C4B2     		uxtb	r4, r0
 1252 0086 2046     		mov	r0, r4
 1253              	.LVL132:
 1254 0088 FFF7FEFF 		bl	ClearDTOG_TX
 1255              	.LVL133:
 289:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1256              		.loc 1 289 0
 1257 008c 3021     		movs	r1, #48
 1258 008e 2046     		mov	r0, r4
 1259 0090 FFF7FEFF 		bl	SetEPTxStatus
 1260              	.LVL134:
 1261 0094 25E0     		b	.L110
 1262              	.LVL135:
 1263              	.L109:
 295:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 39


 1264              		.loc 1 295 0
 1265 0096 8400     		lsls	r4, r0, #2
 1266 0098 04F18044 		add	r4, r4, #1073741824
 1267 009c 04F5B844 		add	r4, r4, #23552
 1268 00a0 2368     		ldr	r3, [r4]
 1269 00a2 03F44053 		and	r3, r3, #12288
 1270 00a6 B3F5805F 		cmp	r3, #4096
 1271 00aa 1AD1     		bne	.L110
 297:STM32_USB-FS-Device_Driver/src/usb_core.c ****         {
 1272              		.loc 1 297 0
 1273 00ac 70B9     		cbnz	r0, .L111
 300:STM32_USB-FS-Device_Driver/src/usb_core.c ****           _SetEPRxStatus(Related_Endpoint, EP_RX_VALID);
 1274              		.loc 1 300 0
 1275 00ae 184B     		ldr	r3, .L120+8
 1276 00b0 93F82C10 		ldrb	r1, [r3, #44]	@ zero_extendqisi2
 1277              	.LVL136:
 1278 00b4 FFF7FEFF 		bl	SetEPRxCount
 1279              	.LVL137:
 1280              	.LBB8:
 301:STM32_USB-FS-Device_Driver/src/usb_core.c ****         }
 1281              		.loc 1 301 0
 1282 00b8 2368     		ldr	r3, [r4]
 1283 00ba 9BB2     		uxth	r3, r3
 1284 00bc 23F48043 		bic	r3, r3, #16384
 1285 00c0 23F07003 		bic	r3, r3, #112
 1286              	.LVL138:
 1287 00c4 83F44053 		eor	r3, r3, #12288
 1288              	.LVL139:
 1289 00c8 2360     		str	r3, [r4]
 1290              	.LBE8:
 1291 00ca 0AE0     		b	.L110
 1292              	.LVL140:
 1293              	.L111:
 305:STM32_USB-FS-Device_Driver/src/usb_core.c ****           _SetEPRxStatus(Related_Endpoint, EP_RX_VALID);
 1294              		.loc 1 305 0
 1295 00cc FFF7FEFF 		bl	ClearDTOG_RX
 1296              	.LVL141:
 1297              	.LBB9:
 306:STM32_USB-FS-Device_Driver/src/usb_core.c ****         }
 1298              		.loc 1 306 0
 1299 00d0 2368     		ldr	r3, [r4]
 1300 00d2 9BB2     		uxth	r3, r3
 1301 00d4 23F48043 		bic	r3, r3, #16384
 1302 00d8 23F07003 		bic	r3, r3, #112
 1303              	.LVL142:
 1304 00dc 83F44053 		eor	r3, r3, #12288
 1305              	.LVL143:
 1306 00e0 2360     		str	r3, [r4]
 1307              	.LVL144:
 1308              	.L110:
 1309              	.LBE9:
 310:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return USB_SUCCESS;
 1310              		.loc 1 310 0
 1311 00e2 0C4B     		ldr	r3, .L120+12
 1312 00e4 1B68     		ldr	r3, [r3]
 1313 00e6 5B69     		ldr	r3, [r3, #20]
 1314 00e8 9847     		blx	r3
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 40


 1315              	.LVL145:
 311:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1316              		.loc 1 311 0
 1317 00ea 0020     		movs	r0, #0
 1318 00ec 10BD     		pop	{r4, pc}
 1319              	.LVL146:
 1320              	.L112:
 1321              	.LCFI11:
 1322              		.cfi_def_cfa_offset 0
 1323              		.cfi_restore 4
 1324              		.cfi_restore 14
 1325              	.LBE10:
 314:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1326              		.loc 1 314 0
 1327 00ee 0220     		movs	r0, #2
 315:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1328              		.loc 1 315 0
 1329 00f0 7047     		bx	lr
 1330              	.LVL147:
 1331              	.L113:
 1332              	.LBB11:
 257:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1333              		.loc 1 257 0
 1334 00f2 0220     		movs	r0, #2
 1335 00f4 7047     		bx	lr
 1336              	.L114:
 1337 00f6 0220     		movs	r0, #2
 1338 00f8 7047     		bx	lr
 1339              	.LVL148:
 1340              	.L115:
 1341              	.LCFI12:
 1342              		.cfi_def_cfa_offset 8
 1343              		.cfi_offset 4, -8
 1344              		.cfi_offset 14, -4
 279:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1345              		.loc 1 279 0
 1346 00fa 0220     		movs	r0, #2
 1347              	.LVL149:
 1348 00fc 10BD     		pop	{r4, pc}
 1349              	.LVL150:
 1350              	.L116:
 1351 00fe 0220     		movs	r0, #2
 1352              	.LVL151:
 1353 0100 10BD     		pop	{r4, pc}
 1354              	.LVL152:
 1355              	.L117:
 1356 0102 0220     		movs	r0, #2
 1357              	.LVL153:
 1358              	.LBE11:
 315:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1359              		.loc 1 315 0
 1360 0104 10BD     		pop	{r4, pc}
 1361              	.L121:
 1362 0106 00BF     		.align	2
 1363              	.L120:
 1364 0108 00000000 		.word	pInformation
 1365 010c 00000000 		.word	Device_Table
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 41


 1366 0110 00000000 		.word	Device_Property
 1367 0114 00000000 		.word	pUser_Standard_Requests
 1368              		.cfi_endproc
 1369              	.LFE32:
 1371              		.section	.text.Standard_SetEndPointFeature,"ax",%progbits
 1372              		.align	2
 1373              		.global	Standard_SetEndPointFeature
 1374              		.thumb
 1375              		.thumb_func
 1377              	Standard_SetEndPointFeature:
 1378              	.LFB33:
 326:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t    wIndex0;
 1379              		.loc 1 326 0
 1380              		.cfi_startproc
 1381              		@ args = 0, pretend = 0, frame = 0
 1382              		@ frame_needed = 0, uses_anonymous_args = 0
 1383 0000 10B5     		push	{r4, lr}
 1384              	.LCFI13:
 1385              		.cfi_def_cfa_offset 8
 1386              		.cfi_offset 4, -8
 1387              		.cfi_offset 14, -4
 332:STM32_USB-FS-Device_Driver/src/usb_core.c ****   rEP = wIndex0 & ~0x80;
 1388              		.loc 1 332 0
 1389 0002 284B     		ldr	r3, .L133
 1390 0004 1868     		ldr	r0, [r3]
 1391 0006 4179     		ldrb	r1, [r0, #5]	@ zero_extendqisi2
 1392              	.LVL154:
 333:STM32_USB-FS-Device_Driver/src/usb_core.c ****   Related_Endpoint = ENDP0 + rEP;
 1393              		.loc 1 333 0
 1394 0008 21F08002 		bic	r2, r1, #128
 1395              	.LVL155:
 336:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1396              		.loc 1 336 0
 1397 000c 11F0800F 		tst	r1, #128
 1398 0010 08D0     		beq	.L123
 340:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1399              		.loc 1 340 0
 1400 0012 9300     		lsls	r3, r2, #2
 1401 0014 03F18043 		add	r3, r3, #1073741824
 1402 0018 03F5B843 		add	r3, r3, #23552
 1403 001c 1B68     		ldr	r3, [r3]
 1404 001e 03F03003 		and	r3, r3, #48
 1405              	.LVL156:
 1406 0022 07E0     		b	.L124
 1407              	.LVL157:
 1408              	.L123:
 344:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1409              		.loc 1 344 0
 1410 0024 9300     		lsls	r3, r2, #2
 1411 0026 03F18043 		add	r3, r3, #1073741824
 1412 002a 03F5B843 		add	r3, r3, #23552
 1413 002e 1B68     		ldr	r3, [r3]
 1414 0030 03F44053 		and	r3, r3, #12288
 1415              	.LVL158:
 1416              	.L124:
 347:STM32_USB-FS-Device_Driver/src/usb_core.c ****       || pInformation->USBwValue != 0 || Status == 0
 1417              		.loc 1 347 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 42


 1418 0034 1C4C     		ldr	r4, .L133+4
 1419 0036 2478     		ldrb	r4, [r4]	@ zero_extendqisi2
 1420 0038 A242     		cmp	r2, r4
 1421 003a 2AD2     		bcs	.L128
 348:STM32_USB-FS-Device_Driver/src/usb_core.c ****       || pInformation->Current_Configuration == 0)
 1422              		.loc 1 348 0
 1423 003c 4488     		ldrh	r4, [r0, #2]
 1424 003e 54BB     		cbnz	r4, .L129
 348:STM32_USB-FS-Device_Driver/src/usb_core.c ****       || pInformation->Current_Configuration == 0)
 1425              		.loc 1 348 0 is_stmt 0 discriminator 1
 1426 0040 5BB3     		cbz	r3, .L130
 349:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1427              		.loc 1 349 0 is_stmt 1
 1428 0042 837A     		ldrb	r3, [r0, #10]	@ zero_extendqisi2
 1429              	.LVL159:
 1430 0044 5BB3     		cbz	r3, .L131
 355:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1431              		.loc 1 355 0
 1432 0046 11F0800F 		tst	r1, #128
 1433 004a 0ED0     		beq	.L126
 1434              	.LBB12:
 358:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1435              		.loc 1 358 0
 1436 004c 9300     		lsls	r3, r2, #2
 1437 004e 03F18043 		add	r3, r3, #1073741824
 1438 0052 03F5B843 		add	r3, r3, #23552
 1439 0056 1A68     		ldr	r2, [r3]
 1440              	.LVL160:
 1441 0058 92B2     		uxth	r2, r2
 1442 005a 22F4E042 		bic	r2, r2, #28672
 1443 005e 22F04002 		bic	r2, r2, #64
 1444              	.LVL161:
 1445 0062 82F01002 		eor	r2, r2, #16
 1446              	.LVL162:
 1447 0066 1A60     		str	r2, [r3]
 1448              	.LBE12:
 1449 0068 0DE0     		b	.L127
 1450              	.LVL163:
 1451              	.L126:
 1452              	.LBB13:
 364:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1453              		.loc 1 364 0
 1454 006a 9300     		lsls	r3, r2, #2
 1455 006c 03F18043 		add	r3, r3, #1073741824
 1456 0070 03F5B843 		add	r3, r3, #23552
 1457 0074 1A68     		ldr	r2, [r3]
 1458              	.LVL164:
 1459 0076 92B2     		uxth	r2, r2
 1460 0078 22F48042 		bic	r2, r2, #16384
 1461 007c 22F07002 		bic	r2, r2, #112
 1462              	.LVL165:
 1463 0080 82F48052 		eor	r2, r2, #4096
 1464              	.LVL166:
 1465 0084 1A60     		str	r2, [r3]
 1466              	.LVL167:
 1467              	.L127:
 1468              	.LBE13:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 43


 367:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_SUCCESS;
 1469              		.loc 1 367 0
 1470 0086 094B     		ldr	r3, .L133+8
 1471 0088 1B68     		ldr	r3, [r3]
 1472 008a 9B69     		ldr	r3, [r3, #24]
 1473 008c 9847     		blx	r3
 1474              	.LVL168:
 368:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1475              		.loc 1 368 0
 1476 008e 0020     		movs	r0, #0
 1477 0090 10BD     		pop	{r4, pc}
 1478              	.LVL169:
 1479              	.L128:
 351:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1480              		.loc 1 351 0
 1481 0092 0220     		movs	r0, #2
 1482 0094 10BD     		pop	{r4, pc}
 1483              	.L129:
 1484 0096 0220     		movs	r0, #2
 1485 0098 10BD     		pop	{r4, pc}
 1486              	.L130:
 1487 009a 0220     		movs	r0, #2
 1488 009c 10BD     		pop	{r4, pc}
 1489              	.LVL170:
 1490              	.L131:
 1491 009e 0220     		movs	r0, #2
 369:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1492              		.loc 1 369 0
 1493 00a0 10BD     		pop	{r4, pc}
 1494              	.L134:
 1495 00a2 00BF     		.align	2
 1496              	.L133:
 1497 00a4 00000000 		.word	pInformation
 1498 00a8 00000000 		.word	Device_Table
 1499 00ac 00000000 		.word	pUser_Standard_Requests
 1500              		.cfi_endproc
 1501              	.LFE33:
 1503              		.section	.text.Standard_SetDeviceFeature,"ax",%progbits
 1504              		.align	2
 1505              		.global	Standard_SetDeviceFeature
 1506              		.thumb
 1507              		.thumb_func
 1509              	Standard_SetDeviceFeature:
 1510              	.LFB34:
 380:STM32_USB-FS-Device_Driver/src/usb_core.c ****   SetBit(pInformation->Current_Feature, 5);
 1511              		.loc 1 380 0
 1512              		.cfi_startproc
 1513              		@ args = 0, pretend = 0, frame = 0
 1514              		@ frame_needed = 0, uses_anonymous_args = 0
 1515 0000 08B5     		push	{r3, lr}
 1516              	.LCFI14:
 1517              		.cfi_def_cfa_offset 8
 1518              		.cfi_offset 3, -8
 1519              		.cfi_offset 14, -4
 381:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pUser_Standard_Requests->User_SetDeviceFeature();
 1520              		.loc 1 381 0
 1521 0002 064B     		ldr	r3, .L137
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 44


 1522 0004 1A68     		ldr	r2, [r3]
 1523 0006 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 1524 0008 43F02003 		orr	r3, r3, #32
 1525 000c 5372     		strb	r3, [r2, #9]
 382:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return USB_SUCCESS;
 1526              		.loc 1 382 0
 1527 000e 044B     		ldr	r3, .L137+4
 1528 0010 1B68     		ldr	r3, [r3]
 1529 0012 DB69     		ldr	r3, [r3, #28]
 1530 0014 9847     		blx	r3
 1531              	.LVL171:
 384:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1532              		.loc 1 384 0
 1533 0016 0020     		movs	r0, #0
 1534 0018 08BD     		pop	{r3, pc}
 1535              	.L138:
 1536 001a 00BF     		.align	2
 1537              	.L137:
 1538 001c 00000000 		.word	pInformation
 1539 0020 00000000 		.word	pUser_Standard_Requests
 1540              		.cfi_endproc
 1541              	.LFE34:
 1543              		.section	.text.NoData_Setup0,"ax",%progbits
 1544              		.align	2
 1545              		.thumb
 1546              		.thumb_func
 1548              	NoData_Setup0:
 1549              	.LFB38:
 543:STM32_USB-FS-Device_Driver/src/usb_core.c ****   RESULT Result = USB_UNSUPPORT;
 1550              		.loc 1 543 0
 1551              		.cfi_startproc
 1552              		@ args = 0, pretend = 0, frame = 0
 1553              		@ frame_needed = 0, uses_anonymous_args = 0
 1554 0000 10B5     		push	{r4, lr}
 1555              	.LCFI15:
 1556              		.cfi_def_cfa_offset 8
 1557              		.cfi_offset 4, -8
 1558              		.cfi_offset 14, -4
 1559              	.LVL172:
 545:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState;
 1560              		.loc 1 545 0
 1561 0002 424B     		ldr	r3, .L166
 1562 0004 1A68     		ldr	r2, [r3]
 1563 0006 5478     		ldrb	r4, [r2, #1]	@ zero_extendqisi2
 1564              	.LVL173:
 548:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1565              		.loc 1 548 0
 1566 0008 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1567 000a 13F07F03 		ands	r3, r3, #127
 1568 000e 31D1     		bne	.L140
 552:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1569              		.loc 1 552 0
 1570 0010 092C     		cmp	r4, #9
 1571 0012 02D1     		bne	.L141
 554:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1572              		.loc 1 554 0
 1573 0014 FFF7FEFF 		bl	Standard_SetConfiguration
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 45


 1574              	.LVL174:
 1575 0018 52E0     		b	.L142
 1576              	.LVL175:
 1577              	.L141:
 558:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1578              		.loc 1 558 0
 1579 001a 052C     		cmp	r4, #5
 1580 001c 0ED1     		bne	.L143
 560:STM32_USB-FS-Device_Driver/src/usb_core.c ****           || (pInformation->USBwIndex != 0)
 1581              		.loc 1 560 0
 1582 001e 92F90330 		ldrsb	r3, [r2, #3]
 1583 0022 002B     		cmp	r3, #0
 1584 0024 62DB     		blt	.L149
 560:STM32_USB-FS-Device_Driver/src/usb_core.c ****           || (pInformation->USBwIndex != 0)
 1585              		.loc 1 560 0 is_stmt 0 discriminator 1
 1586 0026 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 1587 0028 002B     		cmp	r3, #0
 1588 002a 61D1     		bne	.L150
 561:STM32_USB-FS-Device_Driver/src/usb_core.c ****           || (pInformation->Current_Configuration != 0))
 1589              		.loc 1 561 0 is_stmt 1
 1590 002c 9388     		ldrh	r3, [r2, #4]
 1591 002e 002B     		cmp	r3, #0
 1592 0030 60D1     		bne	.L151
 562:STM32_USB-FS-Device_Driver/src/usb_core.c ****         /* Device Address should be 127 or less*/
 1593              		.loc 1 562 0
 1594 0032 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 1595 0034 002B     		cmp	r3, #0
 1596 0036 5FD1     		bne	.L152
 570:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1597              		.loc 1 570 0
 1598 0038 0020     		movs	r0, #0
 1599 003a 41E0     		b	.L142
 1600              	.L143:
 574:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1601              		.loc 1 574 0
 1602 003c 032C     		cmp	r4, #3
 1603 003e 0BD1     		bne	.L145
 576:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (pInformation->USBwIndex == 0)
 1604              		.loc 1 576 0
 1605 0040 D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 1606 0042 012B     		cmp	r3, #1
 1607 0044 29D1     		bne	.L153
 577:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && (ValBit(pInformation->Current_Feature, 5)))
 1608              		.loc 1 577 0
 1609 0046 9388     		ldrh	r3, [r2, #4]
 1610 0048 4BBB     		cbnz	r3, .L154
 578:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 1611              		.loc 1 578 0
 1612 004a 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 1613 004c 13F0200F 		tst	r3, #32
 1614 0050 27D0     		beq	.L155
 580:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1615              		.loc 1 580 0
 1616 0052 FFF7FEFF 		bl	Standard_SetDeviceFeature
 1617              	.LVL176:
 1618 0056 33E0     		b	.L142
 1619              	.LVL177:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 46


 1620              	.L145:
 588:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1621              		.loc 1 588 0
 1622 0058 012C     		cmp	r4, #1
 1623 005a 24D1     		bne	.L156
 590:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && pInformation->USBwIndex == 0
 1624              		.loc 1 590 0
 1625 005c D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 1626 005e 012B     		cmp	r3, #1
 1627 0060 23D1     		bne	.L157
 591:STM32_USB-FS-Device_Driver/src/usb_core.c ****           && ValBit(pInformation->Current_Feature, 5))
 1628              		.loc 1 591 0
 1629 0062 9388     		ldrh	r3, [r2, #4]
 1630 0064 1BBB     		cbnz	r3, .L158
 592:STM32_USB-FS-Device_Driver/src/usb_core.c ****       {
 1631              		.loc 1 592 0
 1632 0066 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 1633 0068 13F0200F 		tst	r3, #32
 1634 006c 21D0     		beq	.L159
 594:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1635              		.loc 1 594 0
 1636 006e FFF7FEFF 		bl	Standard_ClearFeature
 1637              	.LVL178:
 1638 0072 25E0     		b	.L142
 1639              	.LVL179:
 1640              	.L140:
 605:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1641              		.loc 1 605 0
 1642 0074 012B     		cmp	r3, #1
 1643 0076 04D1     		bne	.L146
 608:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1644              		.loc 1 608 0
 1645 0078 0B2C     		cmp	r4, #11
 1646 007a 1CD1     		bne	.L160
 610:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1647              		.loc 1 610 0
 1648 007c FFF7FEFF 		bl	Standard_SetInterface
 1649              	.LVL180:
 1650 0080 1EE0     		b	.L142
 1651              	.LVL181:
 1652              	.L146:
 615:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1653              		.loc 1 615 0
 1654 0082 022B     		cmp	r3, #2
 1655 0084 19D1     		bne	.L161
 618:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1656              		.loc 1 618 0
 1657 0086 012C     		cmp	r4, #1
 1658 0088 02D1     		bne	.L147
 620:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1659              		.loc 1 620 0
 1660 008a FFF7FEFF 		bl	Standard_ClearFeature
 1661              	.LVL182:
 1662 008e 17E0     		b	.L142
 1663              	.LVL183:
 1664              	.L147:
 623:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 47


 1665              		.loc 1 623 0
 1666 0090 032C     		cmp	r4, #3
 1667 0092 14D1     		bne	.L162
 625:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 1668              		.loc 1 625 0
 1669 0094 FFF7FEFF 		bl	Standard_SetEndPointFeature
 1670              	.LVL184:
 1671 0098 12E0     		b	.L142
 1672              	.LVL185:
 1673              	.L153:
 584:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1674              		.loc 1 584 0
 1675 009a 0220     		movs	r0, #2
 1676 009c 10E0     		b	.L142
 1677              	.L154:
 1678 009e 0220     		movs	r0, #2
 1679 00a0 0EE0     		b	.L142
 1680              	.L155:
 1681 00a2 0220     		movs	r0, #2
 1682 00a4 0CE0     		b	.L142
 1683              	.L156:
 544:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t RequestNo = pInformation->USBbRequest;
 1684              		.loc 1 544 0
 1685 00a6 0220     		movs	r0, #2
 1686 00a8 0AE0     		b	.L142
 1687              	.L157:
 598:STM32_USB-FS-Device_Driver/src/usb_core.c ****       }
 1688              		.loc 1 598 0
 1689 00aa 0220     		movs	r0, #2
 1690 00ac 08E0     		b	.L142
 1691              	.L158:
 1692 00ae 0220     		movs	r0, #2
 1693 00b0 06E0     		b	.L142
 1694              	.L159:
 1695 00b2 0220     		movs	r0, #2
 1696 00b4 04E0     		b	.L142
 1697              	.L160:
 544:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t RequestNo = pInformation->USBbRequest;
 1698              		.loc 1 544 0
 1699 00b6 0220     		movs	r0, #2
 1700 00b8 02E0     		b	.L142
 1701              	.L161:
 630:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1702              		.loc 1 630 0
 1703 00ba 0220     		movs	r0, #2
 1704 00bc 00E0     		b	.L142
 1705              	.L162:
 544:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t RequestNo = pInformation->USBbRequest;
 1706              		.loc 1 544 0
 1707 00be 0220     		movs	r0, #2
 1708              	.LVL186:
 1709              	.L142:
 634:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1710              		.loc 1 634 0
 1711 00c0 30B1     		cbz	r0, .L148
 636:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if (Result == USB_NOT_READY)
 1712              		.loc 1 636 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 48


 1713 00c2 134B     		ldr	r3, .L166+4
 1714 00c4 1B68     		ldr	r3, [r3]
 1715 00c6 5B69     		ldr	r3, [r3, #20]
 1716 00c8 2046     		mov	r0, r4
 1717              	.LVL187:
 1718 00ca 9847     		blx	r3
 1719              	.LVL188:
 637:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 1720              		.loc 1 637 0
 1721 00cc 0328     		cmp	r0, #3
 1722 00ce 15D0     		beq	.L163
 1723              	.L148:
 644:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1724              		.loc 1 644 0
 1725 00d0 B0B9     		cbnz	r0, .L164
 1726              	.LVL189:
 652:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1727              		.loc 1 652 0
 1728 00d2 104B     		ldr	r3, .L166+8
 1729 00d4 1A68     		ldr	r2, [r3]
 1730 00d6 92B2     		uxth	r2, r2
 1731 00d8 0F4B     		ldr	r3, .L166+12
 1732 00da 1344     		add	r3, r3, r2
 1733 00dc 5B00     		lsls	r3, r3, #1
 1734 00de 0022     		movs	r2, #0
 1735 00e0 1A60     		str	r2, [r3]
 1736 00e2 3022     		movs	r2, #48
 1737 00e4 0D4B     		ldr	r3, .L166+16
 1738 00e6 1A80     		strh	r2, [r3]	@ movhi
 650:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1739              		.loc 1 650 0
 1740 00e8 0622     		movs	r2, #6
 1741 00ea 0AE0     		b	.L144
 1742              	.LVL190:
 1743              	.L149:
 565:STM32_USB-FS-Device_Driver/src/usb_core.c ****         goto exit_NoData_Setup0;
 1744              		.loc 1 565 0
 1745 00ec 0822     		movs	r2, #8
 1746 00ee 08E0     		b	.L144
 1747              	.L150:
 1748 00f0 0822     		movs	r2, #8
 1749 00f2 06E0     		b	.L144
 1750              	.L151:
 1751 00f4 0822     		movs	r2, #8
 1752 00f6 04E0     		b	.L144
 1753              	.L152:
 1754 00f8 0822     		movs	r2, #8
 1755 00fa 02E0     		b	.L144
 1756              	.LVL191:
 1757              	.L163:
 639:STM32_USB-FS-Device_Driver/src/usb_core.c ****       goto exit_NoData_Setup0;
 1758              		.loc 1 639 0
 1759 00fc 0922     		movs	r2, #9
 1760 00fe 00E0     		b	.L144
 1761              	.L164:
 646:STM32_USB-FS-Device_Driver/src/usb_core.c ****     goto exit_NoData_Setup0;
 1762              		.loc 1 646 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 49


 1763 0100 0822     		movs	r2, #8
 1764              	.LVL192:
 1765              	.L144:
 655:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return;
 1766              		.loc 1 655 0
 1767 0102 024B     		ldr	r3, .L166
 1768 0104 1B68     		ldr	r3, [r3]
 1769 0106 1A72     		strb	r2, [r3, #8]
 1770 0108 10BD     		pop	{r4, pc}
 1771              	.LVL193:
 1772              	.L167:
 1773 010a 00BF     		.align	2
 1774              	.L166:
 1775 010c 00000000 		.word	pInformation
 1776 0110 00000000 		.word	pProperty
 1777 0114 505C0040 		.word	1073765456
 1778 0118 02300020 		.word	536883202
 1779 011c 00000000 		.word	SaveTState
 1780              		.cfi_endproc
 1781              	.LFE38:
 1783              		.section	.text.Standard_GetDescriptorData,"ax",%progbits
 1784              		.align	2
 1785              		.global	Standard_GetDescriptorData
 1786              		.thumb
 1787              		.thumb_func
 1789              	Standard_GetDescriptorData:
 1790              	.LFB35:
 406:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t  wOffset;
 1791              		.loc 1 406 0
 1792              		.cfi_startproc
 1793              		@ args = 0, pretend = 0, frame = 0
 1794              		@ frame_needed = 0, uses_anonymous_args = 0
 1795              		@ link register save eliminated.
 1796              	.LVL194:
 409:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (Length == 0)
 1797              		.loc 1 409 0
 1798 0000 054B     		ldr	r3, .L171
 1799 0002 1A68     		ldr	r2, [r3]
 1800 0004 538A     		ldrh	r3, [r2, #18]
 1801              	.LVL195:
 410:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1802              		.loc 1 410 0
 1803 0006 20B9     		cbnz	r0, .L169
 412:STM32_USB-FS-Device_Driver/src/usb_core.c ****     return 0;
 1804              		.loc 1 412 0
 1805 0008 8888     		ldrh	r0, [r1, #4]
 1806              	.LVL196:
 1807 000a C31A     		subs	r3, r0, r3
 1808              	.LVL197:
 1809 000c 1382     		strh	r3, [r2, #16]	@ movhi
 413:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1810              		.loc 1 413 0
 1811 000e 0020     		movs	r0, #0
 1812 0010 7047     		bx	lr
 1813              	.LVL198:
 1814              	.L169:
 416:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 50


 1815              		.loc 1 416 0
 1816 0012 0868     		ldr	r0, [r1]
 1817              	.LVL199:
 1818 0014 1844     		add	r0, r0, r3
 417:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1819              		.loc 1 417 0
 1820 0016 7047     		bx	lr
 1821              	.L172:
 1822              		.align	2
 1823              	.L171:
 1824 0018 00000000 		.word	pInformation
 1825              		.cfi_endproc
 1826              	.LFE35:
 1828              		.section	.text.Post0_Process,"ax",%progbits
 1829              		.align	2
 1830              		.global	Post0_Process
 1831              		.thumb
 1832              		.thumb_func
 1834              	Post0_Process:
 1835              	.LFB43:
 836:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 837:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 838:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Setup0_Process
 839:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Get the device request data and dispatch to individual process.
 840:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 841:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 842:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Post0_Process.
 843:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 844:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t Setup0_Process(void)
 845:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 846:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 847:STM32_USB-FS-Device_Driver/src/usb_core.c ****   union
 848:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 849:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint8_t* b;
 850:STM32_USB-FS-Device_Driver/src/usb_core.c ****     uint16_t* w;
 851:STM32_USB-FS-Device_Driver/src/usb_core.c ****   } pBuf;
 852:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 853:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pBuf.b = PMAAddr + (uint8_t *)(_GetEPRxAddr(ENDP0) * 2); /* *2 for 32 bits addr */
 854:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 855:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->ControlState != PAUSE)
 856:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 857:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBbmRequestType = *pBuf.b++; /* bmRequestType */
 858:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBbRequest = *pBuf.b++; /* bRequest */
 859:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 860:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBwValue = ByteSwap(*pBuf.w++); /* wValue */
 861:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 862:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBwIndex  = ByteSwap(*pBuf.w++); /* wIndex */
 863:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 864:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBwLength = *pBuf.w; /* wLength */
 865:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 866:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 867:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pInformation->ControlState = SETTING_UP;
 868:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->USBwLength == 0)
 869:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 870:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Setup with no data stage */
 871:STM32_USB-FS-Device_Driver/src/usb_core.c ****     NoData_Setup0();
 872:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 51


 873:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 874:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 875:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* Setup with data stage */
 876:STM32_USB-FS-Device_Driver/src/usb_core.c ****     Data_Setup0();
 877:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 878:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return Post0_Process();
 879:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 880:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 881:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 882:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : In0_Process
 883:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Process the IN token on all default endpoint.
 884:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 885:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 886:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Post0_Process.
 887:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 888:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t In0_Process(void)
 889:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 890:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState = pInformation->ControlState;
 891:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 892:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if ((ControlState == IN_DATA) || (ControlState == LAST_IN_DATA))
 893:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 894:STM32_USB-FS-Device_Driver/src/usb_core.c ****     DataStageIn();
 895:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* ControlState may be changed outside the function */
 896:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = pInformation->ControlState;
 897:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 898:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 899:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (ControlState == WAIT_STATUS_IN)
 900:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 901:STM32_USB-FS-Device_Driver/src/usb_core.c ****     if ((pInformation->USBbRequest == SET_ADDRESS) &&
 902:STM32_USB-FS-Device_Driver/src/usb_core.c ****         (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT)))
 903:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 904:STM32_USB-FS-Device_Driver/src/usb_core.c ****       SetDeviceAddress(pInformation->USBwValue0);
 905:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pUser_Standard_Requests->User_SetDeviceAddress();
 906:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 907:STM32_USB-FS-Device_Driver/src/usb_core.c ****     (*pProperty->Process_Status_IN)();
 908:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 909:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 910:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 911:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 912:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 913:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 914:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 915:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 916:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pInformation->ControlState = ControlState;
 917:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 918:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return Post0_Process();
 919:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 920:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 921:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 922:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Out0_Process
 923:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Process the OUT token on all default endpoint.
 924:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 925:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 926:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : Post0_Process.
 927:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 928:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t Out0_Process(void)
 929:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 52


 930:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState = pInformation->ControlState;
 931:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 932:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if ((ControlState == OUT_DATA) || (ControlState == LAST_OUT_DATA))
 933:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 934:STM32_USB-FS-Device_Driver/src/usb_core.c ****     DataStageOut();
 935:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = pInformation->ControlState; /* may be changed outside the function */
 936:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 937:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 938:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if (ControlState == WAIT_STATUS_OUT)
 939:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 940:STM32_USB-FS-Device_Driver/src/usb_core.c ****     (*pProperty->Process_Status_OUT)();
 941:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 942:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 943:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 944:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else if ((ControlState == IN_DATA) || (ControlState == LAST_IN_DATA))
 945:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 946:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* host aborts the transfer before finish */
 947:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 948:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 949:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 950:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* Unexpect state, STALL the endpoint */
 951:STM32_USB-FS-Device_Driver/src/usb_core.c ****   else
 952:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 953:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 954:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 955:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 956:STM32_USB-FS-Device_Driver/src/usb_core.c ****   pInformation->ControlState = ControlState;
 957:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 958:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return Post0_Process();
 959:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 960:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 961:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 962:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : Post0_Process
 963:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Stall the Endpoint 0 in case of error.
 964:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
 965:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 966:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : - 0 if the control State is in PAUSE
 967:STM32_USB-FS-Device_Driver/src/usb_core.c **** *                  - 1 if not.
 968:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 969:STM32_USB-FS-Device_Driver/src/usb_core.c **** uint8_t Post0_Process(void)
 970:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 1836              		.loc 1 970 0
 1837              		.cfi_startproc
 1838              		@ args = 0, pretend = 0, frame = 0
 1839              		@ frame_needed = 0, uses_anonymous_args = 0
 1840 0000 08B5     		push	{r3, lr}
 1841              	.LCFI16:
 1842              		.cfi_def_cfa_offset 8
 1843              		.cfi_offset 3, -8
 1844              		.cfi_offset 14, -4
 971:STM32_USB-FS-Device_Driver/src/usb_core.c ****   SetEPRxCount(ENDP0, Device_Property.MaxPacketSize);
 1845              		.loc 1 971 0
 1846 0002 0B4B     		ldr	r3, .L176
 1847 0004 93F82C10 		ldrb	r1, [r3, #44]	@ zero_extendqisi2
 1848 0008 0020     		movs	r0, #0
 1849 000a FFF7FEFF 		bl	SetEPRxCount
 1850              	.LVL200:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 53


 972:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 973:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->ControlState == STALLED)
 1851              		.loc 1 973 0
 1852 000e 094B     		ldr	r3, .L176+4
 1853 0010 1B68     		ldr	r3, [r3]
 1854 0012 187A     		ldrb	r0, [r3, #8]	@ zero_extendqisi2
 1855 0014 0828     		cmp	r0, #8
 1856 0016 06D1     		bne	.L174
 974:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 975:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPRxStatus(EP_RX_STALL);
 1857              		.loc 1 975 0
 1858 0018 4FF48052 		mov	r2, #4096
 1859 001c 064B     		ldr	r3, .L176+8
 1860 001e 1A80     		strh	r2, [r3]	@ movhi
 976:STM32_USB-FS-Device_Driver/src/usb_core.c ****     vSetEPTxStatus(EP_TX_STALL);
 1861              		.loc 1 976 0
 1862 0020 1022     		movs	r2, #16
 1863 0022 064B     		ldr	r3, .L176+12
 1864 0024 1A80     		strh	r2, [r3]	@ movhi
 1865              	.L174:
 977:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 978:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 979:STM32_USB-FS-Device_Driver/src/usb_core.c ****   return (pInformation->ControlState == PAUSE);
 980:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1866              		.loc 1 980 0
 1867 0026 0928     		cmp	r0, #9
 1868 0028 14BF     		ite	ne
 1869 002a 0020     		movne	r0, #0
 1870 002c 0120     		moveq	r0, #1
 1871 002e 08BD     		pop	{r3, pc}
 1872              	.L177:
 1873              		.align	2
 1874              	.L176:
 1875 0030 00000000 		.word	Device_Property
 1876 0034 00000000 		.word	pInformation
 1877 0038 00000000 		.word	SaveRState
 1878 003c 00000000 		.word	SaveTState
 1879              		.cfi_endproc
 1880              	.LFE43:
 1882              		.section	.text.Setup0_Process,"ax",%progbits
 1883              		.align	2
 1884              		.global	Setup0_Process
 1885              		.thumb
 1886              		.thumb_func
 1888              	Setup0_Process:
 1889              	.LFB40:
 845:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1890              		.loc 1 845 0
 1891              		.cfi_startproc
 1892              		@ args = 0, pretend = 0, frame = 0
 1893              		@ frame_needed = 0, uses_anonymous_args = 0
 1894 0000 70B5     		push	{r4, r5, r6, lr}
 1895              	.LCFI17:
 1896              		.cfi_def_cfa_offset 16
 1897              		.cfi_offset 4, -16
 1898              		.cfi_offset 5, -12
 1899              		.cfi_offset 6, -8
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 54


 1900              		.cfi_offset 14, -4
 853:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1901              		.loc 1 853 0
 1902 0002 1B4B     		ldr	r3, .L183
 1903 0004 1A68     		ldr	r2, [r3]
 1904 0006 92B2     		uxth	r2, r2
 1905 0008 1A4B     		ldr	r3, .L183+4
 1906 000a 1344     		add	r3, r3, r2
 1907 000c 5B00     		lsls	r3, r3, #1
 1908 000e 1B88     		ldrh	r3, [r3]
 855:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1909              		.loc 1 855 0
 1910 0010 194A     		ldr	r2, .L183+8
 1911 0012 1268     		ldr	r2, [r2]
 1912 0014 117A     		ldrb	r1, [r2, #8]	@ zero_extendqisi2
 1913 0016 0929     		cmp	r1, #9
 1914 0018 1BD0     		beq	.L179
 1915 001a 5B00     		lsls	r3, r3, #1
 1916 001c 03F18043 		add	r3, r3, #1073741824
 1917 0020 03F5C043 		add	r3, r3, #24576
 857:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pInformation->USBbRequest = *pBuf.b++; /* bRequest */
 1918              		.loc 1 857 0
 1919 0024 5D1C     		adds	r5, r3, #1
 1920 0026 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 1921 0028 1170     		strb	r1, [r2]
 858:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 1922              		.loc 1 858 0
 1923 002a 134C     		ldr	r4, .L183+8
 1924 002c 2268     		ldr	r2, [r4]
 1925 002e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1926 0030 5370     		strb	r3, [r2, #1]
 860:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 1927              		.loc 1 860 0
 1928 0032 2668     		ldr	r6, [r4]
 1929 0034 B5F80300 		ldrh	r0, [r5, #3]
 1930 0038 FFF7FEFF 		bl	ByteSwap
 1931              	.LVL201:
 1932 003c 7080     		strh	r0, [r6, #2]	@ movhi
 862:STM32_USB-FS-Device_Driver/src/usb_core.c ****     pBuf.w++;  /* word not accessed because of 32 bits addressing */
 1933              		.loc 1 862 0
 1934 003e 2668     		ldr	r6, [r4]
 1935 0040 B5F80700 		ldrh	r0, [r5, #7]
 1936 0044 FFF7FEFF 		bl	ByteSwap
 1937              	.LVL202:
 1938 0048 B080     		strh	r0, [r6, #4]	@ movhi
 864:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1939              		.loc 1 864 0
 1940 004a 2368     		ldr	r3, [r4]
 1941 004c B5F80B20 		ldrh	r2, [r5, #11]
 1942 0050 DA80     		strh	r2, [r3, #6]	@ movhi
 1943              	.L179:
 867:STM32_USB-FS-Device_Driver/src/usb_core.c ****   if (pInformation->USBwLength == 0)
 1944              		.loc 1 867 0
 1945 0052 094B     		ldr	r3, .L183+8
 1946 0054 1B68     		ldr	r3, [r3]
 1947 0056 0122     		movs	r2, #1
 1948 0058 1A72     		strb	r2, [r3, #8]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 55


 868:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1949              		.loc 1 868 0
 1950 005a DB88     		ldrh	r3, [r3, #6]
 1951 005c 13B9     		cbnz	r3, .L180
 871:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1952              		.loc 1 871 0
 1953 005e FFF7FEFF 		bl	NoData_Setup0
 1954              	.LVL203:
 1955 0062 01E0     		b	.L181
 1956              	.L180:
 876:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 1957              		.loc 1 876 0
 1958 0064 FFF7FEFF 		bl	Data_Setup0
 1959              	.LVL204:
 1960              	.L181:
 878:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 1961              		.loc 1 878 0
 1962 0068 FFF7FEFF 		bl	Post0_Process
 1963              	.LVL205:
 879:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1964              		.loc 1 879 0
 1965 006c 70BD     		pop	{r4, r5, r6, pc}
 1966              	.L184:
 1967 006e 00BF     		.align	2
 1968              	.L183:
 1969 0070 505C0040 		.word	1073765456
 1970 0074 04300020 		.word	536883204
 1971 0078 00000000 		.word	pInformation
 1972              		.cfi_endproc
 1973              	.LFE40:
 1975              		.section	.text.Out0_Process,"ax",%progbits
 1976              		.align	2
 1977              		.global	Out0_Process
 1978              		.thumb
 1979              		.thumb_func
 1981              	Out0_Process:
 1982              	.LFB42:
 929:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState = pInformation->ControlState;
 1983              		.loc 1 929 0
 1984              		.cfi_startproc
 1985              		@ args = 0, pretend = 0, frame = 0
 1986              		@ frame_needed = 0, uses_anonymous_args = 0
 1987 0000 08B5     		push	{r3, lr}
 1988              	.LCFI18:
 1989              		.cfi_def_cfa_offset 8
 1990              		.cfi_offset 3, -8
 1991              		.cfi_offset 14, -4
 930:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 1992              		.loc 1 930 0
 1993 0002 0E4B     		ldr	r3, .L191
 1994 0004 1B68     		ldr	r3, [r3]
 1995 0006 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1996              	.LVL206:
 932:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 1997              		.loc 1 932 0
 1998 0008 032B     		cmp	r3, #3
 1999 000a 01D0     		beq	.L186
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 56


 932:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2000              		.loc 1 932 0 is_stmt 0 discriminator 1
 2001 000c 052B     		cmp	r3, #5
 2002 000e 05D1     		bne	.L187
 2003              	.L186:
 934:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = pInformation->ControlState; /* may be changed outside the function */
 2004              		.loc 1 934 0 is_stmt 1
 2005 0010 FFF7FEFF 		bl	DataStageOut
 2006              	.LVL207:
 935:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2007              		.loc 1 935 0
 2008 0014 094B     		ldr	r3, .L191
 2009 0016 1B68     		ldr	r3, [r3]
 2010 0018 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 2011              	.LVL208:
 2012 001a 08E0     		b	.L188
 2013              	.LVL209:
 2014              	.L187:
 938:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2015              		.loc 1 938 0
 2016 001c 072B     		cmp	r3, #7
 2017 001e 05D1     		bne	.L189
 940:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 2018              		.loc 1 940 0
 2019 0020 074B     		ldr	r3, .L191+4
 2020              	.LVL210:
 2021 0022 1B68     		ldr	r3, [r3]
 2022 0024 DB68     		ldr	r3, [r3, #12]
 2023 0026 9847     		blx	r3
 2024              	.LVL211:
 941:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2025              		.loc 1 941 0
 2026 0028 0822     		movs	r2, #8
 2027 002a 00E0     		b	.L188
 2028              	.LVL212:
 2029              	.L189:
 947:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2030              		.loc 1 947 0
 2031 002c 0822     		movs	r2, #8
 2032              	.LVL213:
 2033              	.L188:
 956:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 2034              		.loc 1 956 0
 2035 002e 034B     		ldr	r3, .L191
 2036 0030 1B68     		ldr	r3, [r3]
 2037 0032 1A72     		strb	r2, [r3, #8]
 958:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 2038              		.loc 1 958 0
 2039 0034 FFF7FEFF 		bl	Post0_Process
 2040              	.LVL214:
 959:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 2041              		.loc 1 959 0
 2042 0038 08BD     		pop	{r3, pc}
 2043              	.L192:
 2044 003a 00BF     		.align	2
 2045              	.L191:
 2046 003c 00000000 		.word	pInformation
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 57


 2047 0040 00000000 		.word	pProperty
 2048              		.cfi_endproc
 2049              	.LFE42:
 2051              		.section	.text.SetDeviceAddress,"ax",%progbits
 2052              		.align	2
 2053              		.global	SetDeviceAddress
 2054              		.thumb
 2055              		.thumb_func
 2057              	SetDeviceAddress:
 2058              	.LFB44:
 981:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 982:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
 983:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : SetDeviceAddress.
 984:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : Set the device and all the used Endpoints addresses.
 985:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : - Val: device adress.
 986:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
 987:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
 988:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
 989:STM32_USB-FS-Device_Driver/src/usb_core.c **** void SetDeviceAddress(uint8_t Val)
 990:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 2059              		.loc 1 990 0
 2060              		.cfi_startproc
 2061              		@ args = 0, pretend = 0, frame = 0
 2062              		@ frame_needed = 0, uses_anonymous_args = 0
 2063              		@ link register save eliminated.
 2064              	.LVL215:
 2065 0000 30B4     		push	{r4, r5}
 2066              	.LCFI19:
 2067              		.cfi_def_cfa_offset 8
 2068              		.cfi_offset 4, -8
 2069              		.cfi_offset 5, -4
 991:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t i;
 992:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t nEP = Device_Table.Total_Endpoint;
 2070              		.loc 1 992 0
 2071 0002 0E4B     		ldr	r3, .L197
 2072 0004 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 2073              	.LVL216:
 993:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 994:STM32_USB-FS-Device_Driver/src/usb_core.c ****   /* set address in every used endpoint */
 995:STM32_USB-FS-Device_Driver/src/usb_core.c ****   for (i = 0; i < nEP; i++)
 2074              		.loc 1 995 0
 2075 0006 0021     		movs	r1, #0
 2076 0008 0FE0     		b	.L194
 2077              	.LVL217:
 2078              	.L195:
 2079 000a CCB2     		uxtb	r4, r1
 996:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 997:STM32_USB-FS-Device_Driver/src/usb_core.c ****     _SetEPAddress((uint8_t)i, (uint8_t)i);
 2080              		.loc 1 997 0 discriminator 3
 2081 000c A300     		lsls	r3, r4, #2
 2082 000e 03F18043 		add	r3, r3, #1073741824
 2083 0012 03F5B843 		add	r3, r3, #23552
 2084 0016 1A68     		ldr	r2, [r3]
 2085 0018 22F4E042 		bic	r2, r2, #28672
 2086 001c 22F07002 		bic	r2, r2, #112
 2087 0020 1204     		lsls	r2, r2, #16
 2088 0022 120C     		lsrs	r2, r2, #16
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 58


 2089 0024 2243     		orrs	r2, r2, r4
 2090 0026 1A60     		str	r2, [r3]
 995:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2091              		.loc 1 995 0 discriminator 3
 2092 0028 0131     		adds	r1, r1, #1
 2093              	.LVL218:
 2094              	.L194:
 995:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2095              		.loc 1 995 0 is_stmt 0 discriminator 1
 2096 002a A942     		cmp	r1, r5
 2097 002c EDD3     		bcc	.L195
 998:STM32_USB-FS-Device_Driver/src/usb_core.c ****   } /* for */
 999:STM32_USB-FS-Device_Driver/src/usb_core.c ****   _SetDADDR(Val | DADDR_EF); /* set device address and enable function */
 2098              		.loc 1 999 0 is_stmt 1
 2099 002e 40F08000 		orr	r0, r0, #128
 2100              	.LVL219:
 2101 0032 034B     		ldr	r3, .L197+4
 2102 0034 1860     		str	r0, [r3]
1000:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 2103              		.loc 1 1000 0
 2104 0036 30BC     		pop	{r4, r5}
 2105              	.LCFI20:
 2106              		.cfi_restore 5
 2107              		.cfi_restore 4
 2108              		.cfi_def_cfa_offset 0
 2109              	.LVL220:
 2110 0038 7047     		bx	lr
 2111              	.L198:
 2112 003a 00BF     		.align	2
 2113              	.L197:
 2114 003c 00000000 		.word	Device_Table
 2115 0040 4C5C0040 		.word	1073765452
 2116              		.cfi_endproc
 2117              	.LFE44:
 2119              		.section	.text.In0_Process,"ax",%progbits
 2120              		.align	2
 2121              		.global	In0_Process
 2122              		.thumb
 2123              		.thumb_func
 2125              	In0_Process:
 2126              	.LFB41:
 889:STM32_USB-FS-Device_Driver/src/usb_core.c ****   uint32_t ControlState = pInformation->ControlState;
 2127              		.loc 1 889 0
 2128              		.cfi_startproc
 2129              		@ args = 0, pretend = 0, frame = 0
 2130              		@ frame_needed = 0, uses_anonymous_args = 0
 2131 0000 08B5     		push	{r3, lr}
 2132              	.LCFI21:
 2133              		.cfi_def_cfa_offset 8
 2134              		.cfi_offset 3, -8
 2135              		.cfi_offset 14, -4
 890:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 2136              		.loc 1 890 0
 2137 0002 154B     		ldr	r3, .L206
 2138 0004 1A68     		ldr	r2, [r3]
 2139 0006 137A     		ldrb	r3, [r2, #8]	@ zero_extendqisi2
 2140              	.LVL221:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 59


 892:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2141              		.loc 1 892 0
 2142 0008 022B     		cmp	r3, #2
 2143 000a 01D0     		beq	.L200
 892:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2144              		.loc 1 892 0 is_stmt 0 discriminator 1
 2145 000c 042B     		cmp	r3, #4
 2146 000e 05D1     		bne	.L201
 2147              	.L200:
 894:STM32_USB-FS-Device_Driver/src/usb_core.c ****     /* ControlState may be changed outside the function */
 2148              		.loc 1 894 0 is_stmt 1
 2149 0010 FFF7FEFF 		bl	DataStageIn
 2150              	.LVL222:
 896:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2151              		.loc 1 896 0
 2152 0014 104B     		ldr	r3, .L206
 2153 0016 1B68     		ldr	r3, [r3]
 2154 0018 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 2155              	.LVL223:
 2156 001a 16E0     		b	.L202
 2157              	.LVL224:
 2158              	.L201:
 899:STM32_USB-FS-Device_Driver/src/usb_core.c ****   {
 2159              		.loc 1 899 0
 2160 001c 062B     		cmp	r3, #6
 2161 001e 13D1     		bne	.L204
 901:STM32_USB-FS-Device_Driver/src/usb_core.c ****         (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT)))
 2162              		.loc 1 901 0
 2163 0020 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 2164              	.LVL225:
 2165 0022 052B     		cmp	r3, #5
 2166 0024 0AD1     		bne	.L203
 902:STM32_USB-FS-Device_Driver/src/usb_core.c ****     {
 2167              		.loc 1 902 0 discriminator 1
 2168 0026 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 901:STM32_USB-FS-Device_Driver/src/usb_core.c ****         (Type_Recipient == (STANDARD_REQUEST | DEVICE_RECIPIENT)))
 2169              		.loc 1 901 0 discriminator 1
 2170 0028 13F07F0F 		tst	r3, #127
 2171 002c 06D1     		bne	.L203
 904:STM32_USB-FS-Device_Driver/src/usb_core.c ****       pUser_Standard_Requests->User_SetDeviceAddress();
 2172              		.loc 1 904 0
 2173 002e D078     		ldrb	r0, [r2, #3]	@ zero_extendqisi2
 2174 0030 FFF7FEFF 		bl	SetDeviceAddress
 2175              	.LVL226:
 905:STM32_USB-FS-Device_Driver/src/usb_core.c ****     }
 2176              		.loc 1 905 0
 2177 0034 094B     		ldr	r3, .L206+4
 2178 0036 1B68     		ldr	r3, [r3]
 2179 0038 1B6A     		ldr	r3, [r3, #32]
 2180 003a 9847     		blx	r3
 2181              	.LVL227:
 2182              	.L203:
 907:STM32_USB-FS-Device_Driver/src/usb_core.c ****     ControlState = STALLED;
 2183              		.loc 1 907 0
 2184 003c 084B     		ldr	r3, .L206+8
 2185 003e 1B68     		ldr	r3, [r3]
 2186 0040 9B68     		ldr	r3, [r3, #8]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 60


 2187 0042 9847     		blx	r3
 2188              	.LVL228:
 908:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2189              		.loc 1 908 0
 2190 0044 0822     		movs	r2, #8
 2191 0046 00E0     		b	.L202
 2192              	.LVL229:
 2193              	.L204:
 913:STM32_USB-FS-Device_Driver/src/usb_core.c ****   }
 2194              		.loc 1 913 0
 2195 0048 0822     		movs	r2, #8
 2196              	.LVL230:
 2197              	.L202:
 916:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 2198              		.loc 1 916 0
 2199 004a 034B     		ldr	r3, .L206
 2200 004c 1B68     		ldr	r3, [r3]
 2201 004e 1A72     		strb	r2, [r3, #8]
 918:STM32_USB-FS-Device_Driver/src/usb_core.c **** }
 2202              		.loc 1 918 0
 2203 0050 FFF7FEFF 		bl	Post0_Process
 2204              	.LVL231:
 919:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
 2205              		.loc 1 919 0
 2206 0054 08BD     		pop	{r3, pc}
 2207              	.L207:
 2208 0056 00BF     		.align	2
 2209              	.L206:
 2210 0058 00000000 		.word	pInformation
 2211 005c 00000000 		.word	pUser_Standard_Requests
 2212 0060 00000000 		.word	pProperty
 2213              		.cfi_endproc
 2214              	.LFE41:
 2216              		.section	.text.NOP_Process,"ax",%progbits
 2217              		.align	2
 2218              		.global	NOP_Process
 2219              		.thumb
 2220              		.thumb_func
 2222              	NOP_Process:
 2223              	.LFB45:
1001:STM32_USB-FS-Device_Driver/src/usb_core.c **** 
1002:STM32_USB-FS-Device_Driver/src/usb_core.c **** /*******************************************************************************
1003:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Function Name  : NOP_Process
1004:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Description    : No operation function.
1005:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Input          : None.
1006:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Output         : None.
1007:STM32_USB-FS-Device_Driver/src/usb_core.c **** * Return         : None.
1008:STM32_USB-FS-Device_Driver/src/usb_core.c **** *******************************************************************************/
1009:STM32_USB-FS-Device_Driver/src/usb_core.c **** void NOP_Process(void)
1010:STM32_USB-FS-Device_Driver/src/usb_core.c **** {
 2224              		.loc 1 1010 0
 2225              		.cfi_startproc
 2226              		@ args = 0, pretend = 0, frame = 0
 2227              		@ frame_needed = 0, uses_anonymous_args = 0
 2228              		@ link register save eliminated.
 2229 0000 7047     		bx	lr
 2230              		.cfi_endproc
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 61


 2231              	.LFE45:
 2233              		.global	Data_Mul_MaxPacketSize
 2234              		.comm	StatusInfo,2,4
 2235 0002 00BF     		.section	.bss.Data_Mul_MaxPacketSize,"aw",%nobits
 2236              		.set	.LANCHOR0,. + 0
 2239              	Data_Mul_MaxPacketSize:
 2240 0000 00       		.space	1
 2241              		.text
 2242              	.Letext0:
 2243              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/machine/_default_types
 2244              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/sys/_stdint.h"
 2245              		.file 4 "CMSIS/Core/CM3/stm32f10x.h"
 2246              		.file 5 "STM32_USB-FS-Device_Driver/inc/usb_def.h"
 2247              		.file 6 "STM32_USB-FS-Device_Driver/inc/usb_core.h"
 2248              		.file 7 "STM32_USB-FS-Device_Driver/inc/usb_init.h"
 2249              		.file 8 "STM32_USB-FS-Device_Driver/inc/usb_regs.h"
 2250              		.file 9 "STM32_USB-FS-Device_Driver/inc/usb_mem.h"
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 62


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb_core.c
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:20     .text.Standard_GetConfiguration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:25     .text.Standard_GetConfiguration:0000000000000000 Standard_GetConfiguration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:63     .text.Standard_GetConfiguration:0000000000000020 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:69     .text.Standard_GetInterface:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:74     .text.Standard_GetInterface:0000000000000000 Standard_GetInterface
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:111    .text.Standard_GetInterface:0000000000000020 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:117    .text.Standard_GetStatus:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:122    .text.Standard_GetStatus:0000000000000000 Standard_GetStatus
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:263    .text.Standard_GetStatus:00000000000000ac $d
                            *COM*:0000000000000002 StatusInfo
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:270    .text.DataStageIn:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:274    .text.DataStageIn:0000000000000000 DataStageIn
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:411    .text.DataStageIn:0000000000000098 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:421    .text.Data_Setup0:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:425    .text.Data_Setup0:0000000000000000 Data_Setup0
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:835    .text.Data_Setup0:00000000000001f8 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:847    .text.DataStageOut:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:851    .text.DataStageOut:0000000000000000 DataStageOut
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:979    .text.DataStageOut:0000000000000094 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:988    .text.Standard_SetConfiguration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:993    .text.Standard_SetConfiguration:0000000000000000 Standard_SetConfiguration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1045   .text.Standard_SetConfiguration:0000000000000034 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1052   .text.Standard_SetInterface:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1057   .text.Standard_SetInterface:0000000000000000 Standard_SetInterface
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1140   .text.Standard_SetInterface:0000000000000050 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1147   .text.Standard_ClearFeature:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1152   .text.Standard_ClearFeature:0000000000000000 Standard_ClearFeature
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1364   .text.Standard_ClearFeature:0000000000000108 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1372   .text.Standard_SetEndPointFeature:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1377   .text.Standard_SetEndPointFeature:0000000000000000 Standard_SetEndPointFeature
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1497   .text.Standard_SetEndPointFeature:00000000000000a4 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1504   .text.Standard_SetDeviceFeature:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1509   .text.Standard_SetDeviceFeature:0000000000000000 Standard_SetDeviceFeature
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1538   .text.Standard_SetDeviceFeature:000000000000001c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1544   .text.NoData_Setup0:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1548   .text.NoData_Setup0:0000000000000000 NoData_Setup0
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1775   .text.NoData_Setup0:000000000000010c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1784   .text.Standard_GetDescriptorData:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1789   .text.Standard_GetDescriptorData:0000000000000000 Standard_GetDescriptorData
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1824   .text.Standard_GetDescriptorData:0000000000000018 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1829   .text.Post0_Process:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1834   .text.Post0_Process:0000000000000000 Post0_Process
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1875   .text.Post0_Process:0000000000000030 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1883   .text.Setup0_Process:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1888   .text.Setup0_Process:0000000000000000 Setup0_Process
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1969   .text.Setup0_Process:0000000000000070 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1976   .text.Out0_Process:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:1981   .text.Out0_Process:0000000000000000 Out0_Process
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2046   .text.Out0_Process:000000000000003c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2052   .text.SetDeviceAddress:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2057   .text.SetDeviceAddress:0000000000000000 SetDeviceAddress
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2114   .text.SetDeviceAddress:000000000000003c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2120   .text.In0_Process:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2125   .text.In0_Process:0000000000000000 In0_Process
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2210   .text.In0_Process:0000000000000058 $d
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s 			page 63


/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2217   .text.NOP_Process:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2222   .text.NOP_Process:0000000000000000 NOP_Process
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2239   .bss.Data_Mul_MaxPacketSize:0000000000000000 Data_Mul_MaxPacketSize
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccrXMed8.s:2240   .bss.Data_Mul_MaxPacketSize:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
pInformation
pUser_Standard_Requests
GetEPTxAddr
UserToPMABufferCopy
SetEPTxCount
SaveTState
SaveRState
pProperty
Device_Table
GetEPRxAddr
PMAToUserBufferCopy
ClearDTOG_TX
SetEPTxStatus
SetEPRxCount
ClearDTOG_RX
Device_Property
ByteSwap
