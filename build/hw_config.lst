ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"hw_config.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.USART1_Init,"ax",%progbits
  20              		.align	2
  21              		.global	USART1_Init
  22              		.thumb
  23              		.thumb_func
  25              	USART1_Init:
  26              	.LFB30:
  27              		.file 1 "src/hw_config.c"
   1:src/hw_config.c **** /*
   2:src/hw_config.c ****  * (C) COPYRIGHT 2009 CRZ
   3:src/hw_config.c ****  *
   4:src/hw_config.c ****  * File Name : hw_config.c
   5:src/hw_config.c ****  * Author    : POOH
   6:src/hw_config.c ****  * Version   : V1.0
   7:src/hw_config.c ****  * Date      : 08/12/2009
   8:src/hw_config.c ****  */
   9:src/hw_config.c **** 
  10:src/hw_config.c **** /* includes */
  11:src/hw_config.c **** /* Support files for GNU libc.  Files in the system namespace go here.
  12:src/hw_config.c ****    Files in the C namespace (ie those that do not start with an
  13:src/hw_config.c ****    underscore) go in .c.  */
  14:src/hw_config.c **** 
  15:src/hw_config.c **** #include "hw_config.h"
  16:src/hw_config.c **** 
  17:src/hw_config.c **** /* defines */
  18:src/hw_config.c **** 
  19:src/hw_config.c **** #ifdef __GNUC__
  20:src/hw_config.c ****   #define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
  21:src/hw_config.c ****   //#define GETCHAR_PROTOTYPE int __io_getchar(void)
  22:src/hw_config.c **** #else
  23:src/hw_config.c ****   #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
  24:src/hw_config.c ****  //#define GETCHAR_PROTOTYPE int fgetc(FILE *f)
  25:src/hw_config.c **** #endif 
  26:src/hw_config.c **** 
  27:src/hw_config.c **** /* __GNUC__ */
  28:src/hw_config.c **** 
  29:src/hw_config.c **** /* global variables */
  30:src/hw_config.c **** 
  31:src/hw_config.c **** uint32_t ADC_ConvertedValueX = 0;
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 2


  32:src/hw_config.c **** uint32_t ADC_ConvertedValueX_1 = 0;
  33:src/hw_config.c **** static volatile uint32_t TimingDelay;
  34:src/hw_config.c **** 
  35:src/hw_config.c **** /* functions */
  36:src/hw_config.c **** 
  37:src/hw_config.c **** void delay_1_second(void)
  38:src/hw_config.c **** {
  39:src/hw_config.c ****     Delay(1000);
  40:src/hw_config.c **** }
  41:src/hw_config.c **** 
  42:src/hw_config.c **** void delay_100_milli_second(void)
  43:src/hw_config.c **** {
  44:src/hw_config.c ****     Delay(100);
  45:src/hw_config.c **** }
  46:src/hw_config.c **** 
  47:src/hw_config.c **** /*
  48:src/hw_config.c ****  * Name   : USART1_Init
  49:src/hw_config.c ****  * Input  : None
  50:src/hw_config.c ****  * Output : None
  51:src/hw_config.c ****  * Return : None
  52:src/hw_config.c ****  */
  53:src/hw_config.c **** void USART1_Init(void)
  54:src/hw_config.c **** {
  28              		.loc 1 54 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 84B0     		sub	sp, sp, #16
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 24
  55:src/hw_config.c ****     USART_InitTypeDef USART_InitStructure;
  56:src/hw_config.c **** 
  57:src/hw_config.c ****     /* USARTx configuration ------------------------------------------------------*/
  58:src/hw_config.c ****     /* USARTx configured as follow:
  59:src/hw_config.c ****      - BaudRate = 115200 baud  
  60:src/hw_config.c ****      - Word Length = 8 Bits
  61:src/hw_config.c ****      - One Stop Bit
  62:src/hw_config.c ****      - No parity
  63:src/hw_config.c ****      - Hardware flow control disabled (RTS and CTS signals)
  64:src/hw_config.c ****      - Receive and transmit enabled
  65:src/hw_config.c ****      */
  66:src/hw_config.c ****     USART_InitStructure.USART_BaudRate   = 115200;
  40              		.loc 1 66 0
  41 0004 4FF4E133 		mov	r3, #115200
  42 0008 0093     		str	r3, [sp]
  67:src/hw_config.c ****     USART_InitStructure.USART_WordLength = USART_WordLength_8b;
  43              		.loc 1 67 0
  44 000a 0023     		movs	r3, #0
  45 000c ADF80430 		strh	r3, [sp, #4]	@ movhi
  68:src/hw_config.c ****     USART_InitStructure.USART_StopBits   = USART_StopBits_1;
  46              		.loc 1 68 0
  47 0010 ADF80630 		strh	r3, [sp, #6]	@ movhi
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 3


  69:src/hw_config.c ****     USART_InitStructure.USART_Parity     = USART_Parity_No ;
  48              		.loc 1 69 0
  49 0014 ADF80830 		strh	r3, [sp, #8]	@ movhi
  70:src/hw_config.c ****     USART_InitStructure.USART_HardwareFlowControl
  71:src/hw_config.c ****                                          = USART_HardwareFlowControl_None;
  50              		.loc 1 71 0
  51 0018 ADF80C30 		strh	r3, [sp, #12]	@ movhi
  72:src/hw_config.c ****     USART_InitStructure.USART_Mode       = USART_Mode_Rx | USART_Mode_Tx;
  52              		.loc 1 72 0
  53 001c 0C23     		movs	r3, #12
  54 001e ADF80A30 		strh	r3, [sp, #10]	@ movhi
  73:src/hw_config.c **** 
  74:src/hw_config.c ****     /* Configure the USARTx */ 
  75:src/hw_config.c ****     USART_Init(USART1, &USART_InitStructure);
  55              		.loc 1 75 0
  56 0022 054C     		ldr	r4, .L3
  57 0024 6946     		mov	r1, sp
  58 0026 2046     		mov	r0, r4
  59 0028 FFF7FEFF 		bl	USART_Init
  60              	.LVL0:
  76:src/hw_config.c **** 
  77:src/hw_config.c ****     /* Enable the USART1 */
  78:src/hw_config.c ****     USART_Cmd(USART1, ENABLE);
  61              		.loc 1 78 0
  62 002c 0121     		movs	r1, #1
  63 002e 2046     		mov	r0, r4
  64 0030 FFF7FEFF 		bl	USART_Cmd
  65              	.LVL1:
  79:src/hw_config.c **** }
  66              		.loc 1 79 0
  67 0034 04B0     		add	sp, sp, #16
  68              	.LCFI2:
  69              		.cfi_def_cfa_offset 8
  70              		@ sp needed
  71 0036 10BD     		pop	{r4, pc}
  72              	.L4:
  73              		.align	2
  74              	.L3:
  75 0038 00380140 		.word	1073821696
  76              		.cfi_endproc
  77              	.LFE30:
  79              		.section	.text.RCC_Configuration,"ax",%progbits
  80              		.align	2
  81              		.global	RCC_Configuration
  82              		.thumb
  83              		.thumb_func
  85              	RCC_Configuration:
  86              	.LFB31:
  80:src/hw_config.c **** 
  81:src/hw_config.c **** /*
  82:src/hw_config.c ****  * Name   : RCC_Configuration
  83:src/hw_config.c ****  * Input  : None
  84:src/hw_config.c ****  * Output : None
  85:src/hw_config.c ****  * Return : None
  86:src/hw_config.c ****  */
  87:src/hw_config.c **** void RCC_Configuration(void)
  88:src/hw_config.c **** {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 4


  87              		.loc 1 88 0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91 0000 08B5     		push	{r3, lr}
  92              	.LCFI3:
  93              		.cfi_def_cfa_offset 8
  94              		.cfi_offset 3, -8
  95              		.cfi_offset 14, -4
  89:src/hw_config.c ****     SystemInit();
  96              		.loc 1 89 0
  97 0002 FFF7FEFF 		bl	SystemInit
  98              	.LVL2:
  90:src/hw_config.c **** 
  91:src/hw_config.c ****     /* Enable GPIOA clock */
  92:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
  99              		.loc 1 92 0
 100 0006 0121     		movs	r1, #1
 101 0008 0420     		movs	r0, #4
 102 000a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 103              	.LVL3:
  93:src/hw_config.c **** 
  94:src/hw_config.c ****     /* Enable GPIOB clock */
  95:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);
 104              		.loc 1 95 0
 105 000e 0121     		movs	r1, #1
 106 0010 0820     		movs	r0, #8
 107 0012 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 108              	.LVL4:
  96:src/hw_config.c **** 
  97:src/hw_config.c ****     /* Enable GPIOC clock */
  98:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);
 109              		.loc 1 98 0
 110 0016 0121     		movs	r1, #1
 111 0018 1020     		movs	r0, #16
 112 001a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 113              	.LVL5:
  99:src/hw_config.c **** 
 100:src/hw_config.c ****     /* Enable GPIOD clock */
 101:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOD, ENABLE);
 114              		.loc 1 101 0
 115 001e 0121     		movs	r1, #1
 116 0020 2020     		movs	r0, #32
 117 0022 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 118              	.LVL6:
 102:src/hw_config.c **** 
 103:src/hw_config.c ****     /* Enable USART1 clocks */
 104:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
 119              		.loc 1 104 0
 120 0026 0121     		movs	r1, #1
 121 0028 4FF48040 		mov	r0, #16384
 122 002c FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 123              	.LVL7:
 105:src/hw_config.c **** 
 106:src/hw_config.c ****     /* Enable AFIO clock */
 107:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);
 124              		.loc 1 107 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 5


 125 0030 0121     		movs	r1, #1
 126 0032 0846     		mov	r0, r1
 127 0034 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 128              	.LVL8:
 108:src/hw_config.c **** 
 109:src/hw_config.c ****     /* Enable DMA1 clock */
 110:src/hw_config.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA1, ENABLE);
 129              		.loc 1 110 0
 130 0038 0121     		movs	r1, #1
 131 003a 0846     		mov	r0, r1
 132 003c FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 133              	.LVL9:
 134 0040 08BD     		pop	{r3, pc}
 135              		.cfi_endproc
 136              	.LFE31:
 138 0042 00BF     		.section	.text.NVIC_Configuration,"ax",%progbits
 139              		.align	2
 140              		.global	NVIC_Configuration
 141              		.thumb
 142              		.thumb_func
 144              	NVIC_Configuration:
 145              	.LFB32:
 111:src/hw_config.c **** }
 112:src/hw_config.c **** 
 113:src/hw_config.c **** /*******************************************************************************
 114:src/hw_config.c **** * Function Name  : NVIC_Configuration
 115:src/hw_config.c **** * Description    : Configures Vector Table base location.
 116:src/hw_config.c **** * Input          : None
 117:src/hw_config.c **** * Output         : None
 118:src/hw_config.c **** * Return         : None
 119:src/hw_config.c **** *******************************************************************************/
 120:src/hw_config.c **** void NVIC_Configuration(void)
 121:src/hw_config.c **** { 
 146              		.loc 1 121 0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 8
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150 0000 30B5     		push	{r4, r5, lr}
 151              	.LCFI4:
 152              		.cfi_def_cfa_offset 12
 153              		.cfi_offset 4, -12
 154              		.cfi_offset 5, -8
 155              		.cfi_offset 14, -4
 156 0002 83B0     		sub	sp, sp, #12
 157              	.LCFI5:
 158              		.cfi_def_cfa_offset 24
 122:src/hw_config.c ****     NVIC_InitTypeDef NVIC_InitStructure;
 123:src/hw_config.c **** 
 124:src/hw_config.c **** #ifdef  VECT_TAB_RAM
 125:src/hw_config.c ****     /* Set the Vector Table base location at 0x20000000 */ 
 126:src/hw_config.c ****     NVIC_SetVectorTable(NVIC_VectTab_RAM, 0x0); 
 127:src/hw_config.c **** #else  /* VECT_TAB_FLASH  */
 128:src/hw_config.c ****     /* Set the Vector Table base location at 0x08000000 */ 
 129:src/hw_config.c ****     NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x0);   
 159              		.loc 1 129 0
 160 0004 0021     		movs	r1, #0
 161 0006 4FF00060 		mov	r0, #134217728
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 6


 162 000a FFF7FEFF 		bl	NVIC_SetVectorTable
 163              	.LVL10:
 130:src/hw_config.c **** #endif
 131:src/hw_config.c **** 
 132:src/hw_config.c ****     /* Configure one bit for preemption priority */
 133:src/hw_config.c ****     NVIC_PriorityGroupConfig(NVIC_PriorityGroup_0);
 164              		.loc 1 133 0
 165 000e 4FF4E060 		mov	r0, #1792
 166 0012 FFF7FEFF 		bl	NVIC_PriorityGroupConfig
 167              	.LVL11:
 134:src/hw_config.c **** 
 135:src/hw_config.c ****     /* Enable the EXTI0 Interrupt */
 136:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn;
 168              		.loc 1 136 0
 169 0016 0623     		movs	r3, #6
 170 0018 8DF80430 		strb	r3, [sp, #4]
 137:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 171              		.loc 1 137 0
 172 001c 0025     		movs	r5, #0
 173 001e 8DF80550 		strb	r5, [sp, #5]
 138:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 174              		.loc 1 138 0
 175 0022 8DF80650 		strb	r5, [sp, #6]
 139:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 176              		.loc 1 139 0
 177 0026 0124     		movs	r4, #1
 178 0028 8DF80740 		strb	r4, [sp, #7]
 140:src/hw_config.c ****     NVIC_Init(&NVIC_InitStructure);
 179              		.loc 1 140 0
 180 002c 01A8     		add	r0, sp, #4
 181 002e FFF7FEFF 		bl	NVIC_Init
 182              	.LVL12:
 141:src/hw_config.c **** 
 142:src/hw_config.c ****     /* Enable the EXTI1 Interrupt */
 143:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannel = EXTI1_IRQn;
 183              		.loc 1 143 0
 184 0032 0723     		movs	r3, #7
 185 0034 8DF80430 		strb	r3, [sp, #4]
 144:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 186              		.loc 1 144 0
 187 0038 8DF80550 		strb	r5, [sp, #5]
 145:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 188              		.loc 1 145 0
 189 003c 8DF80640 		strb	r4, [sp, #6]
 146:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 190              		.loc 1 146 0
 191 0040 8DF80740 		strb	r4, [sp, #7]
 147:src/hw_config.c ****     NVIC_Init(&NVIC_InitStructure);
 192              		.loc 1 147 0
 193 0044 01A8     		add	r0, sp, #4
 194 0046 FFF7FEFF 		bl	NVIC_Init
 195              	.LVL13:
 148:src/hw_config.c **** }
 196              		.loc 1 148 0
 197 004a 03B0     		add	sp, sp, #12
 198              	.LCFI6:
 199              		.cfi_def_cfa_offset 12
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 7


 200              		@ sp needed
 201 004c 30BD     		pop	{r4, r5, pc}
 202              		.cfi_endproc
 203              	.LFE32:
 205 004e 00BF     		.section	.text.Set_USBClock,"ax",%progbits
 206              		.align	2
 207              		.global	Set_USBClock
 208              		.thumb
 209              		.thumb_func
 211              	Set_USBClock:
 212              	.LFB33:
 149:src/hw_config.c **** 
 150:src/hw_config.c **** /*******************************************************************************
 151:src/hw_config.c **** * Function Name  : Set_USBClock
 152:src/hw_config.c **** * Description    : Configures USB Clock input (48MHz).
 153:src/hw_config.c **** * Input          : None.
 154:src/hw_config.c **** * Output         : None.
 155:src/hw_config.c **** * Return         : None.
 156:src/hw_config.c **** *******************************************************************************/
 157:src/hw_config.c **** void Set_USBClock(void)
 158:src/hw_config.c **** {
 213              		.loc 1 158 0
 214              		.cfi_startproc
 215              		@ args = 0, pretend = 0, frame = 0
 216              		@ frame_needed = 0, uses_anonymous_args = 0
 217 0000 08B5     		push	{r3, lr}
 218              	.LCFI7:
 219              		.cfi_def_cfa_offset 8
 220              		.cfi_offset 3, -8
 221              		.cfi_offset 14, -4
 159:src/hw_config.c ****     /* Select USBCLK source */
 160:src/hw_config.c ****     RCC_USBCLKConfig(RCC_USBCLKSource_PLLCLK_1Div5);
 222              		.loc 1 160 0
 223 0002 0020     		movs	r0, #0
 224 0004 FFF7FEFF 		bl	RCC_USBCLKConfig
 225              	.LVL14:
 161:src/hw_config.c **** 
 162:src/hw_config.c ****     /* Enable USB clock */
 163:src/hw_config.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USB, ENABLE);
 226              		.loc 1 163 0
 227 0008 0121     		movs	r1, #1
 228 000a 4FF40000 		mov	r0, #8388608
 229 000e FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 230              	.LVL15:
 231 0012 08BD     		pop	{r3, pc}
 232              		.cfi_endproc
 233              	.LFE33:
 235              		.section	.text.Enter_LowPowerMode,"ax",%progbits
 236              		.align	2
 237              		.global	Enter_LowPowerMode
 238              		.thumb
 239              		.thumb_func
 241              	Enter_LowPowerMode:
 242              	.LFB34:
 164:src/hw_config.c **** }
 165:src/hw_config.c **** 
 166:src/hw_config.c **** /*******************************************************************************
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 8


 167:src/hw_config.c **** * Function Name  : Enter_LowPowerMode.
 168:src/hw_config.c **** * Description    : Power-off system clocks and power while entering suspend mode.
 169:src/hw_config.c **** * Input          : None.
 170:src/hw_config.c **** * Output         : None.
 171:src/hw_config.c **** * Return         : None.
 172:src/hw_config.c **** *******************************************************************************/
 173:src/hw_config.c **** void Enter_LowPowerMode(void)
 174:src/hw_config.c **** {
 243              		.loc 1 174 0
 244              		.cfi_startproc
 245              		@ args = 0, pretend = 0, frame = 0
 246              		@ frame_needed = 0, uses_anonymous_args = 0
 247 0000 08B5     		push	{r3, lr}
 248              	.LCFI8:
 249              		.cfi_def_cfa_offset 8
 250              		.cfi_offset 3, -8
 251              		.cfi_offset 14, -4
 175:src/hw_config.c ****     /* Set the device state to suspend */
 176:src/hw_config.c ****     bDeviceState = SUSPENDED;
 252              		.loc 1 176 0
 253 0002 0322     		movs	r2, #3
 254 0004 034B     		ldr	r3, .L13
 255 0006 1A60     		str	r2, [r3]
 177:src/hw_config.c **** 
 178:src/hw_config.c **** #if 0
 179:src/hw_config.c ****     /* Clear EXTI Line18 pending bit */
 180:src/hw_config.c ****     EXTI_ClearITPendingBit(GPIO_EXTI_Line_KEY1);
 181:src/hw_config.c **** #endif
 182:src/hw_config.c **** 
 183:src/hw_config.c ****     /* Request to enter STOP mode with regulator in low power mode */
 184:src/hw_config.c ****     PWR_EnterSTOPMode(PWR_Regulator_LowPower, PWR_STOPEntry_WFI);
 256              		.loc 1 184 0
 257 0008 0121     		movs	r1, #1
 258 000a 0846     		mov	r0, r1
 259 000c FFF7FEFF 		bl	PWR_EnterSTOPMode
 260              	.LVL16:
 261 0010 08BD     		pop	{r3, pc}
 262              	.L14:
 263 0012 00BF     		.align	2
 264              	.L13:
 265 0014 00000000 		.word	bDeviceState
 266              		.cfi_endproc
 267              	.LFE34:
 269              		.section	.text.Leave_LowPowerMode,"ax",%progbits
 270              		.align	2
 271              		.global	Leave_LowPowerMode
 272              		.thumb
 273              		.thumb_func
 275              	Leave_LowPowerMode:
 276              	.LFB35:
 185:src/hw_config.c **** }
 186:src/hw_config.c **** 
 187:src/hw_config.c **** /*******************************************************************************
 188:src/hw_config.c **** * Function Name  : Leave_LowPowerMode.
 189:src/hw_config.c **** * Description    : Restores system clocks and power while exiting suspend mode.
 190:src/hw_config.c **** * Input          : None.
 191:src/hw_config.c **** * Output         : None.
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 9


 192:src/hw_config.c **** * Return         : None.
 193:src/hw_config.c **** *******************************************************************************/
 194:src/hw_config.c **** void Leave_LowPowerMode(void)
 195:src/hw_config.c **** {
 277              		.loc 1 195 0
 278              		.cfi_startproc
 279              		@ args = 0, pretend = 0, frame = 0
 280              		@ frame_needed = 0, uses_anonymous_args = 0
 281 0000 08B5     		push	{r3, lr}
 282              	.LCFI9:
 283              		.cfi_def_cfa_offset 8
 284              		.cfi_offset 3, -8
 285              		.cfi_offset 14, -4
 286              	.LVL17:
 196:src/hw_config.c ****     DEVICE_INFO *pInfo = &Device_Info;
 197:src/hw_config.c **** 
 198:src/hw_config.c ****     /* Enable HSE */
 199:src/hw_config.c ****     RCC_HSEConfig(RCC_HSE_ON);
 287              		.loc 1 199 0
 288 0002 4FF48030 		mov	r0, #65536
 289 0006 FFF7FEFF 		bl	RCC_HSEConfig
 290              	.LVL18:
 200:src/hw_config.c **** 
 201:src/hw_config.c ****     /* Wait till HSE is ready */
 202:src/hw_config.c ****     RCC_WaitForHSEStartUp();
 291              		.loc 1 202 0
 292 000a FFF7FEFF 		bl	RCC_WaitForHSEStartUp
 293              	.LVL19:
 203:src/hw_config.c **** 
 204:src/hw_config.c ****     /* Enable PLL */
 205:src/hw_config.c ****     RCC_PLLCmd(ENABLE);
 294              		.loc 1 205 0
 295 000e 0120     		movs	r0, #1
 296 0010 FFF7FEFF 		bl	RCC_PLLCmd
 297              	.LVL20:
 298              	.L16:
 206:src/hw_config.c **** 
 207:src/hw_config.c ****     /* Wait till PLL is ready */
 208:src/hw_config.c ****     while (RCC_GetFlagStatus(RCC_FLAG_PLLRDY) == RESET)
 299              		.loc 1 208 0 discriminator 1
 300 0014 3920     		movs	r0, #57
 301 0016 FFF7FEFF 		bl	RCC_GetFlagStatus
 302              	.LVL21:
 303 001a 0028     		cmp	r0, #0
 304 001c FAD0     		beq	.L16
 209:src/hw_config.c ****     {}
 210:src/hw_config.c **** 
 211:src/hw_config.c ****     /* Select PLL as system clock source */
 212:src/hw_config.c ****     RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK);
 305              		.loc 1 212 0
 306 001e 0220     		movs	r0, #2
 307 0020 FFF7FEFF 		bl	RCC_SYSCLKConfig
 308              	.LVL22:
 309              	.L17:
 213:src/hw_config.c **** 
 214:src/hw_config.c ****     /* Wait till PLL is used as system clock source */
 215:src/hw_config.c ****     while (RCC_GetSYSCLKSource() != 0x08)
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 10


 310              		.loc 1 215 0 discriminator 1
 311 0024 FFF7FEFF 		bl	RCC_GetSYSCLKSource
 312              	.LVL23:
 313 0028 0828     		cmp	r0, #8
 314 002a FBD1     		bne	.L17
 216:src/hw_config.c ****     {}
 217:src/hw_config.c **** 
 218:src/hw_config.c ****     /* Set the device state to the correct state */
 219:src/hw_config.c ****     if (pInfo->Current_Configuration != 0)
 315              		.loc 1 219 0
 316 002c 054B     		ldr	r3, .L21
 317 002e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 318 0030 1BB1     		cbz	r3, .L18
 220:src/hw_config.c ****     {
 221:src/hw_config.c ****         /* Device configured */
 222:src/hw_config.c ****         bDeviceState = CONFIGURED;
 319              		.loc 1 222 0
 320 0032 0522     		movs	r2, #5
 321 0034 044B     		ldr	r3, .L21+4
 322 0036 1A60     		str	r2, [r3]
 323 0038 08BD     		pop	{r3, pc}
 324              	.L18:
 223:src/hw_config.c ****     }
 224:src/hw_config.c ****     else 
 225:src/hw_config.c ****     {
 226:src/hw_config.c ****         bDeviceState = ATTACHED;
 325              		.loc 1 226 0
 326 003a 0122     		movs	r2, #1
 327 003c 024B     		ldr	r3, .L21+4
 328 003e 1A60     		str	r2, [r3]
 329 0040 08BD     		pop	{r3, pc}
 330              	.L22:
 331 0042 00BF     		.align	2
 332              	.L21:
 333 0044 00000000 		.word	Device_Info
 334 0048 00000000 		.word	bDeviceState
 335              		.cfi_endproc
 336              	.LFE35:
 338              		.section	.text.USB_Interrupts_Config,"ax",%progbits
 339              		.align	2
 340              		.global	USB_Interrupts_Config
 341              		.thumb
 342              		.thumb_func
 344              	USB_Interrupts_Config:
 345              	.LFB36:
 227:src/hw_config.c ****     }
 228:src/hw_config.c **** }
 229:src/hw_config.c **** 
 230:src/hw_config.c **** /*******************************************************************************
 231:src/hw_config.c **** * Function Name  : USB_Interrupts_Config.
 232:src/hw_config.c **** * Description    : Configures the USB interrupts.
 233:src/hw_config.c **** * Input          : None.
 234:src/hw_config.c **** * Output         : None.
 235:src/hw_config.c **** * Return         : None.
 236:src/hw_config.c **** *******************************************************************************/
 237:src/hw_config.c **** void USB_Interrupts_Config(void)
 238:src/hw_config.c **** {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 11


 346              		.loc 1 238 0
 347              		.cfi_startproc
 348              		@ args = 0, pretend = 0, frame = 8
 349              		@ frame_needed = 0, uses_anonymous_args = 0
 350 0000 30B5     		push	{r4, r5, lr}
 351              	.LCFI10:
 352              		.cfi_def_cfa_offset 12
 353              		.cfi_offset 4, -12
 354              		.cfi_offset 5, -8
 355              		.cfi_offset 14, -4
 356 0002 83B0     		sub	sp, sp, #12
 357              	.LCFI11:
 358              		.cfi_def_cfa_offset 24
 239:src/hw_config.c ****     NVIC_InitTypeDef NVIC_InitStructure;
 240:src/hw_config.c **** 
 241:src/hw_config.c ****     /* 2 bit for pre-emption priority, 2 bits for subpriority */
 242:src/hw_config.c ****     NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);
 359              		.loc 1 242 0
 360 0004 4FF4A060 		mov	r0, #1280
 361 0008 FFF7FEFF 		bl	NVIC_PriorityGroupConfig
 362              	.LVL24:
 243:src/hw_config.c **** 
 244:src/hw_config.c ****     /* Enable the USB interrupt */
 245:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannel = USB_LP_CAN1_RX0_IRQn;
 363              		.loc 1 245 0
 364 000c 1423     		movs	r3, #20
 365 000e 8DF80430 		strb	r3, [sp, #4]
 246:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 1;
 366              		.loc 1 246 0
 367 0012 0125     		movs	r5, #1
 368 0014 8DF80550 		strb	r5, [sp, #5]
 247:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 369              		.loc 1 247 0
 370 0018 0024     		movs	r4, #0
 371 001a 8DF80640 		strb	r4, [sp, #6]
 248:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 372              		.loc 1 248 0
 373 001e 8DF80750 		strb	r5, [sp, #7]
 249:src/hw_config.c ****     NVIC_Init(&NVIC_InitStructure);
 374              		.loc 1 249 0
 375 0022 01A8     		add	r0, sp, #4
 376 0024 FFF7FEFF 		bl	NVIC_Init
 377              	.LVL25:
 250:src/hw_config.c **** 
 251:src/hw_config.c ****     /* Enable the USB Wake-up interrupt */
 252:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannel = USBWakeUp_IRQn;
 378              		.loc 1 252 0
 379 0028 2A23     		movs	r3, #42
 380 002a 8DF80430 		strb	r3, [sp, #4]
 253:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 381              		.loc 1 253 0
 382 002e 8DF80540 		strb	r4, [sp, #5]
 254:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 383              		.loc 1 254 0
 384 0032 8DF80640 		strb	r4, [sp, #6]
 255:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 385              		.loc 1 255 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 12


 386 0036 8DF80750 		strb	r5, [sp, #7]
 256:src/hw_config.c ****     NVIC_Init(&NVIC_InitStructure);
 387              		.loc 1 256 0
 388 003a 01A8     		add	r0, sp, #4
 389 003c FFF7FEFF 		bl	NVIC_Init
 390              	.LVL26:
 257:src/hw_config.c ****     
 258:src/hw_config.c ****     /* Enable the DMA1 Channel1 Interrupt */
 259:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannel = DMA1_Channel1_IRQn;
 391              		.loc 1 259 0
 392 0040 0B23     		movs	r3, #11
 393 0042 8DF80430 		strb	r3, [sp, #4]
 260:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 394              		.loc 1 260 0
 395 0046 8DF80540 		strb	r4, [sp, #5]
 261:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 396              		.loc 1 261 0
 397 004a 8DF80640 		strb	r4, [sp, #6]
 262:src/hw_config.c ****     NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 398              		.loc 1 262 0
 399 004e 8DF80750 		strb	r5, [sp, #7]
 263:src/hw_config.c ****     NVIC_Init(&NVIC_InitStructure);
 400              		.loc 1 263 0
 401 0052 01A8     		add	r0, sp, #4
 402 0054 FFF7FEFF 		bl	NVIC_Init
 403              	.LVL27:
 264:src/hw_config.c **** }
 404              		.loc 1 264 0
 405 0058 03B0     		add	sp, sp, #12
 406              	.LCFI12:
 407              		.cfi_def_cfa_offset 12
 408              		@ sp needed
 409 005a 30BD     		pop	{r4, r5, pc}
 410              		.cfi_endproc
 411              	.LFE36:
 413              		.section	.text.USB_Cable_Config,"ax",%progbits
 414              		.align	2
 415              		.global	USB_Cable_Config
 416              		.thumb
 417              		.thumb_func
 419              	USB_Cable_Config:
 420              	.LFB37:
 265:src/hw_config.c **** 
 266:src/hw_config.c **** /*******************************************************************************
 267:src/hw_config.c **** * Function Name  : USB_Cable_Config.
 268:src/hw_config.c **** * Description    : Software Connection/Disconnection of USB Cable.
 269:src/hw_config.c **** * Input          : NewState: new state.
 270:src/hw_config.c **** * Output         : None.
 271:src/hw_config.c **** * Return         : None
 272:src/hw_config.c **** *******************************************************************************/
 273:src/hw_config.c **** void USB_Cable_Config (FunctionalState NewState)
 274:src/hw_config.c **** { 
 421              		.loc 1 274 0
 422              		.cfi_startproc
 423              		@ args = 0, pretend = 0, frame = 0
 424              		@ frame_needed = 0, uses_anonymous_args = 0
 425              	.LVL28:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 13


 426 0000 08B5     		push	{r3, lr}
 427              	.LCFI13:
 428              		.cfi_def_cfa_offset 8
 429              		.cfi_offset 3, -8
 430              		.cfi_offset 14, -4
 275:src/hw_config.c ****     if (NewState != DISABLE)
 431              		.loc 1 275 0
 432 0002 28B1     		cbz	r0, .L26
 276:src/hw_config.c ****     {
 277:src/hw_config.c ****         GPIO_ResetBits(GPIO_USB_DISCONNECT, GPIO_USB_DISCONNECT_PIN);
 433              		.loc 1 277 0
 434 0004 4FF48071 		mov	r1, #256
 435 0008 0448     		ldr	r0, .L29
 436              	.LVL29:
 437 000a FFF7FEFF 		bl	GPIO_ResetBits
 438              	.LVL30:
 439 000e 08BD     		pop	{r3, pc}
 440              	.LVL31:
 441              	.L26:
 278:src/hw_config.c ****     }
 279:src/hw_config.c ****     else
 280:src/hw_config.c ****     {
 281:src/hw_config.c ****         GPIO_SetBits(GPIO_USB_DISCONNECT, GPIO_USB_DISCONNECT_PIN);
 442              		.loc 1 281 0
 443 0010 4FF48071 		mov	r1, #256
 444 0014 0148     		ldr	r0, .L29
 445              	.LVL32:
 446 0016 FFF7FEFF 		bl	GPIO_SetBits
 447              	.LVL33:
 448 001a 08BD     		pop	{r3, pc}
 449              	.L30:
 450              		.align	2
 451              	.L29:
 452 001c 00080140 		.word	1073809408
 453              		.cfi_endproc
 454              	.LFE37:
 456              		.section	.text.GPIO_Configuration,"ax",%progbits
 457              		.align	2
 458              		.global	GPIO_Configuration
 459              		.thumb
 460              		.thumb_func
 462              	GPIO_Configuration:
 463              	.LFB38:
 282:src/hw_config.c ****     }
 283:src/hw_config.c **** }
 284:src/hw_config.c **** 
 285:src/hw_config.c **** /*
 286:src/hw_config.c ****  * Name   : GPIO_Configuration
 287:src/hw_config.c ****  * Input  : None
 288:src/hw_config.c ****  * Output : None
 289:src/hw_config.c ****  * Return : None
 290:src/hw_config.c ****  */
 291:src/hw_config.c **** void GPIO_Configuration(void)
 292:src/hw_config.c **** {
 464              		.loc 1 292 0
 465              		.cfi_startproc
 466              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 14


 467              		@ frame_needed = 0, uses_anonymous_args = 0
 468 0000 70B5     		push	{r4, r5, r6, lr}
 469              	.LCFI14:
 470              		.cfi_def_cfa_offset 16
 471              		.cfi_offset 4, -16
 472              		.cfi_offset 5, -12
 473              		.cfi_offset 6, -8
 474              		.cfi_offset 14, -4
 475 0002 82B0     		sub	sp, sp, #8
 476              	.LCFI15:
 477              		.cfi_def_cfa_offset 24
 293:src/hw_config.c ****     GPIO_InitTypeDef GPIO_InitStructure;
 294:src/hw_config.c **** 
 295:src/hw_config.c ****     // UART configuration ...
 296:src/hw_config.c **** 
 297:src/hw_config.c ****     /* Configure USARTx_Tx as alternate function push-pull */
 298:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin   = GPIO_USART_Tx_Pin;
 478              		.loc 1 298 0
 479 0004 4FF40073 		mov	r3, #512
 480 0008 ADF80430 		strh	r3, [sp, #4]	@ movhi
 299:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 481              		.loc 1 299 0
 482 000c 0325     		movs	r5, #3
 483 000e 8DF80650 		strb	r5, [sp, #6]
 300:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_AF_PP;
 484              		.loc 1 300 0
 485 0012 1823     		movs	r3, #24
 486 0014 8DF80730 		strb	r3, [sp, #7]
 301:src/hw_config.c ****     GPIO_Init(GPIO_USART, &GPIO_InitStructure);
 487              		.loc 1 301 0
 488 0018 1B4C     		ldr	r4, .L33
 489 001a 01A9     		add	r1, sp, #4
 490 001c 2046     		mov	r0, r4
 491 001e FFF7FEFF 		bl	GPIO_Init
 492              	.LVL34:
 302:src/hw_config.c **** 
 303:src/hw_config.c ****     /* Configure USARTx_Rx as input floating */
 304:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin  = GPIO_USART_Rx_Pin;
 493              		.loc 1 304 0
 494 0022 4FF48063 		mov	r3, #1024
 495 0026 ADF80430 		strh	r3, [sp, #4]	@ movhi
 305:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;
 496              		.loc 1 305 0
 497 002a 0426     		movs	r6, #4
 498 002c 8DF80760 		strb	r6, [sp, #7]
 306:src/hw_config.c ****     GPIO_Init(GPIO_USART, &GPIO_InitStructure);
 499              		.loc 1 306 0
 500 0030 0DEB0601 		add	r1, sp, r6
 501 0034 2046     		mov	r0, r4
 502 0036 FFF7FEFF 		bl	GPIO_Init
 503              	.LVL35:
 307:src/hw_config.c **** 
 308:src/hw_config.c ****     // Key configuration ...
 309:src/hw_config.c **** 
 310:src/hw_config.c ****     /* Configure gpio as input : Button WKUP & USER */
 311:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin  = GPIO_KEY1_PIN | GPIO_KEY2_PIN;
 504              		.loc 1 311 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 15


 505 003a ADF80450 		strh	r5, [sp, #4]	@ movhi
 312:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;
 506              		.loc 1 312 0
 507 003e 8DF80760 		strb	r6, [sp, #7]
 313:src/hw_config.c ****     GPIO_Init(GPIO_KEY, &GPIO_InitStructure);
 508              		.loc 1 313 0
 509 0042 0DEB0601 		add	r1, sp, r6
 510 0046 2046     		mov	r0, r4
 511 0048 FFF7FEFF 		bl	GPIO_Init
 512              	.LVL36:
 314:src/hw_config.c **** 
 315:src/hw_config.c ****     // LED configuration ...
 316:src/hw_config.c **** 
 317:src/hw_config.c ****     /* Configure gpio as output : LED1, LED2, LED3 */
 318:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin   = GPIO_LED1_PIN | GPIO_LED2_PIN | GPIO_LED3_PIN ;
 513              		.loc 1 318 0
 514 004c 4FF44873 		mov	r3, #800
 515 0050 ADF80430 		strh	r3, [sp, #4]	@ movhi
 319:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 516              		.loc 1 319 0
 517 0054 8DF80650 		strb	r5, [sp, #6]
 320:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_Out_PP;
 518              		.loc 1 320 0
 519 0058 1023     		movs	r3, #16
 520 005a 8DF80730 		strb	r3, [sp, #7]
 321:src/hw_config.c ****     GPIO_Init(GPIO_LED, &GPIO_InitStructure);
 521              		.loc 1 321 0
 522 005e 0DEB0601 		add	r1, sp, r6
 523 0062 0A48     		ldr	r0, .L33+4
 524 0064 FFF7FEFF 		bl	GPIO_Init
 525              	.LVL37:
 322:src/hw_config.c **** 
 323:src/hw_config.c ****     // USB_DISCONNECT configuration ...
 324:src/hw_config.c **** 
 325:src/hw_config.c ****     /* USB_DISCONNECT used as USB pull-up */
 326:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin   = GPIO_USB_DISCONNECT_PIN;
 526              		.loc 1 326 0
 527 0068 4FF48073 		mov	r3, #256
 528 006c ADF80430 		strh	r3, [sp, #4]	@ movhi
 327:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 529              		.loc 1 327 0
 530 0070 8DF80650 		strb	r5, [sp, #6]
 328:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_Out_OD;
 531              		.loc 1 328 0
 532 0074 1423     		movs	r3, #20
 533 0076 8DF80730 		strb	r3, [sp, #7]
 329:src/hw_config.c ****     GPIO_Init(GPIO_USB_DISCONNECT, &GPIO_InitStructure);
 534              		.loc 1 329 0
 535 007a 0DEB0601 		add	r1, sp, r6
 536 007e 2046     		mov	r0, r4
 537 0080 FFF7FEFF 		bl	GPIO_Init
 538              	.LVL38:
 330:src/hw_config.c **** 
 331:src/hw_config.c **** #ifdef  BOARD_DEF_MANGO_Z1
 332:src/hw_config.c ****     // CC2520 RF GPIO configuration ...
 333:src/hw_config.c **** 
 334:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 16


 335:src/hw_config.c ****         = GPIO_RF_GPIO0_PIN | GPIO_RF_GPIO1_PIN
 336:src/hw_config.c ****         | GPIO_RF_GPIO2_PIN | GPIO_RF_GPIO3_PIN | GPIO_RF_GPIO4_PIN;
 337:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 338:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_IN_FLOATING;
 339:src/hw_config.c ****     GPIO_Init(GPIO_RF_GPIO0_4, &GPIO_InitStructure);
 340:src/hw_config.c **** 
 341:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin   = GPIO_RF_GPIO5_PIN;
 342:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 343:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_IN_FLOATING;
 344:src/hw_config.c ****     GPIO_Init(GPIO_RF_GPIO5, &GPIO_InitStructure);
 345:src/hw_config.c **** #endif
 346:src/hw_config.c **** }
 539              		.loc 1 346 0
 540 0084 02B0     		add	sp, sp, #8
 541              	.LCFI16:
 542              		.cfi_def_cfa_offset 16
 543              		@ sp needed
 544 0086 70BD     		pop	{r4, r5, r6, pc}
 545              	.L34:
 546              		.align	2
 547              	.L33:
 548 0088 00080140 		.word	1073809408
 549 008c 000C0140 		.word	1073810432
 550              		.cfi_endproc
 551              	.LFE38:
 553              		.section	.text.EXTI_Configuration,"ax",%progbits
 554              		.align	2
 555              		.global	EXTI_Configuration
 556              		.thumb
 557              		.thumb_func
 559              	EXTI_Configuration:
 560              	.LFB39:
 347:src/hw_config.c **** 
 348:src/hw_config.c **** /*******************************************************************************
 349:src/hw_config.c **** * Function Name : EXTI_Configuration.
 350:src/hw_config.c **** * Description   : Configure the EXTI lines for Key and Tamper push buttons.
 351:src/hw_config.c **** * Input         : None.
 352:src/hw_config.c **** * Output        : None.
 353:src/hw_config.c **** * Return value  : The direction value.
 354:src/hw_config.c **** *******************************************************************************/
 355:src/hw_config.c **** void EXTI_Configuration(void)
 356:src/hw_config.c **** { 
 561              		.loc 1 356 0
 562              		.cfi_startproc
 563              		@ args = 0, pretend = 0, frame = 8
 564              		@ frame_needed = 0, uses_anonymous_args = 0
 565 0000 70B5     		push	{r4, r5, r6, lr}
 566              	.LCFI17:
 567              		.cfi_def_cfa_offset 16
 568              		.cfi_offset 4, -16
 569              		.cfi_offset 5, -12
 570              		.cfi_offset 6, -8
 571              		.cfi_offset 14, -4
 572 0002 82B0     		sub	sp, sp, #8
 573              	.LCFI18:
 574              		.cfi_def_cfa_offset 24
 357:src/hw_config.c ****     EXTI_InitTypeDef EXTI_InitStructure;
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 17


 358:src/hw_config.c **** 
 359:src/hw_config.c ****     /* Configure gpio as input : Button Left-WKUP */
 360:src/hw_config.c ****     /* Connect EXTI Line to gpio pin */
 361:src/hw_config.c ****     GPIO_EXTILineConfig(GPIO_PORTSOURCE_KEY, GPIO_PINSOURCE_KEY1);
 575              		.loc 1 361 0
 576 0004 0021     		movs	r1, #0
 577 0006 0846     		mov	r0, r1
 578 0008 FFF7FEFF 		bl	GPIO_EXTILineConfig
 579              	.LVL39:
 362:src/hw_config.c **** 
 363:src/hw_config.c ****     /* Configure EXTI Line to generate an interrupt */
 364:src/hw_config.c ****     EXTI_InitStructure.EXTI_Line    = GPIO_EXTI_Line_KEY1;
 580              		.loc 1 364 0
 581 000c 0124     		movs	r4, #1
 582 000e 0094     		str	r4, [sp]
 365:src/hw_config.c ****     EXTI_InitStructure.EXTI_Mode    = EXTI_Mode_Interrupt;
 583              		.loc 1 365 0
 584 0010 0025     		movs	r5, #0
 585 0012 8DF80450 		strb	r5, [sp, #4]
 366:src/hw_config.c ****     EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
 586              		.loc 1 366 0
 587 0016 0C26     		movs	r6, #12
 588 0018 8DF80560 		strb	r6, [sp, #5]
 367:src/hw_config.c ****     EXTI_InitStructure.EXTI_LineCmd = ENABLE;
 589              		.loc 1 367 0
 590 001c 8DF80640 		strb	r4, [sp, #6]
 368:src/hw_config.c ****     EXTI_Init(&EXTI_InitStructure);
 591              		.loc 1 368 0
 592 0020 6846     		mov	r0, sp
 593 0022 FFF7FEFF 		bl	EXTI_Init
 594              	.LVL40:
 369:src/hw_config.c **** 
 370:src/hw_config.c ****     /* Configure gpio as input : Button Right-USER */
 371:src/hw_config.c ****     /* Connect EXTI Line to gpio pin */
 372:src/hw_config.c ****     GPIO_EXTILineConfig(GPIO_PORTSOURCE_KEY, GPIO_PINSOURCE_KEY2);
 595              		.loc 1 372 0
 596 0026 2146     		mov	r1, r4
 597 0028 2846     		mov	r0, r5
 598 002a FFF7FEFF 		bl	GPIO_EXTILineConfig
 599              	.LVL41:
 373:src/hw_config.c **** 
 374:src/hw_config.c ****     /* Configure EXTI Line to generate an interrupt */  
 375:src/hw_config.c ****     EXTI_InitStructure.EXTI_Line    = GPIO_EXTI_Line_KEY2;
 600              		.loc 1 375 0
 601 002e 0223     		movs	r3, #2
 602 0030 0093     		str	r3, [sp]
 376:src/hw_config.c ****     EXTI_InitStructure.EXTI_Mode    = EXTI_Mode_Interrupt;
 603              		.loc 1 376 0
 604 0032 8DF80450 		strb	r5, [sp, #4]
 377:src/hw_config.c ****     EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
 605              		.loc 1 377 0
 606 0036 8DF80560 		strb	r6, [sp, #5]
 378:src/hw_config.c ****     EXTI_InitStructure.EXTI_LineCmd = ENABLE;
 607              		.loc 1 378 0
 608 003a 8DF80640 		strb	r4, [sp, #6]
 379:src/hw_config.c ****     EXTI_Init(&EXTI_InitStructure);
 609              		.loc 1 379 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 18


 610 003e 6846     		mov	r0, sp
 611 0040 FFF7FEFF 		bl	EXTI_Init
 612              	.LVL42:
 380:src/hw_config.c **** 
 381:src/hw_config.c ****     /* USB Wakeup from suspend event */
 382:src/hw_config.c ****     EXTI_ClearITPendingBit(EXTI_Line18);
 613              		.loc 1 382 0
 614 0044 4FF48020 		mov	r0, #262144
 615 0048 FFF7FEFF 		bl	EXTI_ClearITPendingBit
 616              	.LVL43:
 383:src/hw_config.c ****     EXTI_InitStructure.EXTI_Line    = EXTI_Line18; // USB resume from suspend mode
 617              		.loc 1 383 0
 618 004c 4FF48023 		mov	r3, #262144
 619 0050 0093     		str	r3, [sp]
 384:src/hw_config.c ****     EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising;
 620              		.loc 1 384 0
 621 0052 0823     		movs	r3, #8
 622 0054 8DF80530 		strb	r3, [sp, #5]
 385:src/hw_config.c ****     EXTI_InitStructure.EXTI_LineCmd = ENABLE;
 623              		.loc 1 385 0
 624 0058 8DF80640 		strb	r4, [sp, #6]
 386:src/hw_config.c ****     EXTI_Init(&EXTI_InitStructure);
 625              		.loc 1 386 0
 626 005c 6846     		mov	r0, sp
 627 005e FFF7FEFF 		bl	EXTI_Init
 628              	.LVL44:
 387:src/hw_config.c **** }
 629              		.loc 1 387 0
 630 0062 02B0     		add	sp, sp, #8
 631              	.LCFI19:
 632              		.cfi_def_cfa_offset 16
 633              		@ sp needed
 634 0064 70BD     		pop	{r4, r5, r6, pc}
 635              		.cfi_endproc
 636              	.LFE39:
 638 0066 00BF     		.section	.text.Get_SerialNum,"ax",%progbits
 639              		.align	2
 640              		.global	Get_SerialNum
 641              		.thumb
 642              		.thumb_func
 644              	Get_SerialNum:
 645              	.LFB40:
 388:src/hw_config.c **** 
 389:src/hw_config.c **** /*******************************************************************************
 390:src/hw_config.c **** * Function Name  : Get_SerialNum.
 391:src/hw_config.c **** * Description    : Create the serial number string descriptor.
 392:src/hw_config.c **** * Input          : None.
 393:src/hw_config.c **** * Output         : None.
 394:src/hw_config.c **** * Return         : None.
 395:src/hw_config.c **** *******************************************************************************/
 396:src/hw_config.c **** void Get_SerialNum(void)
 397:src/hw_config.c **** {
 646              		.loc 1 397 0
 647              		.cfi_startproc
 648              		@ args = 0, pretend = 0, frame = 0
 649              		@ frame_needed = 0, uses_anonymous_args = 0
 650              		@ link register save eliminated.
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 19


 398:src/hw_config.c ****   uint32_t Device_Serial0, Device_Serial1, Device_Serial2;
 399:src/hw_config.c ****   
 400:src/hw_config.c ****   Device_Serial0 = *(uint32_t*)(0x1FFFF7E8);
 651              		.loc 1 400 0
 652 0000 124B     		ldr	r3, .L42
 653 0002 1A68     		ldr	r2, [r3]
 654              	.LVL45:
 401:src/hw_config.c ****   Device_Serial1 = *(uint32_t*)(0x1FFFF7EC);
 655              		.loc 1 401 0
 656 0004 0433     		adds	r3, r3, #4
 657 0006 1868     		ldr	r0, [r3]
 658              	.LVL46:
 402:src/hw_config.c ****   Device_Serial2 = *(uint32_t*)(0x1FFFF7F0);
 659              		.loc 1 402 0
 660 0008 0433     		adds	r3, r3, #4
 661 000a 1968     		ldr	r1, [r3]
 662              	.LVL47:
 403:src/hw_config.c ****   
 404:src/hw_config.c ****   if(Device_Serial0 != 0)
 663              		.loc 1 404 0
 664 000c EAB1     		cbz	r2, .L41
 397:src/hw_config.c ****   uint32_t Device_Serial0, Device_Serial1, Device_Serial2;
 665              		.loc 1 397 0
 666 000e 10B4     		push	{r4}
 667              	.LCFI20:
 668              		.cfi_def_cfa_offset 4
 669              		.cfi_offset 4, -4
 405:src/hw_config.c ****   {
 406:src/hw_config.c ****      CustomHID_StringSerial[2] = (uint8_t)(Device_Serial0 & 0x000000FF);  
 670              		.loc 1 406 0
 671 0010 0F4B     		ldr	r3, .L42+4
 672 0012 9A70     		strb	r2, [r3, #2]
 407:src/hw_config.c ****      CustomHID_StringSerial[4] = (uint8_t)((Device_Serial0 & 0x0000FF00) >> 8);
 673              		.loc 1 407 0
 674 0014 C2F30724 		ubfx	r4, r2, #8, #8
 675 0018 1C71     		strb	r4, [r3, #4]
 408:src/hw_config.c ****      CustomHID_StringSerial[6] = (uint8_t)((Device_Serial0 & 0x00FF0000) >> 16);
 676              		.loc 1 408 0
 677 001a C2F30744 		ubfx	r4, r2, #16, #8
 678 001e 9C71     		strb	r4, [r3, #6]
 409:src/hw_config.c ****      CustomHID_StringSerial[8] = (uint8_t)((Device_Serial0 & 0xFF000000) >> 24);  
 679              		.loc 1 409 0
 680 0020 120E     		lsrs	r2, r2, #24
 681              	.LVL48:
 682 0022 1A72     		strb	r2, [r3, #8]
 410:src/hw_config.c **** 
 411:src/hw_config.c ****      CustomHID_StringSerial[10] = (uint8_t)(Device_Serial1 & 0x000000FF);  
 683              		.loc 1 411 0
 684 0024 9872     		strb	r0, [r3, #10]
 412:src/hw_config.c ****      CustomHID_StringSerial[12] = (uint8_t)((Device_Serial1 & 0x0000FF00) >> 8);
 685              		.loc 1 412 0
 686 0026 C0F30722 		ubfx	r2, r0, #8, #8
 687 002a 1A73     		strb	r2, [r3, #12]
 413:src/hw_config.c ****      CustomHID_StringSerial[14] = (uint8_t)((Device_Serial1 & 0x00FF0000) >> 16);
 688              		.loc 1 413 0
 689 002c C0F30742 		ubfx	r2, r0, #16, #8
 690 0030 9A73     		strb	r2, [r3, #14]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 20


 414:src/hw_config.c ****      CustomHID_StringSerial[16] = (uint8_t)((Device_Serial1 & 0xFF000000) >> 24); 
 691              		.loc 1 414 0
 692 0032 000E     		lsrs	r0, r0, #24
 693              	.LVL49:
 694 0034 1874     		strb	r0, [r3, #16]
 415:src/hw_config.c **** 
 416:src/hw_config.c ****      CustomHID_StringSerial[18] = (uint8_t)(Device_Serial2 & 0x000000FF);  
 695              		.loc 1 416 0
 696 0036 9974     		strb	r1, [r3, #18]
 417:src/hw_config.c ****      CustomHID_StringSerial[20] = (uint8_t)((Device_Serial2 & 0x0000FF00) >> 8);
 697              		.loc 1 417 0
 698 0038 C1F30722 		ubfx	r2, r1, #8, #8
 699 003c 1A75     		strb	r2, [r3, #20]
 418:src/hw_config.c ****      CustomHID_StringSerial[22] = (uint8_t)((Device_Serial2 & 0x00FF0000) >> 16);
 700              		.loc 1 418 0
 701 003e C1F30742 		ubfx	r2, r1, #16, #8
 702 0042 9A75     		strb	r2, [r3, #22]
 419:src/hw_config.c ****      CustomHID_StringSerial[24] = (uint8_t)((Device_Serial2 & 0xFF000000) >> 24); 
 703              		.loc 1 419 0
 704 0044 090E     		lsrs	r1, r1, #24
 705              	.LVL50:
 706 0046 1976     		strb	r1, [r3, #24]
 420:src/hw_config.c ****   }   
 421:src/hw_config.c **** }
 707              		.loc 1 421 0
 708 0048 10BC     		pop	{r4}
 709              	.LCFI21:
 710              		.cfi_restore 4
 711              		.cfi_def_cfa_offset 0
 712              	.L41:
 713 004a 7047     		bx	lr
 714              	.L43:
 715              		.align	2
 716              	.L42:
 717 004c E8F7FF1F 		.word	536868840
 718 0050 00000000 		.word	CustomHID_StringSerial
 719              		.cfi_endproc
 720              	.LFE40:
 722              		.section	.text.Delay,"ax",%progbits
 723              		.align	2
 724              		.global	Delay
 725              		.thumb
 726              		.thumb_func
 728              	Delay:
 729              	.LFB41:
 422:src/hw_config.c **** 
 423:src/hw_config.c **** /**
 424:src/hw_config.c ****   * @brief  Inserts a delay time.
 425:src/hw_config.c ****   * @param  nTime: specifies the delay time length, in milliseconds.
 426:src/hw_config.c ****   * @retval None
 427:src/hw_config.c ****   */
 428:src/hw_config.c **** void Delay(__IO uint32_t nTime)
 429:src/hw_config.c **** { 
 730              		.loc 1 429 0
 731              		.cfi_startproc
 732              		@ args = 0, pretend = 0, frame = 8
 733              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 21


 734              		@ link register save eliminated.
 735              	.LVL51:
 736 0000 82B0     		sub	sp, sp, #8
 737              	.LCFI22:
 738              		.cfi_def_cfa_offset 8
 739 0002 0190     		str	r0, [sp, #4]
 430:src/hw_config.c ****   TimingDelay = nTime;
 740              		.loc 1 430 0
 741 0004 019A     		ldr	r2, [sp, #4]
 742 0006 044B     		ldr	r3, .L47
 743 0008 1A60     		str	r2, [r3]
 744              	.L45:
 431:src/hw_config.c **** 
 432:src/hw_config.c ****   while(TimingDelay != 0);
 745              		.loc 1 432 0 discriminator 1
 746 000a 034B     		ldr	r3, .L47
 747 000c 1B68     		ldr	r3, [r3]
 748 000e 002B     		cmp	r3, #0
 749 0010 FBD1     		bne	.L45
 433:src/hw_config.c **** }
 750              		.loc 1 433 0
 751 0012 02B0     		add	sp, sp, #8
 752              	.LCFI23:
 753              		.cfi_def_cfa_offset 0
 754              		@ sp needed
 755 0014 7047     		bx	lr
 756              	.L48:
 757 0016 00BF     		.align	2
 758              	.L47:
 759 0018 00000000 		.word	.LANCHOR0
 760              		.cfi_endproc
 761              	.LFE41:
 763              		.section	.text.delay_1_second,"ax",%progbits
 764              		.align	2
 765              		.global	delay_1_second
 766              		.thumb
 767              		.thumb_func
 769              	delay_1_second:
 770              	.LFB28:
  38:src/hw_config.c ****     Delay(1000);
 771              		.loc 1 38 0
 772              		.cfi_startproc
 773              		@ args = 0, pretend = 0, frame = 0
 774              		@ frame_needed = 0, uses_anonymous_args = 0
 775 0000 08B5     		push	{r3, lr}
 776              	.LCFI24:
 777              		.cfi_def_cfa_offset 8
 778              		.cfi_offset 3, -8
 779              		.cfi_offset 14, -4
  39:src/hw_config.c **** }
 780              		.loc 1 39 0
 781 0002 4FF47A70 		mov	r0, #1000
 782 0006 FFF7FEFF 		bl	Delay
 783              	.LVL52:
 784 000a 08BD     		pop	{r3, pc}
 785              		.cfi_endproc
 786              	.LFE28:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 22


 788              		.section	.text.delay_100_milli_second,"ax",%progbits
 789              		.align	2
 790              		.global	delay_100_milli_second
 791              		.thumb
 792              		.thumb_func
 794              	delay_100_milli_second:
 795              	.LFB29:
  43:src/hw_config.c ****     Delay(100);
 796              		.loc 1 43 0
 797              		.cfi_startproc
 798              		@ args = 0, pretend = 0, frame = 0
 799              		@ frame_needed = 0, uses_anonymous_args = 0
 800 0000 08B5     		push	{r3, lr}
 801              	.LCFI25:
 802              		.cfi_def_cfa_offset 8
 803              		.cfi_offset 3, -8
 804              		.cfi_offset 14, -4
  44:src/hw_config.c **** }
 805              		.loc 1 44 0
 806 0002 6420     		movs	r0, #100
 807 0004 FFF7FEFF 		bl	Delay
 808              	.LVL53:
 809 0008 08BD     		pop	{r3, pc}
 810              		.cfi_endproc
 811              	.LFE29:
 813 000a 00BF     		.section	.text.TimingDelay_Decrement,"ax",%progbits
 814              		.align	2
 815              		.global	TimingDelay_Decrement
 816              		.thumb
 817              		.thumb_func
 819              	TimingDelay_Decrement:
 820              	.LFB42:
 434:src/hw_config.c **** 
 435:src/hw_config.c **** /**
 436:src/hw_config.c ****   * @brief  Decrements the TimingDelay variable.
 437:src/hw_config.c ****   * @param  None
 438:src/hw_config.c ****   * @retval None
 439:src/hw_config.c ****   */
 440:src/hw_config.c **** void TimingDelay_Decrement(void)
 441:src/hw_config.c **** {
 821              		.loc 1 441 0
 822              		.cfi_startproc
 823              		@ args = 0, pretend = 0, frame = 0
 824              		@ frame_needed = 0, uses_anonymous_args = 0
 825              		@ link register save eliminated.
 442:src/hw_config.c ****   if (TimingDelay != 0x00)
 826              		.loc 1 442 0
 827 0000 034B     		ldr	r3, .L55
 828 0002 1B68     		ldr	r3, [r3]
 829 0004 1BB1     		cbz	r3, .L53
 443:src/hw_config.c ****   { 
 444:src/hw_config.c ****     TimingDelay--;
 830              		.loc 1 444 0
 831 0006 024A     		ldr	r2, .L55
 832 0008 1368     		ldr	r3, [r2]
 833 000a 013B     		subs	r3, r3, #1
 834 000c 1360     		str	r3, [r2]
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 23


 835              	.L53:
 836 000e 7047     		bx	lr
 837              	.L56:
 838              		.align	2
 839              	.L55:
 840 0010 00000000 		.word	.LANCHOR0
 841              		.cfi_endproc
 842              	.LFE42:
 844              		.section	.text.USART_GetCharacter,"ax",%progbits
 845              		.align	2
 846              		.global	USART_GetCharacter
 847              		.thumb
 848              		.thumb_func
 850              	USART_GetCharacter:
 851              	.LFB43:
 445:src/hw_config.c ****   }
 446:src/hw_config.c **** }
 447:src/hw_config.c **** 
 448:src/hw_config.c **** #ifdef  BOARD_DEF_MANGO_Z1
 449:src/hw_config.c **** /*******************************************************************************
 450:src/hw_config.c **** * Function Name  : SPIx_Init
 451:src/hw_config.c **** * Description    : Configures the different SDIO.
 452:src/hw_config.c **** * Input          : None
 453:src/hw_config.c **** * Output         : None
 454:src/hw_config.c **** * Return         : None
 455:src/hw_config.c **** *******************************************************************************/
 456:src/hw_config.c **** void SPIx_Init(void)
 457:src/hw_config.c **** {
 458:src/hw_config.c ****     DEBUG_MSG_FUNC_START;
 459:src/hw_config.c **** 
 460:src/hw_config.c ****     GPIO_InitTypeDef GPIO_InitStructure;
 461:src/hw_config.c ****     SPI_InitTypeDef  SPI_InitStructure;
 462:src/hw_config.c **** 
 463:src/hw_config.c ****     /* GPIOA, GPIOB and SPI1 clock enable */
 464:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_SPI1, ENABLE);
 465:src/hw_config.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);
 466:src/hw_config.c **** 
 467:src/hw_config.c ****     /* Configure SPI1 pins: SCK, MISO and MOSI ---------------------------------*/
 468:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin
 469:src/hw_config.c ****         = GPIO_RF_SPI_CLK_PIN | GPIO_RF_SPI_MISO_PIN | GPIO_RF_SPI_MOSI_PIN;
 470:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 471:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
 472:src/hw_config.c ****     GPIO_Init(GPIO_RF_SPI, &GPIO_InitStructure);
 473:src/hw_config.c **** 
 474:src/hw_config.c ****     /* Configure SPI1 pins: nCS ------------------------------------------------*/
 475:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin = GPIO_RF_SPI_NCS_PIN;
 476:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 477:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
 478:src/hw_config.c ****     GPIO_Init(GPIO_RF_SPI, &GPIO_InitStructure);
 479:src/hw_config.c **** 
 480:src/hw_config.c ****     /* Configure SPI1 pins: VREG_EN and RESETn ---------------------------------*/
 481:src/hw_config.c ****     GPIO_InitStructure.GPIO_Pin = GPIO_RF_RESET_PIN | GPIO_RF_VREG_EN_PIN;
 482:src/hw_config.c ****     GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 483:src/hw_config.c ****     GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
 484:src/hw_config.c ****     GPIO_Init(GPIO_RF_RESET, &GPIO_InitStructure);
 485:src/hw_config.c **** 
 486:src/hw_config.c ****     /* SPI1 Config -------------------------------------------------------------*/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 24


 487:src/hw_config.c ****     SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
 488:src/hw_config.c ****     SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
 489:src/hw_config.c ****     SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
 490:src/hw_config.c **** 
 491:src/hw_config.c ****     SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low;
 492:src/hw_config.c ****     SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge;
 493:src/hw_config.c **** 
 494:src/hw_config.c ****     SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
 495:src/hw_config.c ****     SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_16;   // 72MHz / 16 = 4.5MHz
 496:src/hw_config.c ****     SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
 497:src/hw_config.c ****     SPI_InitStructure.SPI_CRCPolynomial = 7;
 498:src/hw_config.c ****     SPI_Init(SPI1, &SPI_InitStructure);
 499:src/hw_config.c **** 
 500:src/hw_config.c ****     /* Enable SPI1 */
 501:src/hw_config.c ****     SPI_Cmd(SPI1, ENABLE);
 502:src/hw_config.c **** 
 503:src/hw_config.c ****     GPIO_SetBits(GPIO_RF_RESET, GPIO_RF_RESET_PIN);
 504:src/hw_config.c ****     GPIO_SetBits(GPIO_RF_VREG_EN, GPIO_RF_VREG_EN_PIN);
 505:src/hw_config.c **** }
 506:src/hw_config.c **** #endif /* BOARD_DEF_MANGO_Z1 */
 507:src/hw_config.c **** 
 508:src/hw_config.c **** 
 509:src/hw_config.c **** uint8_t USART_GetCharacter(USART_TypeDef *  usart_p)
 510:src/hw_config.c **** {
 852              		.loc 1 510 0
 853              		.cfi_startproc
 854              		@ args = 0, pretend = 0, frame = 0
 855              		@ frame_needed = 0, uses_anonymous_args = 0
 856              	.LVL54:
 857 0000 38B5     		push	{r3, r4, r5, lr}
 858              	.LCFI26:
 859              		.cfi_def_cfa_offset 16
 860              		.cfi_offset 3, -16
 861              		.cfi_offset 4, -12
 862              		.cfi_offset 5, -8
 863              		.cfi_offset 14, -4
 864 0002 0446     		mov	r4, r0
 865              	.LVL55:
 866              	.L58:
 511:src/hw_config.c ****     uint8_t data;
 512:src/hw_config.c **** 
 513:src/hw_config.c ****     /* Loop until the end of transmission */
 514:src/hw_config.c ****     while(USART_GetFlagStatus(usart_p, USART_FLAG_RXNE) == RESET);
 867              		.loc 1 514 0 discriminator 1
 868 0004 2021     		movs	r1, #32
 869 0006 2046     		mov	r0, r4
 870 0008 FFF7FEFF 		bl	USART_GetFlagStatus
 871              	.LVL56:
 872 000c 0028     		cmp	r0, #0
 873 000e F9D0     		beq	.L58
 515:src/hw_config.c **** 
 516:src/hw_config.c ****     /* Write a character to the USART */
 517:src/hw_config.c ****     data = USART_ReceiveData(usart_p);
 874              		.loc 1 517 0
 875 0010 2046     		mov	r0, r4
 876 0012 FFF7FEFF 		bl	USART_ReceiveData
 877              	.LVL57:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 25


 878 0016 C5B2     		uxtb	r5, r0
 879              	.LVL58:
 518:src/hw_config.c **** 
 519:src/hw_config.c ****     USART_SendData(usart_p, data);
 880              		.loc 1 519 0
 881 0018 2946     		mov	r1, r5
 882 001a 2046     		mov	r0, r4
 883 001c FFF7FEFF 		bl	USART_SendData
 884              	.LVL59:
 885              	.L59:
 520:src/hw_config.c ****     while(USART_GetFlagStatus(usart_p, USART_FLAG_TXE) == RESET);
 886              		.loc 1 520 0 discriminator 1
 887 0020 8021     		movs	r1, #128
 888 0022 2046     		mov	r0, r4
 889 0024 FFF7FEFF 		bl	USART_GetFlagStatus
 890              	.LVL60:
 891 0028 0028     		cmp	r0, #0
 892 002a F9D0     		beq	.L59
 521:src/hw_config.c **** 
 522:src/hw_config.c ****     if( data == '\r' )  return (int)('\n');
 893              		.loc 1 522 0
 894 002c 0D2D     		cmp	r5, #13
 895 002e 01D1     		bne	.L61
 896 0030 0A20     		movs	r0, #10
 897 0032 38BD     		pop	{r3, r4, r5, pc}
 898              	.LVL61:
 899              	.L61:
 523:src/hw_config.c ****     else                return(data);
 900              		.loc 1 523 0
 901 0034 2846     		mov	r0, r5
 524:src/hw_config.c **** }
 902              		.loc 1 524 0
 903 0036 38BD     		pop	{r3, r4, r5, pc}
 904              		.cfi_endproc
 905              	.LFE43:
 907              		.section	.text.__io_putchar,"ax",%progbits
 908              		.align	2
 909              		.global	__io_putchar
 910              		.thumb
 911              		.thumb_func
 913              	__io_putchar:
 914              	.LFB44:
 525:src/hw_config.c **** 
 526:src/hw_config.c **** //need to set int _write(int file, char* ch, int len)
 527:src/hw_config.c **** 
 528:src/hw_config.c **** /*
 529:src/hw_config.c ****  * Name   : putchar
 530:src/hw_config.c ****  * Input  : None
 531:src/hw_config.c ****  * Output : None
 532:src/hw_config.c ****  * Return : None
 533:src/hw_config.c ****  */
 534:src/hw_config.c **** PUTCHAR_PROTOTYPE
 535:src/hw_config.c **** {
 915              		.loc 1 535 0
 916              		.cfi_startproc
 917              		@ args = 0, pretend = 0, frame = 0
 918              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 26


 919              	.LVL62:
 920 0000 10B5     		push	{r4, lr}
 921              	.LCFI27:
 922              		.cfi_def_cfa_offset 8
 923              		.cfi_offset 4, -8
 924              		.cfi_offset 14, -4
 925 0002 0446     		mov	r4, r0
 536:src/hw_config.c ****     /* Write a character to the USART */  
 537:src/hw_config.c ****     if( ch == '\n') {
 926              		.loc 1 537 0
 927 0004 0A28     		cmp	r0, #10
 928 0006 0ED1     		bne	.L64
 538:src/hw_config.c ****         USART_SendData(USART1, '\r');
 929              		.loc 1 538 0
 930 0008 0D21     		movs	r1, #13
 931 000a 0F48     		ldr	r0, .L69
 932              	.LVL63:
 933 000c FFF7FEFF 		bl	USART_SendData
 934              	.LVL64:
 935              	.L65:
 539:src/hw_config.c ****         while(USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);
 936              		.loc 1 539 0 discriminator 1
 937 0010 8021     		movs	r1, #128
 938 0012 0D48     		ldr	r0, .L69
 939 0014 FFF7FEFF 		bl	USART_GetFlagStatus
 940              	.LVL65:
 941 0018 0028     		cmp	r0, #0
 942 001a F9D0     		beq	.L65
 540:src/hw_config.c ****         USART_SendData(USART1, '\n');
 943              		.loc 1 540 0
 944 001c 0A21     		movs	r1, #10
 945 001e 0A48     		ldr	r0, .L69
 946 0020 FFF7FEFF 		bl	USART_SendData
 947              	.LVL66:
 948 0024 03E0     		b	.L66
 949              	.LVL67:
 950              	.L64:
 541:src/hw_config.c ****     }else {
 542:src/hw_config.c ****         USART_SendData(USART1, (u8) ch);
 951              		.loc 1 542 0
 952 0026 C1B2     		uxtb	r1, r0
 953 0028 0748     		ldr	r0, .L69
 954              	.LVL68:
 955 002a FFF7FEFF 		bl	USART_SendData
 956              	.LVL69:
 957              	.L66:
 543:src/hw_config.c ****     }
 544:src/hw_config.c ****    USART_SendData(USART1, (uint8_t)ch);
 958              		.loc 1 544 0
 959 002e E1B2     		uxtb	r1, r4
 960 0030 0548     		ldr	r0, .L69
 961 0032 FFF7FEFF 		bl	USART_SendData
 962              	.LVL70:
 963              	.L67:
 545:src/hw_config.c **** 
 546:src/hw_config.c ****     /* Loop until the end of transmission */
 547:src/hw_config.c ****     while(USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 27


 964              		.loc 1 547 0 discriminator 1
 965 0036 8021     		movs	r1, #128
 966 0038 0348     		ldr	r0, .L69
 967 003a FFF7FEFF 		bl	USART_GetFlagStatus
 968              	.LVL71:
 969 003e 0028     		cmp	r0, #0
 970 0040 F9D0     		beq	.L67
 548:src/hw_config.c **** 
 549:src/hw_config.c ****     return ch;
 550:src/hw_config.c **** }
 971              		.loc 1 550 0
 972 0042 2046     		mov	r0, r4
 973 0044 10BD     		pop	{r4, pc}
 974              	.LVL72:
 975              	.L70:
 976 0046 00BF     		.align	2
 977              	.L69:
 978 0048 00380140 		.word	1073821696
 979              		.cfi_endproc
 980              	.LFE44:
 982              		.global	ADC_ConvertedValueX_1
 983              		.global	ADC_ConvertedValueX
 984              		.section	.bss.ADC_ConvertedValueX,"aw",%nobits
 985              		.align	2
 988              	ADC_ConvertedValueX:
 989 0000 00000000 		.space	4
 990              		.section	.bss.ADC_ConvertedValueX_1,"aw",%nobits
 991              		.align	2
 994              	ADC_ConvertedValueX_1:
 995 0000 00000000 		.space	4
 996              		.section	.bss.TimingDelay,"aw",%nobits
 997              		.align	2
 998              		.set	.LANCHOR0,. + 0
 1001              	TimingDelay:
 1002 0000 00000000 		.space	4
 1003              		.text
 1004              	.Letext0:
 1005              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/machine/_default_types
 1006              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/sys/_stdint.h"
 1007              		.file 4 "CMSIS/Core/CM3/stm32f10x.h"
 1008              		.file 5 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_exti.h"
 1009              		.file 6 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_gpio.h"
 1010              		.file 7 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_usart.h"
 1011              		.file 8 "STM32F10x_StdPeriph_Driver/inc/misc.h"
 1012              		.file 9 "STM32_USB-FS-Device_Driver/inc/usb_core.h"
 1013              		.file 10 "Inc/usb/usb_pwr.h"
 1014              		.file 11 "Inc/usb/usb_desc.h"
 1015              		.file 12 "CMSIS/Core/CM3/system_stm32f10x.h"
 1016              		.file 13 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_rcc.h"
 1017              		.file 14 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_pwr.h"
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 28


DEFINED SYMBOLS
                            *ABS*:0000000000000000 hw_config.c
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:20     .text.USART1_Init:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:25     .text.USART1_Init:0000000000000000 USART1_Init
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:75     .text.USART1_Init:0000000000000038 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:80     .text.RCC_Configuration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:85     .text.RCC_Configuration:0000000000000000 RCC_Configuration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:139    .text.NVIC_Configuration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:144    .text.NVIC_Configuration:0000000000000000 NVIC_Configuration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:206    .text.Set_USBClock:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:211    .text.Set_USBClock:0000000000000000 Set_USBClock
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:236    .text.Enter_LowPowerMode:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:241    .text.Enter_LowPowerMode:0000000000000000 Enter_LowPowerMode
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:265    .text.Enter_LowPowerMode:0000000000000014 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:270    .text.Leave_LowPowerMode:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:275    .text.Leave_LowPowerMode:0000000000000000 Leave_LowPowerMode
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:333    .text.Leave_LowPowerMode:0000000000000044 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:339    .text.USB_Interrupts_Config:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:344    .text.USB_Interrupts_Config:0000000000000000 USB_Interrupts_Config
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:414    .text.USB_Cable_Config:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:419    .text.USB_Cable_Config:0000000000000000 USB_Cable_Config
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:452    .text.USB_Cable_Config:000000000000001c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:457    .text.GPIO_Configuration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:462    .text.GPIO_Configuration:0000000000000000 GPIO_Configuration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:548    .text.GPIO_Configuration:0000000000000088 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:554    .text.EXTI_Configuration:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:559    .text.EXTI_Configuration:0000000000000000 EXTI_Configuration
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:639    .text.Get_SerialNum:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:644    .text.Get_SerialNum:0000000000000000 Get_SerialNum
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:717    .text.Get_SerialNum:000000000000004c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:723    .text.Delay:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:728    .text.Delay:0000000000000000 Delay
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:759    .text.Delay:0000000000000018 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:764    .text.delay_1_second:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:769    .text.delay_1_second:0000000000000000 delay_1_second
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:789    .text.delay_100_milli_second:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:794    .text.delay_100_milli_second:0000000000000000 delay_100_milli_second
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:814    .text.TimingDelay_Decrement:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:819    .text.TimingDelay_Decrement:0000000000000000 TimingDelay_Decrement
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:840    .text.TimingDelay_Decrement:0000000000000010 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:845    .text.USART_GetCharacter:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:850    .text.USART_GetCharacter:0000000000000000 USART_GetCharacter
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:908    .text.__io_putchar:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:913    .text.__io_putchar:0000000000000000 __io_putchar
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:978    .text.__io_putchar:0000000000000048 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:994    .bss.ADC_ConvertedValueX_1:0000000000000000 ADC_ConvertedValueX_1
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:988    .bss.ADC_ConvertedValueX:0000000000000000 ADC_ConvertedValueX
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:985    .bss.ADC_ConvertedValueX:0000000000000000 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:991    .bss.ADC_ConvertedValueX_1:0000000000000000 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:997    .bss.TimingDelay:0000000000000000 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s:1001   .bss.TimingDelay:0000000000000000 TimingDelay
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
USART_Init
USART_Cmd
SystemInit
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccJa4XFu.s 			page 29


RCC_APB2PeriphClockCmd
RCC_AHBPeriphClockCmd
NVIC_SetVectorTable
NVIC_PriorityGroupConfig
NVIC_Init
RCC_USBCLKConfig
RCC_APB1PeriphClockCmd
PWR_EnterSTOPMode
bDeviceState
RCC_HSEConfig
RCC_WaitForHSEStartUp
RCC_PLLCmd
RCC_GetFlagStatus
RCC_SYSCLKConfig
RCC_GetSYSCLKSource
Device_Info
GPIO_ResetBits
GPIO_SetBits
GPIO_Init
GPIO_EXTILineConfig
EXTI_Init
EXTI_ClearITPendingBit
CustomHID_StringSerial
USART_GetFlagStatus
USART_ReceiveData
USART_SendData
