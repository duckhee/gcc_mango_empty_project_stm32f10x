ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"spi_flash.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SPI_FLASH_ChipSelect,"ax",%progbits
  20              		.align	2
  21              		.global	SPI_FLASH_ChipSelect
  22              		.thumb
  23              		.thumb_func
  25              	SPI_FLASH_ChipSelect:
  26              	.LFB36:
  27              		.file 1 "FreeRTOS/parTest/spi_flash.c"
   1:FreeRTOS/parTest/spi_flash.c **** /******************** (C) COPYRIGHT 2007 STMicroelectronics ********************
   2:FreeRTOS/parTest/spi_flash.c **** * File Name          : spi_flash.c
   3:FreeRTOS/parTest/spi_flash.c **** * Author             : MCD Application Team
   4:FreeRTOS/parTest/spi_flash.c **** * Date First Issued  : 02/05/2007
   5:FreeRTOS/parTest/spi_flash.c **** * Description        : This file provides a set of functions needed to manage the
   6:FreeRTOS/parTest/spi_flash.c **** *                      communication between SPI peripheral and SPI M25P64 FLASH.
   7:FreeRTOS/parTest/spi_flash.c **** ********************************************************************************
   8:FreeRTOS/parTest/spi_flash.c **** * History:
   9:FreeRTOS/parTest/spi_flash.c **** * 04/02/2007: V0.2
  10:FreeRTOS/parTest/spi_flash.c **** * 02/05/2007: V0.1
  11:FreeRTOS/parTest/spi_flash.c **** ********************************************************************************
  12:FreeRTOS/parTest/spi_flash.c **** * THE PRESENT SOFTWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  13:FreeRTOS/parTest/spi_flash.c **** * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
  14:FreeRTOS/parTest/spi_flash.c **** * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
  15:FreeRTOS/parTest/spi_flash.c **** * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
  16:FreeRTOS/parTest/spi_flash.c **** * CONTENT OF SUCH SOFTWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
  17:FreeRTOS/parTest/spi_flash.c **** * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  18:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
  19:FreeRTOS/parTest/spi_flash.c **** 
  20:FreeRTOS/parTest/spi_flash.c **** /* Includes ------------------------------------------------------------------*/
  21:FreeRTOS/parTest/spi_flash.c **** #include "spi_flash.h"
  22:FreeRTOS/parTest/spi_flash.c **** 
  23:FreeRTOS/parTest/spi_flash.c **** /* Private typedef -----------------------------------------------------------*/
  24:FreeRTOS/parTest/spi_flash.c **** #define SPI_FLASH_PageSize 256
  25:FreeRTOS/parTest/spi_flash.c **** 
  26:FreeRTOS/parTest/spi_flash.c **** #define WRITE      0x02  /* Write to Memory instruction */
  27:FreeRTOS/parTest/spi_flash.c **** #define WRSR       0x01  /* Write Status Register instruction */ 
  28:FreeRTOS/parTest/spi_flash.c **** #define WREN       0x06  /* Write enable instruction */
  29:FreeRTOS/parTest/spi_flash.c **** 
  30:FreeRTOS/parTest/spi_flash.c **** #define READ       0x03  /* Read from Memory instruction */
  31:FreeRTOS/parTest/spi_flash.c **** #define RDSR       0x05  /* Read Status Register instruction  */
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 2


  32:FreeRTOS/parTest/spi_flash.c **** #define RDID       0x9F  /* Read identification */
  33:FreeRTOS/parTest/spi_flash.c **** #define SE         0xD8  /* Sector Erase instruction */
  34:FreeRTOS/parTest/spi_flash.c **** #define BE         0xC7  /* Bulk Erase instruction */
  35:FreeRTOS/parTest/spi_flash.c **** 
  36:FreeRTOS/parTest/spi_flash.c **** #define WIP_Flag   0x01  /* Write In Progress (WIP) flag */
  37:FreeRTOS/parTest/spi_flash.c **** 
  38:FreeRTOS/parTest/spi_flash.c **** #define Dummy_Byte 0xA5
  39:FreeRTOS/parTest/spi_flash.c **** 
  40:FreeRTOS/parTest/spi_flash.c **** /* Private define ------------------------------------------------------------*/
  41:FreeRTOS/parTest/spi_flash.c **** /* Private macro -------------------------------------------------------------*/
  42:FreeRTOS/parTest/spi_flash.c **** /* Private variables ---------------------------------------------------------*/
  43:FreeRTOS/parTest/spi_flash.c **** /* Private function prototypes -----------------------------------------------*/
  44:FreeRTOS/parTest/spi_flash.c **** /* Private functions ---------------------------------------------------------*/
  45:FreeRTOS/parTest/spi_flash.c **** 
  46:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
  47:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_Init
  48:FreeRTOS/parTest/spi_flash.c **** * Description    : Initializes the peripherals used by the SPI FLASH driver.
  49:FreeRTOS/parTest/spi_flash.c **** * Input          : None
  50:FreeRTOS/parTest/spi_flash.c **** * Output         : None
  51:FreeRTOS/parTest/spi_flash.c **** * Return         : None
  52:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
  53:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_Init(void)
  54:FreeRTOS/parTest/spi_flash.c **** {
  55:FreeRTOS/parTest/spi_flash.c ****   SPI_InitTypeDef  SPI_InitStructure;
  56:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitTypeDef GPIO_InitStructure;
  57:FreeRTOS/parTest/spi_flash.c ****    
  58:FreeRTOS/parTest/spi_flash.c ****   /* Enable SPI1 and GPIOA clocks */
  59:FreeRTOS/parTest/spi_flash.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1 | RCC_APB2Periph_GPIOA, ENABLE);
  60:FreeRTOS/parTest/spi_flash.c ****   
  61:FreeRTOS/parTest/spi_flash.c ****   /* Configure SPI1 pins: NSS, SCK, MISO and MOSI */
  62:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7;
  63:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  64:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  65:FreeRTOS/parTest/spi_flash.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
  66:FreeRTOS/parTest/spi_flash.c **** 
  67:FreeRTOS/parTest/spi_flash.c ****   /* Configure PA.4 as Output push-pull, used as Flash Chip select */
  68:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  69:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  70:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  71:FreeRTOS/parTest/spi_flash.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
  72:FreeRTOS/parTest/spi_flash.c **** 
  73:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
  74:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);
  75:FreeRTOS/parTest/spi_flash.c **** 
  76:FreeRTOS/parTest/spi_flash.c ****   /* SPI1 configuration */ 
  77:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
  78:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
  79:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
  80:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CPOL = SPI_CPOL_High;
  81:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CPHA = SPI_CPHA_2Edge;
  82:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
  83:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_4;
  84:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
  85:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CRCPolynomial = 7;
  86:FreeRTOS/parTest/spi_flash.c ****   SPI_Init(SPI1, &SPI_InitStructure);
  87:FreeRTOS/parTest/spi_flash.c ****   
  88:FreeRTOS/parTest/spi_flash.c ****   /* Enable SPI1  */
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 3


  89:FreeRTOS/parTest/spi_flash.c ****   SPI_Cmd(SPI1, ENABLE);   
  90:FreeRTOS/parTest/spi_flash.c **** }
  91:FreeRTOS/parTest/spi_flash.c **** 
  92:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
  93:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_SectorErase
  94:FreeRTOS/parTest/spi_flash.c **** * Description    : Erases the specified FLASH sector.
  95:FreeRTOS/parTest/spi_flash.c **** * Input          : SectorAddr: address of the sector to erase.
  96:FreeRTOS/parTest/spi_flash.c **** * Output         : None
  97:FreeRTOS/parTest/spi_flash.c **** * Return         : None
  98:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
  99:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_SectorErase(u32 SectorAddr)
 100:FreeRTOS/parTest/spi_flash.c **** {
 101:FreeRTOS/parTest/spi_flash.c ****   /* Send write enable instruction */
 102:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WriteEnable();
 103:FreeRTOS/parTest/spi_flash.c **** 			
 104:FreeRTOS/parTest/spi_flash.c ****   /* Sector Erase */ 
 105:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 106:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);		
 107:FreeRTOS/parTest/spi_flash.c ****   /* Send Sector Erase instruction  */
 108:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(SE);
 109:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr high nibble address byte */
 110:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((SectorAddr & 0xFF0000) >> 16);
 111:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr medium nibble address byte */
 112:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((SectorAddr & 0xFF00) >> 8);
 113:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr low nibble address byte */
 114:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(SectorAddr & 0xFF);
 115:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 116:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);	
 117:FreeRTOS/parTest/spi_flash.c **** 
 118:FreeRTOS/parTest/spi_flash.c ****   /* Wait the end of Flash writing */
 119:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WaitForWriteEnd();	
 120:FreeRTOS/parTest/spi_flash.c **** }
 121:FreeRTOS/parTest/spi_flash.c **** 
 122:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 123:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_BulkErase
 124:FreeRTOS/parTest/spi_flash.c **** * Description    : Erases the entire FLASH.
 125:FreeRTOS/parTest/spi_flash.c **** * Input          : None
 126:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 127:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 128:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 129:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_BulkErase(void)
 130:FreeRTOS/parTest/spi_flash.c **** { 	
 131:FreeRTOS/parTest/spi_flash.c ****   /* Send write enable instruction */
 132:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WriteEnable();	
 133:FreeRTOS/parTest/spi_flash.c **** 	
 134:FreeRTOS/parTest/spi_flash.c ****   /* Bulk Erase */ 
 135:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 136:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);		
 137:FreeRTOS/parTest/spi_flash.c ****   /* Send Bulk Erase instruction  */
 138:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(BE);
 139:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 140:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);	
 141:FreeRTOS/parTest/spi_flash.c **** 		
 142:FreeRTOS/parTest/spi_flash.c ****   /* Wait the end of Flash writing */
 143:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WaitForWriteEnd();		
 144:FreeRTOS/parTest/spi_flash.c **** }
 145:FreeRTOS/parTest/spi_flash.c **** 
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 4


 146:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 147:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_PageWrite
 148:FreeRTOS/parTest/spi_flash.c **** * Description    : Writes more than one byte to the FLASH with a single WRITE
 149:FreeRTOS/parTest/spi_flash.c **** *                  cycle(Page WRITE sequence). The number of byte can't exceed
 150:FreeRTOS/parTest/spi_flash.c **** *                  the FLASH page size.
 151:FreeRTOS/parTest/spi_flash.c **** * Input          : - pBuffer : pointer to the buffer  containing the data to be 
 152:FreeRTOS/parTest/spi_flash.c **** *                    written to the FLASH.
 153:FreeRTOS/parTest/spi_flash.c **** *                  - WriteAddr : FLASH's internal address to write to.
 154:FreeRTOS/parTest/spi_flash.c **** *                  - NumByteToWrite : number of bytes to write to the FLASH,
 155:FreeRTOS/parTest/spi_flash.c **** *                    must be equal or less than "SPI_FLASH_PageSize" value. 
 156:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 157:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 158:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 159:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_PageWrite(u8* pBuffer, u32 WriteAddr, u16 NumByteToWrite)
 160:FreeRTOS/parTest/spi_flash.c **** {
 161:FreeRTOS/parTest/spi_flash.c ****   /* Enable the write access to the FLASH */
 162:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WriteEnable();		
 163:FreeRTOS/parTest/spi_flash.c ****   
 164:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 165:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);	   
 166:FreeRTOS/parTest/spi_flash.c ****   /* Send "Write to Memory " instruction */    
 167:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(WRITE);	
 168:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr high nibble address byte to write to */
 169:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((WriteAddr & 0xFF0000) >> 16);
 170:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr medium nibble address byte to write to */
 171:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((WriteAddr & 0xFF00) >> 8);  
 172:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr low nibble address byte to write to */
 173:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(WriteAddr & 0xFF);             
 174:FreeRTOS/parTest/spi_flash.c ****   
 175:FreeRTOS/parTest/spi_flash.c ****   /* while there is data to be written on the FLASH */
 176:FreeRTOS/parTest/spi_flash.c ****   while(NumByteToWrite--) 
 177:FreeRTOS/parTest/spi_flash.c ****   {
 178:FreeRTOS/parTest/spi_flash.c ****     /* Send the current byte */			
 179:FreeRTOS/parTest/spi_flash.c ****     SPI_FLASH_SendByte(*pBuffer); 	               
 180:FreeRTOS/parTest/spi_flash.c ****     /* Point on the next byte to be written */
 181:FreeRTOS/parTest/spi_flash.c ****     pBuffer++; 
 182:FreeRTOS/parTest/spi_flash.c ****   }		
 183:FreeRTOS/parTest/spi_flash.c ****   
 184:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 185:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);
 186:FreeRTOS/parTest/spi_flash.c ****   
 187:FreeRTOS/parTest/spi_flash.c ****   /* Wait the end of Flash writing */
 188:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_WaitForWriteEnd();	
 189:FreeRTOS/parTest/spi_flash.c **** }
 190:FreeRTOS/parTest/spi_flash.c **** 
 191:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 192:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_BufferWrite
 193:FreeRTOS/parTest/spi_flash.c **** * Description    : Writes block of data to the FLASH. In this function, the
 194:FreeRTOS/parTest/spi_flash.c **** *                  number of WRITE cycles are reduced, using Page WRITE sequence.
 195:FreeRTOS/parTest/spi_flash.c **** * Input          : - pBuffer : pointer to the buffer  containing the data to be 
 196:FreeRTOS/parTest/spi_flash.c **** *                    written to the FLASH.
 197:FreeRTOS/parTest/spi_flash.c **** *                  - WriteAddr : FLASH's internal address to write to.
 198:FreeRTOS/parTest/spi_flash.c **** *                  - NumByteToWrite : number of bytes to write to the FLASH.
 199:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 200:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 201:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 202:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_BufferWrite(u8* pBuffer, u32 WriteAddr, u16 NumByteToWrite)
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 5


 203:FreeRTOS/parTest/spi_flash.c **** {
 204:FreeRTOS/parTest/spi_flash.c ****   u8 NumOfPage = 0, NumOfSingle = 0, Addr = 0, count = 0, temp = 0;
 205:FreeRTOS/parTest/spi_flash.c **** 
 206:FreeRTOS/parTest/spi_flash.c ****   Addr = WriteAddr % SPI_FLASH_PageSize;
 207:FreeRTOS/parTest/spi_flash.c ****   count = SPI_FLASH_PageSize - Addr;
 208:FreeRTOS/parTest/spi_flash.c ****   NumOfPage =  NumByteToWrite / SPI_FLASH_PageSize;
 209:FreeRTOS/parTest/spi_flash.c ****   NumOfSingle = NumByteToWrite % SPI_FLASH_PageSize;
 210:FreeRTOS/parTest/spi_flash.c ****   
 211:FreeRTOS/parTest/spi_flash.c ****   if(Addr == 0) /* WriteAddr is SPI_FLASH_PageSize aligned  */
 212:FreeRTOS/parTest/spi_flash.c ****   {
 213:FreeRTOS/parTest/spi_flash.c ****     if(NumOfPage == 0) /* NumByteToWrite < SPI_FLASH_PageSize */
 214:FreeRTOS/parTest/spi_flash.c ****     {
 215:FreeRTOS/parTest/spi_flash.c ****       SPI_FLASH_PageWrite(pBuffer, WriteAddr, NumByteToWrite);
 216:FreeRTOS/parTest/spi_flash.c ****     }
 217:FreeRTOS/parTest/spi_flash.c ****     else /* NumByteToWrite > SPI_FLASH_PageSize */ 
 218:FreeRTOS/parTest/spi_flash.c ****     {
 219:FreeRTOS/parTest/spi_flash.c ****       while(NumOfPage--)
 220:FreeRTOS/parTest/spi_flash.c ****       {
 221:FreeRTOS/parTest/spi_flash.c ****         SPI_FLASH_PageWrite(pBuffer, WriteAddr, SPI_FLASH_PageSize);
 222:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  SPI_FLASH_PageSize;
 223:FreeRTOS/parTest/spi_flash.c ****         pBuffer += SPI_FLASH_PageSize;  
 224:FreeRTOS/parTest/spi_flash.c ****       }    
 225:FreeRTOS/parTest/spi_flash.c ****      
 226:FreeRTOS/parTest/spi_flash.c ****       SPI_FLASH_PageWrite(pBuffer, WriteAddr, NumOfSingle);      
 227:FreeRTOS/parTest/spi_flash.c ****    }
 228:FreeRTOS/parTest/spi_flash.c ****   }
 229:FreeRTOS/parTest/spi_flash.c ****   else /* WriteAddr is not SPI_FLASH_PageSize aligned  */
 230:FreeRTOS/parTest/spi_flash.c ****   {
 231:FreeRTOS/parTest/spi_flash.c ****     if(NumOfPage== 0) /* NumByteToWrite < SPI_FLASH_PageSize */
 232:FreeRTOS/parTest/spi_flash.c ****     {
 233:FreeRTOS/parTest/spi_flash.c ****       if(NumOfSingle > count) /* (NumByteToWrite + WriteAddr) > SPI_FLASH_PageSize */
 234:FreeRTOS/parTest/spi_flash.c ****       {
 235:FreeRTOS/parTest/spi_flash.c ****       	temp = NumOfSingle - count;
 236:FreeRTOS/parTest/spi_flash.c ****       	
 237:FreeRTOS/parTest/spi_flash.c ****       	SPI_FLASH_PageWrite(pBuffer, WriteAddr, count);
 238:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  count;
 239:FreeRTOS/parTest/spi_flash.c ****         pBuffer += count; 
 240:FreeRTOS/parTest/spi_flash.c ****         
 241:FreeRTOS/parTest/spi_flash.c ****         SPI_FLASH_PageWrite(pBuffer, WriteAddr, temp);       	
 242:FreeRTOS/parTest/spi_flash.c ****       }
 243:FreeRTOS/parTest/spi_flash.c ****       else
 244:FreeRTOS/parTest/spi_flash.c ****       {
 245:FreeRTOS/parTest/spi_flash.c ****       	SPI_FLASH_PageWrite(pBuffer, WriteAddr, NumByteToWrite);
 246:FreeRTOS/parTest/spi_flash.c ****       }
 247:FreeRTOS/parTest/spi_flash.c ****     }
 248:FreeRTOS/parTest/spi_flash.c ****     else /* NumByteToWrite > SPI_FLASH_PageSize */
 249:FreeRTOS/parTest/spi_flash.c ****     {
 250:FreeRTOS/parTest/spi_flash.c ****       NumByteToWrite -= count;
 251:FreeRTOS/parTest/spi_flash.c ****       NumOfPage =  NumByteToWrite / SPI_FLASH_PageSize;
 252:FreeRTOS/parTest/spi_flash.c ****       NumOfSingle = NumByteToWrite % SPI_FLASH_PageSize;	
 253:FreeRTOS/parTest/spi_flash.c ****       
 254:FreeRTOS/parTest/spi_flash.c ****       SPI_FLASH_PageWrite(pBuffer, WriteAddr, count);
 255:FreeRTOS/parTest/spi_flash.c ****       WriteAddr +=  count;
 256:FreeRTOS/parTest/spi_flash.c ****       pBuffer += count;  
 257:FreeRTOS/parTest/spi_flash.c ****      
 258:FreeRTOS/parTest/spi_flash.c ****       while(NumOfPage--)
 259:FreeRTOS/parTest/spi_flash.c ****       {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 6


 260:FreeRTOS/parTest/spi_flash.c ****         SPI_FLASH_PageWrite(pBuffer, WriteAddr, SPI_FLASH_PageSize);
 261:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  SPI_FLASH_PageSize;
 262:FreeRTOS/parTest/spi_flash.c ****         pBuffer += SPI_FLASH_PageSize;  
 263:FreeRTOS/parTest/spi_flash.c ****       }
 264:FreeRTOS/parTest/spi_flash.c ****       
 265:FreeRTOS/parTest/spi_flash.c ****       if(NumOfSingle != 0)
 266:FreeRTOS/parTest/spi_flash.c ****       {
 267:FreeRTOS/parTest/spi_flash.c ****         SPI_FLASH_PageWrite(pBuffer, WriteAddr, NumOfSingle);
 268:FreeRTOS/parTest/spi_flash.c ****       }
 269:FreeRTOS/parTest/spi_flash.c ****     }
 270:FreeRTOS/parTest/spi_flash.c ****   }      	
 271:FreeRTOS/parTest/spi_flash.c **** }
 272:FreeRTOS/parTest/spi_flash.c **** 
 273:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 274:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_BufferRead
 275:FreeRTOS/parTest/spi_flash.c **** * Description    : Reads a block of data from the FLASH.
 276:FreeRTOS/parTest/spi_flash.c **** * Input          : - pBuffer : pointer to the buffer that receives the data read 
 277:FreeRTOS/parTest/spi_flash.c **** *                    from the FLASH.
 278:FreeRTOS/parTest/spi_flash.c **** *                  - ReadAddr : FLASH's internal address to read from.
 279:FreeRTOS/parTest/spi_flash.c **** *                  - NumByteToRead : number of bytes to read from the FLASH.
 280:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 281:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 282:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 283:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_BufferRead(u8* pBuffer, u32 ReadAddr, u16 NumByteToRead)
 284:FreeRTOS/parTest/spi_flash.c **** {
 285:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 286:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);	   
 287:FreeRTOS/parTest/spi_flash.c ****   
 288:FreeRTOS/parTest/spi_flash.c ****   /* Send "Read from Memory " instruction */
 289:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(READ);	 
 290:FreeRTOS/parTest/spi_flash.c ****   
 291:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr high nibble address byte to read from */
 292:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((ReadAddr & 0xFF0000) >> 16);
 293:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr medium nibble address byte to read from */
 294:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((ReadAddr& 0xFF00) >> 8);  
 295:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr low nibble address byte to read from */
 296:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(ReadAddr & 0xFF);     
 297:FreeRTOS/parTest/spi_flash.c ****    	
 298:FreeRTOS/parTest/spi_flash.c ****   while(NumByteToRead--) /* while there is data to be read */
 299:FreeRTOS/parTest/spi_flash.c ****   {
 300:FreeRTOS/parTest/spi_flash.c ****     /* Read a byte from the FLASH */			
 301:FreeRTOS/parTest/spi_flash.c ****     *pBuffer = SPI_FLASH_SendByte(Dummy_Byte);   
 302:FreeRTOS/parTest/spi_flash.c ****     /* Point to the next location where the byte read will be saved */
 303:FreeRTOS/parTest/spi_flash.c ****     pBuffer++;
 304:FreeRTOS/parTest/spi_flash.c ****   }	
 305:FreeRTOS/parTest/spi_flash.c ****   
 306:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 307:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);		
 308:FreeRTOS/parTest/spi_flash.c **** }
 309:FreeRTOS/parTest/spi_flash.c **** 
 310:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 311:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_ReadID
 312:FreeRTOS/parTest/spi_flash.c **** * Description    : Reads FLASH identification.
 313:FreeRTOS/parTest/spi_flash.c **** * Input          : None
 314:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 315:FreeRTOS/parTest/spi_flash.c **** * Return         : FLASH identification
 316:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 7


 317:FreeRTOS/parTest/spi_flash.c **** u32 SPI_FLASH_ReadID(void)
 318:FreeRTOS/parTest/spi_flash.c **** {   	 
 319:FreeRTOS/parTest/spi_flash.c ****   u32 Temp = 0, Temp0 = 0, Temp1 = 0, Temp2 = 0;
 320:FreeRTOS/parTest/spi_flash.c **** 
 321:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 322:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);	   
 323:FreeRTOS/parTest/spi_flash.c ****   
 324:FreeRTOS/parTest/spi_flash.c ****   /* Send "RDID " instruction */
 325:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(0x9F);
 326:FreeRTOS/parTest/spi_flash.c **** 
 327:FreeRTOS/parTest/spi_flash.c ****   /* Read a byte from the FLASH */			
 328:FreeRTOS/parTest/spi_flash.c ****   Temp0 = SPI_FLASH_SendByte(Dummy_Byte);
 329:FreeRTOS/parTest/spi_flash.c **** 
 330:FreeRTOS/parTest/spi_flash.c ****   /* Read a byte from the FLASH */			
 331:FreeRTOS/parTest/spi_flash.c ****   Temp1 = SPI_FLASH_SendByte(Dummy_Byte);
 332:FreeRTOS/parTest/spi_flash.c **** 
 333:FreeRTOS/parTest/spi_flash.c ****   /* Read a byte from the FLASH */			
 334:FreeRTOS/parTest/spi_flash.c ****   Temp2 = SPI_FLASH_SendByte(Dummy_Byte);
 335:FreeRTOS/parTest/spi_flash.c **** 
 336:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 337:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);
 338:FreeRTOS/parTest/spi_flash.c ****          
 339:FreeRTOS/parTest/spi_flash.c ****   Temp = (Temp0 << 16) | (Temp1 << 8) | Temp2;
 340:FreeRTOS/parTest/spi_flash.c **** 
 341:FreeRTOS/parTest/spi_flash.c ****   return Temp;
 342:FreeRTOS/parTest/spi_flash.c **** }
 343:FreeRTOS/parTest/spi_flash.c **** 
 344:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 345:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_StartReadSequence
 346:FreeRTOS/parTest/spi_flash.c **** * Description    : Initiates a read data byte (READ) sequence from the Flash.
 347:FreeRTOS/parTest/spi_flash.c **** *                  This is done by driving the /CS line low to select the device,
 348:FreeRTOS/parTest/spi_flash.c **** *                  then the READ instruction is transmitted followed by 3 bytes
 349:FreeRTOS/parTest/spi_flash.c **** *                  address. This function exit and keep the /CS line low, so the
 350:FreeRTOS/parTest/spi_flash.c **** *                  Flash still being selected. With this technique the whole
 351:FreeRTOS/parTest/spi_flash.c **** *                  content of the Flash is read with a single READ instruction.
 352:FreeRTOS/parTest/spi_flash.c **** * Input          : - ReadAddr : FLASH's internal address to read from.
 353:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 354:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 355:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 356:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_StartReadSequence(u32 ReadAddr)
 357:FreeRTOS/parTest/spi_flash.c **** {
 358:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 359:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);	   
 360:FreeRTOS/parTest/spi_flash.c ****   
 361:FreeRTOS/parTest/spi_flash.c ****   /* Send "Read from Memory " instruction */
 362:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(READ);	 
 363:FreeRTOS/parTest/spi_flash.c **** 
 364:FreeRTOS/parTest/spi_flash.c **** /* Send the 24-bit address of the address to read from -----------------------*/  
 365:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr high nibble address byte */
 366:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((ReadAddr & 0xFF0000) >> 16);
 367:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr medium nibble address byte */
 368:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte((ReadAddr& 0xFF00) >> 8);  
 369:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr low nibble address byte */
 370:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(ReadAddr & 0xFF);  
 371:FreeRTOS/parTest/spi_flash.c **** }
 372:FreeRTOS/parTest/spi_flash.c **** 
 373:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 8


 374:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_ReadByte
 375:FreeRTOS/parTest/spi_flash.c **** * Description    : Reads a byte from the SPI Flash.
 376:FreeRTOS/parTest/spi_flash.c **** *                  This function must be used only if the Start_Read_Sequence
 377:FreeRTOS/parTest/spi_flash.c **** *                  function has been previously called.
 378:FreeRTOS/parTest/spi_flash.c **** * Input          : None
 379:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 380:FreeRTOS/parTest/spi_flash.c **** * Return         : Byte Read from the SPI Flash.
 381:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 382:FreeRTOS/parTest/spi_flash.c **** u8 SPI_FLASH_ReadByte(void)
 383:FreeRTOS/parTest/spi_flash.c **** {
 384:FreeRTOS/parTest/spi_flash.c ****   return (SPI_FLASH_SendByte(Dummy_Byte));
 385:FreeRTOS/parTest/spi_flash.c **** }
 386:FreeRTOS/parTest/spi_flash.c **** 
 387:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 388:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_ChipSelect
 389:FreeRTOS/parTest/spi_flash.c **** * Description    : Selects or deselects the FLASH.
 390:FreeRTOS/parTest/spi_flash.c **** * Input          : State : level to be applied on the FLASH's ChipSelect pin.
 391:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 392:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 393:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 394:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_ChipSelect(u8 State)
 395:FreeRTOS/parTest/spi_flash.c **** {
  28              		.loc 1 395 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
 396:FreeRTOS/parTest/spi_flash.c ****   /* Set High or low the chip select line on PA.4 pin */
 397:FreeRTOS/parTest/spi_flash.c ****   GPIO_WriteBit(GPIOA, GPIO_Pin_4, (BitAction)State);
  38              		.loc 1 397 0
  39 0002 0246     		mov	r2, r0
  40 0004 1021     		movs	r1, #16
  41 0006 0248     		ldr	r0, .L3
  42              	.LVL1:
  43 0008 FFF7FEFF 		bl	GPIO_WriteBit
  44              	.LVL2:
  45 000c 08BD     		pop	{r3, pc}
  46              	.L4:
  47 000e 00BF     		.align	2
  48              	.L3:
  49 0010 00080140 		.word	1073809408
  50              		.cfi_endproc
  51              	.LFE36:
  53              		.section	.text.SPI_FLASH_Init,"ax",%progbits
  54              		.align	2
  55              		.global	SPI_FLASH_Init
  56              		.thumb
  57              		.thumb_func
  59              	SPI_FLASH_Init:
  60              	.LFB27:
  54:FreeRTOS/parTest/spi_flash.c ****   SPI_InitTypeDef  SPI_InitStructure;
  61              		.loc 1 54 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 9


  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 24
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65 0000 30B5     		push	{r4, r5, lr}
  66              	.LCFI1:
  67              		.cfi_def_cfa_offset 12
  68              		.cfi_offset 4, -12
  69              		.cfi_offset 5, -8
  70              		.cfi_offset 14, -4
  71 0002 87B0     		sub	sp, sp, #28
  72              	.LCFI2:
  73              		.cfi_def_cfa_offset 40
  59:FreeRTOS/parTest/spi_flash.c ****   
  74              		.loc 1 59 0
  75 0004 0121     		movs	r1, #1
  76 0006 41F20400 		movw	r0, #4100
  77 000a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  78              	.LVL3:
  62:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  79              		.loc 1 62 0
  80 000e E023     		movs	r3, #224
  81 0010 ADF80030 		strh	r3, [sp]	@ movhi
  63:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  82              		.loc 1 63 0
  83 0014 0325     		movs	r5, #3
  84 0016 8DF80250 		strb	r5, [sp, #2]
  64:FreeRTOS/parTest/spi_flash.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
  85              		.loc 1 64 0
  86 001a 1823     		movs	r3, #24
  87 001c 8DF80330 		strb	r3, [sp, #3]
  65:FreeRTOS/parTest/spi_flash.c **** 
  88              		.loc 1 65 0
  89 0020 1C4C     		ldr	r4, .L7
  90 0022 6946     		mov	r1, sp
  91 0024 2046     		mov	r0, r4
  92 0026 FFF7FEFF 		bl	GPIO_Init
  93              	.LVL4:
  68:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  94              		.loc 1 68 0
  95 002a 1023     		movs	r3, #16
  96 002c ADF80030 		strh	r3, [sp]	@ movhi
  69:FreeRTOS/parTest/spi_flash.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  97              		.loc 1 69 0
  98 0030 8DF80250 		strb	r5, [sp, #2]
  70:FreeRTOS/parTest/spi_flash.c ****   GPIO_Init(GPIOA, &GPIO_InitStructure);
  99              		.loc 1 70 0
 100 0034 8DF80330 		strb	r3, [sp, #3]
  71:FreeRTOS/parTest/spi_flash.c **** 
 101              		.loc 1 71 0
 102 0038 6946     		mov	r1, sp
 103 003a 2046     		mov	r0, r4
 104 003c FFF7FEFF 		bl	GPIO_Init
 105              	.LVL5:
  74:FreeRTOS/parTest/spi_flash.c **** 
 106              		.loc 1 74 0
 107 0040 0120     		movs	r0, #1
 108 0042 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 10


 109              	.LVL6:
  77:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
 110              		.loc 1 77 0
 111 0046 0023     		movs	r3, #0
 112 0048 ADF80430 		strh	r3, [sp, #4]	@ movhi
  78:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
 113              		.loc 1 78 0
 114 004c 4FF48272 		mov	r2, #260
 115 0050 ADF80620 		strh	r2, [sp, #6]	@ movhi
  79:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CPOL = SPI_CPOL_High;
 116              		.loc 1 79 0
 117 0054 ADF80830 		strh	r3, [sp, #8]	@ movhi
  80:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CPHA = SPI_CPHA_2Edge;
 118              		.loc 1 80 0
 119 0058 0222     		movs	r2, #2
 120 005a ADF80A20 		strh	r2, [sp, #10]	@ movhi
  81:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
 121              		.loc 1 81 0
 122 005e 0125     		movs	r5, #1
 123 0060 ADF80C50 		strh	r5, [sp, #12]	@ movhi
  82:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_4;
 124              		.loc 1 82 0
 125 0064 4FF40072 		mov	r2, #512
 126 0068 ADF80E20 		strh	r2, [sp, #14]	@ movhi
  83:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
 127              		.loc 1 83 0
 128 006c 0822     		movs	r2, #8
 129 006e ADF81020 		strh	r2, [sp, #16]	@ movhi
  84:FreeRTOS/parTest/spi_flash.c ****   SPI_InitStructure.SPI_CRCPolynomial = 7;
 130              		.loc 1 84 0
 131 0072 ADF81230 		strh	r3, [sp, #18]	@ movhi
  85:FreeRTOS/parTest/spi_flash.c ****   SPI_Init(SPI1, &SPI_InitStructure);
 132              		.loc 1 85 0
 133 0076 0723     		movs	r3, #7
 134 0078 ADF81430 		strh	r3, [sp, #20]	@ movhi
  86:FreeRTOS/parTest/spi_flash.c ****   
 135              		.loc 1 86 0
 136 007c 04F52054 		add	r4, r4, #10240
 137 0080 01A9     		add	r1, sp, #4
 138 0082 2046     		mov	r0, r4
 139 0084 FFF7FEFF 		bl	SPI_Init
 140              	.LVL7:
  89:FreeRTOS/parTest/spi_flash.c **** }
 141              		.loc 1 89 0
 142 0088 2946     		mov	r1, r5
 143 008a 2046     		mov	r0, r4
 144 008c FFF7FEFF 		bl	SPI_Cmd
 145              	.LVL8:
  90:FreeRTOS/parTest/spi_flash.c **** 
 146              		.loc 1 90 0
 147 0090 07B0     		add	sp, sp, #28
 148              	.LCFI3:
 149              		.cfi_def_cfa_offset 12
 150              		@ sp needed
 151 0092 30BD     		pop	{r4, r5, pc}
 152              	.L8:
 153              		.align	2
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 11


 154              	.L7:
 155 0094 00080140 		.word	1073809408
 156              		.cfi_endproc
 157              	.LFE27:
 159              		.section	.text.SPI_FLASH_SendByte,"ax",%progbits
 160              		.align	2
 161              		.global	SPI_FLASH_SendByte
 162              		.thumb
 163              		.thumb_func
 165              	SPI_FLASH_SendByte:
 166              	.LFB37:
 398:FreeRTOS/parTest/spi_flash.c **** }
 399:FreeRTOS/parTest/spi_flash.c **** 
 400:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 401:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_SendByte
 402:FreeRTOS/parTest/spi_flash.c **** * Description    : Sends a byte through the SPI interface and return the byte 
 403:FreeRTOS/parTest/spi_flash.c **** *                  received from the SPI bus.
 404:FreeRTOS/parTest/spi_flash.c **** * Input          : byte : byte to send.
 405:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 406:FreeRTOS/parTest/spi_flash.c **** * Return         : The value of the received byte.
 407:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 408:FreeRTOS/parTest/spi_flash.c **** u8 SPI_FLASH_SendByte(u8 byte)
 409:FreeRTOS/parTest/spi_flash.c **** {
 167              		.loc 1 409 0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              	.LVL9:
 172 0000 10B5     		push	{r4, lr}
 173              	.LCFI4:
 174              		.cfi_def_cfa_offset 8
 175              		.cfi_offset 4, -8
 176              		.cfi_offset 14, -4
 177 0002 0446     		mov	r4, r0
 178              	.LVL10:
 179              	.L10:
 180              	.LBB2:
 410:FreeRTOS/parTest/spi_flash.c ****   /* Loop while DR register in not emplty */
 411:FreeRTOS/parTest/spi_flash.c ****   while(SPI_GetFlagStatus(SPI1, SPI_FLAG_TXE) == RESET); 
 181              		.loc 1 411 0 discriminator 1
 182 0004 0221     		movs	r1, #2
 183 0006 0A48     		ldr	r0, .L13
 184 0008 FFF7FEFF 		bl	SPI_GetFlagStatus
 185              	.LVL11:
 186 000c 0028     		cmp	r0, #0
 187 000e F9D0     		beq	.L10
 188              	.LBE2:
 412:FreeRTOS/parTest/spi_flash.c **** 
 413:FreeRTOS/parTest/spi_flash.c ****   /* Send byte through the SPI1 peripheral */	
 414:FreeRTOS/parTest/spi_flash.c ****   SPI_SendData(SPI1, byte);	
 189              		.loc 1 414 0
 190 0010 2146     		mov	r1, r4
 191 0012 0748     		ldr	r0, .L13
 192 0014 FFF7FEFF 		bl	SPI_SendData
 193              	.LVL12:
 194              	.L11:
 195              	.LBB3:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 12


 415:FreeRTOS/parTest/spi_flash.c **** 
 416:FreeRTOS/parTest/spi_flash.c ****   /* Wait to receive a byte */
 417:FreeRTOS/parTest/spi_flash.c ****   while(SPI_GetFlagStatus(SPI1, SPI_FLAG_RXNE) == RESET);
 196              		.loc 1 417 0 discriminator 1
 197 0018 0121     		movs	r1, #1
 198 001a 0548     		ldr	r0, .L13
 199 001c FFF7FEFF 		bl	SPI_GetFlagStatus
 200              	.LVL13:
 201 0020 0028     		cmp	r0, #0
 202 0022 F9D0     		beq	.L11
 203              	.LBE3:
 418:FreeRTOS/parTest/spi_flash.c **** 
 419:FreeRTOS/parTest/spi_flash.c ****   /* Return the byte read from the SPI bus */  
 420:FreeRTOS/parTest/spi_flash.c ****   return SPI_ReceiveData(SPI1); 
 204              		.loc 1 420 0
 205 0024 0248     		ldr	r0, .L13
 206 0026 FFF7FEFF 		bl	SPI_ReceiveData
 207              	.LVL14:
 421:FreeRTOS/parTest/spi_flash.c **** }
 208              		.loc 1 421 0
 209 002a C0B2     		uxtb	r0, r0
 210 002c 10BD     		pop	{r4, pc}
 211              	.L14:
 212 002e 00BF     		.align	2
 213              	.L13:
 214 0030 00300140 		.word	1073819648
 215              		.cfi_endproc
 216              	.LFE37:
 218              		.section	.text.SPI_FLASH_BufferRead,"ax",%progbits
 219              		.align	2
 220              		.global	SPI_FLASH_BufferRead
 221              		.thumb
 222              		.thumb_func
 224              	SPI_FLASH_BufferRead:
 225              	.LFB32:
 284:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 226              		.loc 1 284 0
 227              		.cfi_startproc
 228              		@ args = 0, pretend = 0, frame = 0
 229              		@ frame_needed = 0, uses_anonymous_args = 0
 230              	.LVL15:
 231 0000 70B5     		push	{r4, r5, r6, lr}
 232              	.LCFI5:
 233              		.cfi_def_cfa_offset 16
 234              		.cfi_offset 4, -16
 235              		.cfi_offset 5, -12
 236              		.cfi_offset 6, -8
 237              		.cfi_offset 14, -4
 238 0002 0646     		mov	r6, r0
 239 0004 0C46     		mov	r4, r1
 240 0006 1546     		mov	r5, r2
 286:FreeRTOS/parTest/spi_flash.c ****   
 241              		.loc 1 286 0
 242 0008 0020     		movs	r0, #0
 243              	.LVL16:
 244 000a FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 245              	.LVL17:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 13


 289:FreeRTOS/parTest/spi_flash.c ****   
 246              		.loc 1 289 0
 247 000e 0320     		movs	r0, #3
 248 0010 FFF7FEFF 		bl	SPI_FLASH_SendByte
 249              	.LVL18:
 292:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr medium nibble address byte to read from */
 250              		.loc 1 292 0
 251 0014 C4F30740 		ubfx	r0, r4, #16, #8
 252 0018 FFF7FEFF 		bl	SPI_FLASH_SendByte
 253              	.LVL19:
 294:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr low nibble address byte to read from */
 254              		.loc 1 294 0
 255 001c C4F30720 		ubfx	r0, r4, #8, #8
 256 0020 FFF7FEFF 		bl	SPI_FLASH_SendByte
 257              	.LVL20:
 296:FreeRTOS/parTest/spi_flash.c ****    	
 258              		.loc 1 296 0
 259 0024 E0B2     		uxtb	r0, r4
 260 0026 FFF7FEFF 		bl	SPI_FLASH_SendByte
 261              	.LVL21:
 298:FreeRTOS/parTest/spi_flash.c ****   {
 262              		.loc 1 298 0
 263 002a 05E0     		b	.L16
 264              	.LVL22:
 265              	.L17:
 301:FreeRTOS/parTest/spi_flash.c ****     /* Point to the next location where the byte read will be saved */
 266              		.loc 1 301 0
 267 002c A520     		movs	r0, #165
 268 002e FFF7FEFF 		bl	SPI_FLASH_SendByte
 269              	.LVL23:
 270 0032 06F8010B 		strb	r0, [r6], #1
 271              	.LVL24:
 298:FreeRTOS/parTest/spi_flash.c ****   {
 272              		.loc 1 298 0
 273 0036 2546     		mov	r5, r4
 274              	.LVL25:
 275              	.L16:
 276 0038 6B1E     		subs	r3, r5, #1
 277 003a 9CB2     		uxth	r4, r3
 278              	.LVL26:
 279 003c 002D     		cmp	r5, #0
 280 003e F5D1     		bne	.L17
 307:FreeRTOS/parTest/spi_flash.c **** }
 281              		.loc 1 307 0
 282 0040 0120     		movs	r0, #1
 283 0042 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 284              	.LVL27:
 285 0046 70BD     		pop	{r4, r5, r6, pc}
 286              		.cfi_endproc
 287              	.LFE32:
 289              		.section	.text.SPI_FLASH_ReadID,"ax",%progbits
 290              		.align	2
 291              		.global	SPI_FLASH_ReadID
 292              		.thumb
 293              		.thumb_func
 295              	SPI_FLASH_ReadID:
 296              	.LFB33:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 14


 318:FreeRTOS/parTest/spi_flash.c ****   u32 Temp = 0, Temp0 = 0, Temp1 = 0, Temp2 = 0;
 297              		.loc 1 318 0
 298              		.cfi_startproc
 299              		@ args = 0, pretend = 0, frame = 0
 300              		@ frame_needed = 0, uses_anonymous_args = 0
 301 0000 70B5     		push	{r4, r5, r6, lr}
 302              	.LCFI6:
 303              		.cfi_def_cfa_offset 16
 304              		.cfi_offset 4, -16
 305              		.cfi_offset 5, -12
 306              		.cfi_offset 6, -8
 307              		.cfi_offset 14, -4
 308              	.LVL28:
 322:FreeRTOS/parTest/spi_flash.c ****   
 309              		.loc 1 322 0
 310 0002 0020     		movs	r0, #0
 311 0004 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 312              	.LVL29:
 325:FreeRTOS/parTest/spi_flash.c **** 
 313              		.loc 1 325 0
 314 0008 9F20     		movs	r0, #159
 315 000a FFF7FEFF 		bl	SPI_FLASH_SendByte
 316              	.LVL30:
 328:FreeRTOS/parTest/spi_flash.c **** 
 317              		.loc 1 328 0
 318 000e A520     		movs	r0, #165
 319 0010 FFF7FEFF 		bl	SPI_FLASH_SendByte
 320              	.LVL31:
 321 0014 0646     		mov	r6, r0
 322              	.LVL32:
 331:FreeRTOS/parTest/spi_flash.c **** 
 323              		.loc 1 331 0
 324 0016 A520     		movs	r0, #165
 325              	.LVL33:
 326 0018 FFF7FEFF 		bl	SPI_FLASH_SendByte
 327              	.LVL34:
 328 001c 0446     		mov	r4, r0
 329              	.LVL35:
 334:FreeRTOS/parTest/spi_flash.c **** 
 330              		.loc 1 334 0
 331 001e A520     		movs	r0, #165
 332              	.LVL36:
 333 0020 FFF7FEFF 		bl	SPI_FLASH_SendByte
 334              	.LVL37:
 335 0024 0546     		mov	r5, r0
 336              	.LVL38:
 337:FreeRTOS/parTest/spi_flash.c ****          
 337              		.loc 1 337 0
 338 0026 0120     		movs	r0, #1
 339              	.LVL39:
 340 0028 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 341              	.LVL40:
 339:FreeRTOS/parTest/spi_flash.c **** 
 342              		.loc 1 339 0
 343 002c 2002     		lsls	r0, r4, #8
 344 002e 40EA0640 		orr	r0, r0, r6, lsl #16
 345              	.LVL41:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 15


 342:FreeRTOS/parTest/spi_flash.c **** 
 346              		.loc 1 342 0
 347 0032 2843     		orrs	r0, r0, r5
 348              	.LVL42:
 349 0034 70BD     		pop	{r4, r5, r6, pc}
 350              		.cfi_endproc
 351              	.LFE33:
 353 0036 00BF     		.section	.text.SPI_FLASH_StartReadSequence,"ax",%progbits
 354              		.align	2
 355              		.global	SPI_FLASH_StartReadSequence
 356              		.thumb
 357              		.thumb_func
 359              	SPI_FLASH_StartReadSequence:
 360              	.LFB34:
 357:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 361              		.loc 1 357 0
 362              		.cfi_startproc
 363              		@ args = 0, pretend = 0, frame = 0
 364              		@ frame_needed = 0, uses_anonymous_args = 0
 365              	.LVL43:
 366 0000 10B5     		push	{r4, lr}
 367              	.LCFI7:
 368              		.cfi_def_cfa_offset 8
 369              		.cfi_offset 4, -8
 370              		.cfi_offset 14, -4
 371 0002 0446     		mov	r4, r0
 359:FreeRTOS/parTest/spi_flash.c ****   
 372              		.loc 1 359 0
 373 0004 0020     		movs	r0, #0
 374              	.LVL44:
 375 0006 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 376              	.LVL45:
 362:FreeRTOS/parTest/spi_flash.c **** 
 377              		.loc 1 362 0
 378 000a 0320     		movs	r0, #3
 379 000c FFF7FEFF 		bl	SPI_FLASH_SendByte
 380              	.LVL46:
 366:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr medium nibble address byte */
 381              		.loc 1 366 0
 382 0010 C4F30740 		ubfx	r0, r4, #16, #8
 383 0014 FFF7FEFF 		bl	SPI_FLASH_SendByte
 384              	.LVL47:
 368:FreeRTOS/parTest/spi_flash.c ****   /* Send ReadAddr low nibble address byte */
 385              		.loc 1 368 0
 386 0018 C4F30720 		ubfx	r0, r4, #8, #8
 387 001c FFF7FEFF 		bl	SPI_FLASH_SendByte
 388              	.LVL48:
 370:FreeRTOS/parTest/spi_flash.c **** }
 389              		.loc 1 370 0
 390 0020 E0B2     		uxtb	r0, r4
 391 0022 FFF7FEFF 		bl	SPI_FLASH_SendByte
 392              	.LVL49:
 393 0026 10BD     		pop	{r4, pc}
 394              		.cfi_endproc
 395              	.LFE34:
 397              		.section	.text.SPI_FLASH_ReadByte,"ax",%progbits
 398              		.align	2
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 16


 399              		.global	SPI_FLASH_ReadByte
 400              		.thumb
 401              		.thumb_func
 403              	SPI_FLASH_ReadByte:
 404              	.LFB35:
 383:FreeRTOS/parTest/spi_flash.c ****   return (SPI_FLASH_SendByte(Dummy_Byte));
 405              		.loc 1 383 0
 406              		.cfi_startproc
 407              		@ args = 0, pretend = 0, frame = 0
 408              		@ frame_needed = 0, uses_anonymous_args = 0
 409 0000 08B5     		push	{r3, lr}
 410              	.LCFI8:
 411              		.cfi_def_cfa_offset 8
 412              		.cfi_offset 3, -8
 413              		.cfi_offset 14, -4
 384:FreeRTOS/parTest/spi_flash.c **** }
 414              		.loc 1 384 0
 415 0002 A520     		movs	r0, #165
 416 0004 FFF7FEFF 		bl	SPI_FLASH_SendByte
 417              	.LVL50:
 385:FreeRTOS/parTest/spi_flash.c **** 
 418              		.loc 1 385 0
 419 0008 08BD     		pop	{r3, pc}
 420              		.cfi_endproc
 421              	.LFE35:
 423 000a 00BF     		.section	.text.SPI_FLASH_SendHalfWord,"ax",%progbits
 424              		.align	2
 425              		.global	SPI_FLASH_SendHalfWord
 426              		.thumb
 427              		.thumb_func
 429              	SPI_FLASH_SendHalfWord:
 430              	.LFB38:
 422:FreeRTOS/parTest/spi_flash.c **** 
 423:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 424:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_SendHalfWord
 425:FreeRTOS/parTest/spi_flash.c **** * Description    : Sends a Half Word through the SPI interface and return the  
 426:FreeRTOS/parTest/spi_flash.c **** *                  Half Word received from the SPI bus.
 427:FreeRTOS/parTest/spi_flash.c **** * Input          : Half Word : Half Word to send.
 428:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 429:FreeRTOS/parTest/spi_flash.c **** * Return         : The value of the received Half Word.
 430:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 431:FreeRTOS/parTest/spi_flash.c **** u16 SPI_FLASH_SendHalfWord(u16 HalfWord)
 432:FreeRTOS/parTest/spi_flash.c **** {
 431              		.loc 1 432 0
 432              		.cfi_startproc
 433              		@ args = 0, pretend = 0, frame = 0
 434              		@ frame_needed = 0, uses_anonymous_args = 0
 435              	.LVL51:
 436 0000 10B5     		push	{r4, lr}
 437              	.LCFI9:
 438              		.cfi_def_cfa_offset 8
 439              		.cfi_offset 4, -8
 440              		.cfi_offset 14, -4
 441 0002 0446     		mov	r4, r0
 442              	.LVL52:
 443              	.L26:
 444              	.LBB4:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 17


 433:FreeRTOS/parTest/spi_flash.c ****   /* Loop while DR register in not emplty */
 434:FreeRTOS/parTest/spi_flash.c ****   while(SPI_GetFlagStatus(SPI1, SPI_FLAG_TXE) == RESET); 
 445              		.loc 1 434 0 discriminator 1
 446 0004 0221     		movs	r1, #2
 447 0006 0A48     		ldr	r0, .L29
 448 0008 FFF7FEFF 		bl	SPI_GetFlagStatus
 449              	.LVL53:
 450 000c 0028     		cmp	r0, #0
 451 000e F9D0     		beq	.L26
 452              	.LBE4:
 435:FreeRTOS/parTest/spi_flash.c **** 
 436:FreeRTOS/parTest/spi_flash.c ****   /* Send Half Word through the SPI1 peripheral */	
 437:FreeRTOS/parTest/spi_flash.c ****   SPI_SendData(SPI1, HalfWord);	
 453              		.loc 1 437 0
 454 0010 2146     		mov	r1, r4
 455 0012 0748     		ldr	r0, .L29
 456 0014 FFF7FEFF 		bl	SPI_SendData
 457              	.LVL54:
 458              	.L27:
 459              	.LBB5:
 438:FreeRTOS/parTest/spi_flash.c **** 
 439:FreeRTOS/parTest/spi_flash.c ****   /* Wait to receive a Half Word */
 440:FreeRTOS/parTest/spi_flash.c ****   while(SPI_GetFlagStatus(SPI1, SPI_FLAG_RXNE) == RESET);
 460              		.loc 1 440 0 discriminator 1
 461 0018 0121     		movs	r1, #1
 462 001a 0548     		ldr	r0, .L29
 463 001c FFF7FEFF 		bl	SPI_GetFlagStatus
 464              	.LVL55:
 465 0020 0028     		cmp	r0, #0
 466 0022 F9D0     		beq	.L27
 467              	.LBE5:
 441:FreeRTOS/parTest/spi_flash.c **** 
 442:FreeRTOS/parTest/spi_flash.c ****   /* Return the Half Word read from the SPI bus */  
 443:FreeRTOS/parTest/spi_flash.c ****   return SPI_ReceiveData(SPI1); 
 468              		.loc 1 443 0
 469 0024 0248     		ldr	r0, .L29
 470 0026 FFF7FEFF 		bl	SPI_ReceiveData
 471              	.LVL56:
 444:FreeRTOS/parTest/spi_flash.c **** }
 472              		.loc 1 444 0
 473 002a 80B2     		uxth	r0, r0
 474 002c 10BD     		pop	{r4, pc}
 475              	.L30:
 476 002e 00BF     		.align	2
 477              	.L29:
 478 0030 00300140 		.word	1073819648
 479              		.cfi_endproc
 480              	.LFE38:
 482              		.section	.text.SPI_FLASH_WriteEnable,"ax",%progbits
 483              		.align	2
 484              		.global	SPI_FLASH_WriteEnable
 485              		.thumb
 486              		.thumb_func
 488              	SPI_FLASH_WriteEnable:
 489              	.LFB39:
 445:FreeRTOS/parTest/spi_flash.c **** 
 446:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 18


 447:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_WriteEnable
 448:FreeRTOS/parTest/spi_flash.c **** * Description    : Enables the write access to the FLASH.
 449:FreeRTOS/parTest/spi_flash.c **** * Input          : None
 450:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 451:FreeRTOS/parTest/spi_flash.c **** * Return         : None
 452:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 453:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_WriteEnable(void)  
 454:FreeRTOS/parTest/spi_flash.c **** {
 490              		.loc 1 454 0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 0
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 494 0000 08B5     		push	{r3, lr}
 495              	.LCFI10:
 496              		.cfi_def_cfa_offset 8
 497              		.cfi_offset 3, -8
 498              		.cfi_offset 14, -4
 455:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 456:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);	
 499              		.loc 1 456 0
 500 0002 0020     		movs	r0, #0
 501 0004 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 502              	.LVL57:
 457:FreeRTOS/parTest/spi_flash.c ****   
 458:FreeRTOS/parTest/spi_flash.c ****   /* Send "Write Enable" instruction */
 459:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(WREN);
 503              		.loc 1 459 0
 504 0008 0620     		movs	r0, #6
 505 000a FFF7FEFF 		bl	SPI_FLASH_SendByte
 506              	.LVL58:
 460:FreeRTOS/parTest/spi_flash.c ****   
 461:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 462:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);	
 507              		.loc 1 462 0
 508 000e 0120     		movs	r0, #1
 509 0010 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 510              	.LVL59:
 511 0014 08BD     		pop	{r3, pc}
 512              		.cfi_endproc
 513              	.LFE39:
 515 0016 00BF     		.section	.text.SPI_FLASH_WaitForWriteEnd,"ax",%progbits
 516              		.align	2
 517              		.global	SPI_FLASH_WaitForWriteEnd
 518              		.thumb
 519              		.thumb_func
 521              	SPI_FLASH_WaitForWriteEnd:
 522              	.LFB40:
 463:FreeRTOS/parTest/spi_flash.c **** }
 464:FreeRTOS/parTest/spi_flash.c **** 
 465:FreeRTOS/parTest/spi_flash.c **** /*******************************************************************************
 466:FreeRTOS/parTest/spi_flash.c **** * Function Name  : SPI_FLASH_WaitForWriteEnd
 467:FreeRTOS/parTest/spi_flash.c **** * Description    : Polls the status of the Write In Progress (WIP) flag in the  
 468:FreeRTOS/parTest/spi_flash.c **** *                  FLASH's status  register  and  loop  until write  opertaion
 469:FreeRTOS/parTest/spi_flash.c **** *                  has completed.  
 470:FreeRTOS/parTest/spi_flash.c **** * Input          : None
 471:FreeRTOS/parTest/spi_flash.c **** * Output         : None
 472:FreeRTOS/parTest/spi_flash.c **** * Return         : None
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 19


 473:FreeRTOS/parTest/spi_flash.c **** *******************************************************************************/
 474:FreeRTOS/parTest/spi_flash.c **** void SPI_FLASH_WaitForWriteEnd(void) 
 475:FreeRTOS/parTest/spi_flash.c **** {
 523              		.loc 1 475 0
 524              		.cfi_startproc
 525              		@ args = 0, pretend = 0, frame = 0
 526              		@ frame_needed = 0, uses_anonymous_args = 0
 527 0000 08B5     		push	{r3, lr}
 528              	.LCFI11:
 529              		.cfi_def_cfa_offset 8
 530              		.cfi_offset 3, -8
 531              		.cfi_offset 14, -4
 532              	.LVL60:
 476:FreeRTOS/parTest/spi_flash.c ****   u8 FLASH_Status = 0;
 477:FreeRTOS/parTest/spi_flash.c ****   
 478:FreeRTOS/parTest/spi_flash.c ****   /* Select the FLASH: Chip Select low */
 479:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(Low);
 533              		.loc 1 479 0
 534 0002 0020     		movs	r0, #0
 535 0004 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 536              	.LVL61:
 480:FreeRTOS/parTest/spi_flash.c ****   	
 481:FreeRTOS/parTest/spi_flash.c ****   /* Send "Read Status Register" instruction */
 482:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_SendByte(RDSR);
 537              		.loc 1 482 0
 538 0008 0520     		movs	r0, #5
 539 000a FFF7FEFF 		bl	SPI_FLASH_SendByte
 540              	.LVL62:
 541              	.L34:
 483:FreeRTOS/parTest/spi_flash.c ****   
 484:FreeRTOS/parTest/spi_flash.c ****   /* Loop as long as the memory is busy with a write cycle */ 		
 485:FreeRTOS/parTest/spi_flash.c ****   do
 486:FreeRTOS/parTest/spi_flash.c ****   { 	
 487:FreeRTOS/parTest/spi_flash.c **** 	 
 488:FreeRTOS/parTest/spi_flash.c ****     /* Send a dummy byte to generate the clock needed by the FLASH 
 489:FreeRTOS/parTest/spi_flash.c ****     and put the value of the status register in FLASH_Status variable */
 490:FreeRTOS/parTest/spi_flash.c ****     FLASH_Status = SPI_FLASH_SendByte(Dummy_Byte);  
 542              		.loc 1 490 0 discriminator 1
 543 000e A520     		movs	r0, #165
 544 0010 FFF7FEFF 		bl	SPI_FLASH_SendByte
 545              	.LVL63:
 491:FreeRTOS/parTest/spi_flash.c **** 																	
 492:FreeRTOS/parTest/spi_flash.c ****   } while((FLASH_Status & WIP_Flag) == SET); /* Write in progress */  
 546              		.loc 1 492 0 discriminator 1
 547 0014 10F0010F 		tst	r0, #1
 548 0018 F9D1     		bne	.L34
 493:FreeRTOS/parTest/spi_flash.c **** 
 494:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 495:FreeRTOS/parTest/spi_flash.c ****   SPI_FLASH_ChipSelect(High);	 	
 549              		.loc 1 495 0
 550 001a 0120     		movs	r0, #1
 551              	.LVL64:
 552 001c FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 553              	.LVL65:
 554 0020 08BD     		pop	{r3, pc}
 555              		.cfi_endproc
 556              	.LFE40:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 20


 558 0022 00BF     		.section	.text.SPI_FLASH_SectorErase,"ax",%progbits
 559              		.align	2
 560              		.global	SPI_FLASH_SectorErase
 561              		.thumb
 562              		.thumb_func
 564              	SPI_FLASH_SectorErase:
 565              	.LFB28:
 100:FreeRTOS/parTest/spi_flash.c ****   /* Send write enable instruction */
 566              		.loc 1 100 0
 567              		.cfi_startproc
 568              		@ args = 0, pretend = 0, frame = 0
 569              		@ frame_needed = 0, uses_anonymous_args = 0
 570              	.LVL66:
 571 0000 10B5     		push	{r4, lr}
 572              	.LCFI12:
 573              		.cfi_def_cfa_offset 8
 574              		.cfi_offset 4, -8
 575              		.cfi_offset 14, -4
 576 0002 0446     		mov	r4, r0
 102:FreeRTOS/parTest/spi_flash.c **** 			
 577              		.loc 1 102 0
 578 0004 FFF7FEFF 		bl	SPI_FLASH_WriteEnable
 579              	.LVL67:
 106:FreeRTOS/parTest/spi_flash.c ****   /* Send Sector Erase instruction  */
 580              		.loc 1 106 0
 581 0008 0020     		movs	r0, #0
 582 000a FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 583              	.LVL68:
 108:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr high nibble address byte */
 584              		.loc 1 108 0
 585 000e D820     		movs	r0, #216
 586 0010 FFF7FEFF 		bl	SPI_FLASH_SendByte
 587              	.LVL69:
 110:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr medium nibble address byte */
 588              		.loc 1 110 0
 589 0014 C4F30740 		ubfx	r0, r4, #16, #8
 590 0018 FFF7FEFF 		bl	SPI_FLASH_SendByte
 591              	.LVL70:
 112:FreeRTOS/parTest/spi_flash.c ****   /* Send SectorAddr low nibble address byte */
 592              		.loc 1 112 0
 593 001c C4F30720 		ubfx	r0, r4, #8, #8
 594 0020 FFF7FEFF 		bl	SPI_FLASH_SendByte
 595              	.LVL71:
 114:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 596              		.loc 1 114 0
 597 0024 E0B2     		uxtb	r0, r4
 598 0026 FFF7FEFF 		bl	SPI_FLASH_SendByte
 599              	.LVL72:
 116:FreeRTOS/parTest/spi_flash.c **** 
 600              		.loc 1 116 0
 601 002a 0120     		movs	r0, #1
 602 002c FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 603              	.LVL73:
 119:FreeRTOS/parTest/spi_flash.c **** }
 604              		.loc 1 119 0
 605 0030 FFF7FEFF 		bl	SPI_FLASH_WaitForWriteEnd
 606              	.LVL74:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 21


 607 0034 10BD     		pop	{r4, pc}
 608              		.cfi_endproc
 609              	.LFE28:
 611 0036 00BF     		.section	.text.SPI_FLASH_BulkErase,"ax",%progbits
 612              		.align	2
 613              		.global	SPI_FLASH_BulkErase
 614              		.thumb
 615              		.thumb_func
 617              	SPI_FLASH_BulkErase:
 618              	.LFB29:
 130:FreeRTOS/parTest/spi_flash.c ****   /* Send write enable instruction */
 619              		.loc 1 130 0
 620              		.cfi_startproc
 621              		@ args = 0, pretend = 0, frame = 0
 622              		@ frame_needed = 0, uses_anonymous_args = 0
 623 0000 08B5     		push	{r3, lr}
 624              	.LCFI13:
 625              		.cfi_def_cfa_offset 8
 626              		.cfi_offset 3, -8
 627              		.cfi_offset 14, -4
 132:FreeRTOS/parTest/spi_flash.c **** 	
 628              		.loc 1 132 0
 629 0002 FFF7FEFF 		bl	SPI_FLASH_WriteEnable
 630              	.LVL75:
 136:FreeRTOS/parTest/spi_flash.c ****   /* Send Bulk Erase instruction  */
 631              		.loc 1 136 0
 632 0006 0020     		movs	r0, #0
 633 0008 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 634              	.LVL76:
 138:FreeRTOS/parTest/spi_flash.c ****   /* Deselect the FLASH: Chip Select high */
 635              		.loc 1 138 0
 636 000c C720     		movs	r0, #199
 637 000e FFF7FEFF 		bl	SPI_FLASH_SendByte
 638              	.LVL77:
 140:FreeRTOS/parTest/spi_flash.c **** 		
 639              		.loc 1 140 0
 640 0012 0120     		movs	r0, #1
 641 0014 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 642              	.LVL78:
 143:FreeRTOS/parTest/spi_flash.c **** }
 643              		.loc 1 143 0
 644 0018 FFF7FEFF 		bl	SPI_FLASH_WaitForWriteEnd
 645              	.LVL79:
 646 001c 08BD     		pop	{r3, pc}
 647              		.cfi_endproc
 648              	.LFE29:
 650 001e 00BF     		.section	.text.SPI_FLASH_PageWrite,"ax",%progbits
 651              		.align	2
 652              		.global	SPI_FLASH_PageWrite
 653              		.thumb
 654              		.thumb_func
 656              	SPI_FLASH_PageWrite:
 657              	.LFB30:
 160:FreeRTOS/parTest/spi_flash.c ****   /* Enable the write access to the FLASH */
 658              		.loc 1 160 0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 22


 661              		@ frame_needed = 0, uses_anonymous_args = 0
 662              	.LVL80:
 663 0000 70B5     		push	{r4, r5, r6, lr}
 664              	.LCFI14:
 665              		.cfi_def_cfa_offset 16
 666              		.cfi_offset 4, -16
 667              		.cfi_offset 5, -12
 668              		.cfi_offset 6, -8
 669              		.cfi_offset 14, -4
 670 0002 0646     		mov	r6, r0
 671 0004 0C46     		mov	r4, r1
 672 0006 1546     		mov	r5, r2
 162:FreeRTOS/parTest/spi_flash.c ****   
 673              		.loc 1 162 0
 674 0008 FFF7FEFF 		bl	SPI_FLASH_WriteEnable
 675              	.LVL81:
 165:FreeRTOS/parTest/spi_flash.c ****   /* Send "Write to Memory " instruction */    
 676              		.loc 1 165 0
 677 000c 0020     		movs	r0, #0
 678 000e FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 679              	.LVL82:
 167:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr high nibble address byte to write to */
 680              		.loc 1 167 0
 681 0012 0220     		movs	r0, #2
 682 0014 FFF7FEFF 		bl	SPI_FLASH_SendByte
 683              	.LVL83:
 169:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr medium nibble address byte to write to */
 684              		.loc 1 169 0
 685 0018 C4F30740 		ubfx	r0, r4, #16, #8
 686 001c FFF7FEFF 		bl	SPI_FLASH_SendByte
 687              	.LVL84:
 171:FreeRTOS/parTest/spi_flash.c ****   /* Send WriteAddr low nibble address byte to write to */
 688              		.loc 1 171 0
 689 0020 C4F30720 		ubfx	r0, r4, #8, #8
 690 0024 FFF7FEFF 		bl	SPI_FLASH_SendByte
 691              	.LVL85:
 173:FreeRTOS/parTest/spi_flash.c ****   
 692              		.loc 1 173 0
 693 0028 E0B2     		uxtb	r0, r4
 694 002a FFF7FEFF 		bl	SPI_FLASH_SendByte
 695              	.LVL86:
 176:FreeRTOS/parTest/spi_flash.c ****   {
 696              		.loc 1 176 0
 697 002e 04E0     		b	.L41
 698              	.LVL87:
 699              	.L42:
 179:FreeRTOS/parTest/spi_flash.c ****     /* Point on the next byte to be written */
 700              		.loc 1 179 0
 701 0030 16F8010B 		ldrb	r0, [r6], #1	@ zero_extendqisi2
 702              	.LVL88:
 703 0034 FFF7FEFF 		bl	SPI_FLASH_SendByte
 704              	.LVL89:
 176:FreeRTOS/parTest/spi_flash.c ****   {
 705              		.loc 1 176 0
 706 0038 2546     		mov	r5, r4
 707              	.LVL90:
 708              	.L41:
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 23


 709 003a 6B1E     		subs	r3, r5, #1
 710 003c 9CB2     		uxth	r4, r3
 711              	.LVL91:
 712 003e 002D     		cmp	r5, #0
 713 0040 F6D1     		bne	.L42
 185:FreeRTOS/parTest/spi_flash.c ****   
 714              		.loc 1 185 0
 715 0042 0120     		movs	r0, #1
 716 0044 FFF7FEFF 		bl	SPI_FLASH_ChipSelect
 717              	.LVL92:
 188:FreeRTOS/parTest/spi_flash.c **** }
 718              		.loc 1 188 0
 719 0048 FFF7FEFF 		bl	SPI_FLASH_WaitForWriteEnd
 720              	.LVL93:
 721 004c 70BD     		pop	{r4, r5, r6, pc}
 722              		.cfi_endproc
 723              	.LFE30:
 725 004e 00BF     		.section	.text.SPI_FLASH_BufferWrite,"ax",%progbits
 726              		.align	2
 727              		.global	SPI_FLASH_BufferWrite
 728              		.thumb
 729              		.thumb_func
 731              	SPI_FLASH_BufferWrite:
 732              	.LFB31:
 203:FreeRTOS/parTest/spi_flash.c ****   u8 NumOfPage = 0, NumOfSingle = 0, Addr = 0, count = 0, temp = 0;
 733              		.loc 1 203 0
 734              		.cfi_startproc
 735              		@ args = 0, pretend = 0, frame = 0
 736              		@ frame_needed = 0, uses_anonymous_args = 0
 737              	.LVL94:
 738 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 739              	.LCFI15:
 740              		.cfi_def_cfa_offset 32
 741              		.cfi_offset 3, -32
 742              		.cfi_offset 4, -28
 743              		.cfi_offset 5, -24
 744              		.cfi_offset 6, -20
 745              		.cfi_offset 7, -16
 746              		.cfi_offset 8, -12
 747              		.cfi_offset 9, -8
 748              		.cfi_offset 14, -4
 749 0004 0646     		mov	r6, r0
 750 0006 0C46     		mov	r4, r1
 751 0008 9046     		mov	r8, r2
 752              	.LVL95:
 206:FreeRTOS/parTest/spi_flash.c ****   count = SPI_FLASH_PageSize - Addr;
 753              		.loc 1 206 0
 754 000a CBB2     		uxtb	r3, r1
 755              	.LVL96:
 208:FreeRTOS/parTest/spi_flash.c ****   NumOfSingle = NumByteToWrite % SPI_FLASH_PageSize;
 756              		.loc 1 208 0
 757 000c 120A     		lsrs	r2, r2, #8
 758              	.LVL97:
 211:FreeRTOS/parTest/spi_flash.c ****   {
 759              		.loc 1 211 0
 760 000e E3B9     		cbnz	r3, .L45
 213:FreeRTOS/parTest/spi_flash.c ****     {
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 24


 761              		.loc 1 213 0
 762 0010 7AB9     		cbnz	r2, .L46
 215:FreeRTOS/parTest/spi_flash.c ****     }
 763              		.loc 1 215 0
 764 0012 4246     		mov	r2, r8
 765              	.LVL98:
 766 0014 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 767              	.LVL99:
 768 0018 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 769              	.LVL100:
 770              	.L48:
 221:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  SPI_FLASH_PageSize;
 771              		.loc 1 221 0
 772 001c 4FF48072 		mov	r2, #256
 773 0020 2146     		mov	r1, r4
 774 0022 3046     		mov	r0, r6
 775 0024 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 776              	.LVL101:
 222:FreeRTOS/parTest/spi_flash.c ****         pBuffer += SPI_FLASH_PageSize;  
 777              		.loc 1 222 0
 778 0028 04F58074 		add	r4, r4, #256
 779              	.LVL102:
 223:FreeRTOS/parTest/spi_flash.c ****       }    
 780              		.loc 1 223 0
 781 002c 06F58076 		add	r6, r6, #256
 782              	.LVL103:
 219:FreeRTOS/parTest/spi_flash.c ****       {
 783              		.loc 1 219 0
 784 0030 2A46     		mov	r2, r5
 785              	.LVL104:
 786              	.L46:
 787 0032 531E     		subs	r3, r2, #1
 788 0034 DDB2     		uxtb	r5, r3
 789              	.LVL105:
 790 0036 002A     		cmp	r2, #0
 791 0038 F0D1     		bne	.L48
 226:FreeRTOS/parTest/spi_flash.c ****    }
 792              		.loc 1 226 0
 793 003a 5FFA88F2 		uxtb	r2, r8
 794 003e 2146     		mov	r1, r4
 795 0040 3046     		mov	r0, r6
 796 0042 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 797              	.LVL106:
 798 0046 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 799              	.LVL107:
 800              	.L45:
 801 004a 5D42     		negs	r5, r3
 802 004c EDB2     		uxtb	r5, r5
 803 004e 5FFA88F1 		uxtb	r1, r8
 804              	.LVL108:
 231:FreeRTOS/parTest/spi_flash.c ****     {
 805              		.loc 1 231 0
 806 0052 A2B9     		cbnz	r2, .L49
 233:FreeRTOS/parTest/spi_flash.c ****       {
 807              		.loc 1 233 0
 808 0054 8D42     		cmp	r5, r1
 809 0056 0CD2     		bcs	.L50
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 25


 235:FreeRTOS/parTest/spi_flash.c ****       	
 810              		.loc 1 235 0
 811 0058 0B44     		add	r3, r3, r1
 812              	.LVL109:
 813 005a DFB2     		uxtb	r7, r3
 814              	.LVL110:
 237:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  count;
 815              		.loc 1 237 0
 816 005c 2A46     		mov	r2, r5
 817              	.LVL111:
 818 005e 2146     		mov	r1, r4
 819 0060 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 820              	.LVL112:
 241:FreeRTOS/parTest/spi_flash.c ****       }
 821              		.loc 1 241 0
 822 0064 3A46     		mov	r2, r7
 823 0066 6119     		adds	r1, r4, r5
 824              	.LVL113:
 825 0068 7019     		adds	r0, r6, r5
 826              	.LVL114:
 827 006a FFF7FEFF 		bl	SPI_FLASH_PageWrite
 828              	.LVL115:
 829 006e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 830              	.LVL116:
 831              	.L50:
 245:FreeRTOS/parTest/spi_flash.c ****       }
 832              		.loc 1 245 0
 833 0072 4246     		mov	r2, r8
 834              	.LVL117:
 835 0074 2146     		mov	r1, r4
 836 0076 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 837              	.LVL118:
 838 007a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 839              	.LVL119:
 840              	.L49:
 250:FreeRTOS/parTest/spi_flash.c ****       NumOfPage =  NumByteToWrite / SPI_FLASH_PageSize;
 841              		.loc 1 250 0
 842 007e AAB2     		uxth	r2, r5
 843              	.LVL120:
 844 0080 C2EB0808 		rsb	r8, r2, r8
 845              	.LVL121:
 846 0084 1FFA88F8 		uxth	r8, r8
 847              	.LVL122:
 251:FreeRTOS/parTest/spi_flash.c ****       NumOfSingle = NumByteToWrite % SPI_FLASH_PageSize;	
 848              		.loc 1 251 0
 849 0088 4FEA1827 		lsr	r7, r8, #8
 850              	.LVL123:
 252:FreeRTOS/parTest/spi_flash.c ****       
 851              		.loc 1 252 0
 852 008c 5FFA88F9 		uxtb	r9, r8
 853              	.LVL124:
 254:FreeRTOS/parTest/spi_flash.c ****       WriteAddr +=  count;
 854              		.loc 1 254 0
 855 0090 2146     		mov	r1, r4
 856 0092 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 857              	.LVL125:
 255:FreeRTOS/parTest/spi_flash.c ****       pBuffer += count;  
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 26


 858              		.loc 1 255 0
 859 0096 2C44     		add	r4, r4, r5
 860              	.LVL126:
 256:FreeRTOS/parTest/spi_flash.c ****      
 861              		.loc 1 256 0
 862 0098 2E44     		add	r6, r6, r5
 863              	.LVL127:
 258:FreeRTOS/parTest/spi_flash.c ****       {
 864              		.loc 1 258 0
 865 009a 0AE0     		b	.L51
 866              	.LVL128:
 867              	.L52:
 260:FreeRTOS/parTest/spi_flash.c ****         WriteAddr +=  SPI_FLASH_PageSize;
 868              		.loc 1 260 0
 869 009c 4FF48072 		mov	r2, #256
 870 00a0 2146     		mov	r1, r4
 871 00a2 3046     		mov	r0, r6
 872 00a4 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 873              	.LVL129:
 261:FreeRTOS/parTest/spi_flash.c ****         pBuffer += SPI_FLASH_PageSize;  
 874              		.loc 1 261 0
 875 00a8 04F58074 		add	r4, r4, #256
 876              	.LVL130:
 262:FreeRTOS/parTest/spi_flash.c ****       }
 877              		.loc 1 262 0
 878 00ac 06F58076 		add	r6, r6, #256
 879              	.LVL131:
 258:FreeRTOS/parTest/spi_flash.c ****       {
 880              		.loc 1 258 0
 881 00b0 2F46     		mov	r7, r5
 882              	.LVL132:
 883              	.L51:
 884 00b2 7B1E     		subs	r3, r7, #1
 885 00b4 DDB2     		uxtb	r5, r3
 886              	.LVL133:
 887 00b6 002F     		cmp	r7, #0
 888 00b8 F0D1     		bne	.L52
 265:FreeRTOS/parTest/spi_flash.c ****       {
 889              		.loc 1 265 0
 890 00ba B9F1000F 		cmp	r9, #0
 891 00be 05D0     		beq	.L44
 267:FreeRTOS/parTest/spi_flash.c ****       }
 892              		.loc 1 267 0
 893 00c0 5FFA88F2 		uxtb	r2, r8
 894 00c4 2146     		mov	r1, r4
 895 00c6 3046     		mov	r0, r6
 896 00c8 FFF7FEFF 		bl	SPI_FLASH_PageWrite
 897              	.LVL134:
 898              	.L44:
 899 00cc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 900              		.cfi_endproc
 901              	.LFE31:
 903              		.text
 904              	.Letext0:
 905              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/machine/_default_types
 906              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/sys/_stdint.h"
 907              		.file 4 "CMSIS/Core/CM3/stm32f10x.h"
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 27


 908              		.file 5 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_gpio.h"
 909              		.file 6 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_spi.h"
 910              		.file 7 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_rcc.h"
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s 			page 28


DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi_flash.c
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:20     .text.SPI_FLASH_ChipSelect:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:25     .text.SPI_FLASH_ChipSelect:0000000000000000 SPI_FLASH_ChipSelect
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:49     .text.SPI_FLASH_ChipSelect:0000000000000010 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:54     .text.SPI_FLASH_Init:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:59     .text.SPI_FLASH_Init:0000000000000000 SPI_FLASH_Init
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:155    .text.SPI_FLASH_Init:0000000000000094 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:160    .text.SPI_FLASH_SendByte:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:165    .text.SPI_FLASH_SendByte:0000000000000000 SPI_FLASH_SendByte
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:214    .text.SPI_FLASH_SendByte:0000000000000030 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:219    .text.SPI_FLASH_BufferRead:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:224    .text.SPI_FLASH_BufferRead:0000000000000000 SPI_FLASH_BufferRead
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:290    .text.SPI_FLASH_ReadID:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:295    .text.SPI_FLASH_ReadID:0000000000000000 SPI_FLASH_ReadID
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:354    .text.SPI_FLASH_StartReadSequence:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:359    .text.SPI_FLASH_StartReadSequence:0000000000000000 SPI_FLASH_StartReadSequence
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:398    .text.SPI_FLASH_ReadByte:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:403    .text.SPI_FLASH_ReadByte:0000000000000000 SPI_FLASH_ReadByte
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:424    .text.SPI_FLASH_SendHalfWord:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:429    .text.SPI_FLASH_SendHalfWord:0000000000000000 SPI_FLASH_SendHalfWord
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:478    .text.SPI_FLASH_SendHalfWord:0000000000000030 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:483    .text.SPI_FLASH_WriteEnable:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:488    .text.SPI_FLASH_WriteEnable:0000000000000000 SPI_FLASH_WriteEnable
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:516    .text.SPI_FLASH_WaitForWriteEnd:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:521    .text.SPI_FLASH_WaitForWriteEnd:0000000000000000 SPI_FLASH_WaitForWriteEnd
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:559    .text.SPI_FLASH_SectorErase:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:564    .text.SPI_FLASH_SectorErase:0000000000000000 SPI_FLASH_SectorErase
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:612    .text.SPI_FLASH_BulkErase:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:617    .text.SPI_FLASH_BulkErase:0000000000000000 SPI_FLASH_BulkErase
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:651    .text.SPI_FLASH_PageWrite:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:656    .text.SPI_FLASH_PageWrite:0000000000000000 SPI_FLASH_PageWrite
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:726    .text.SPI_FLASH_BufferWrite:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccsIEzLt.s:731    .text.SPI_FLASH_BufferWrite:0000000000000000 SPI_FLASH_BufferWrite
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
GPIO_WriteBit
RCC_APB2PeriphClockCmd
GPIO_Init
SPI_Init
SPI_Cmd
SPI_GetFlagStatus
SPI_SendData
SPI_ReceiveData
