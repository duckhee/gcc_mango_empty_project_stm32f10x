ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"usb_endp.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.EP1_IN_Callback,"ax",%progbits
  20              		.align	2
  21              		.global	EP1_IN_Callback
  22              		.thumb
  23              		.thumb_func
  25              	EP1_IN_Callback:
  26              	.LFB28:
  27              		.file 1 "src/usb/usb_endp.c"
   1:src/usb/usb_endp.c **** /******************** (C) COPYRIGHT 2009 STMicroelectronics ********************
   2:src/usb/usb_endp.c **** * File Name          : usb_endp.c
   3:src/usb/usb_endp.c **** * Author             : MCD Application Team
   4:src/usb/usb_endp.c **** * Version            : V3.0.1
   5:src/usb/usb_endp.c **** * Date               : 04/27/2009
   6:src/usb/usb_endp.c **** * Description        : Endpoint routines
   7:src/usb/usb_endp.c **** ********************************************************************************
   8:src/usb/usb_endp.c **** * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
   9:src/usb/usb_endp.c **** * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
  10:src/usb/usb_endp.c **** * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
  11:src/usb/usb_endp.c **** * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
  12:src/usb/usb_endp.c **** * CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
  13:src/usb/usb_endp.c **** * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  14:src/usb/usb_endp.c **** *******************************************************************************/
  15:src/usb/usb_endp.c **** 
  16:src/usb/usb_endp.c **** /* Includes ------------------------------------------------------------------*/
  17:src/usb/usb_endp.c **** #include "hw_config.h"
  18:src/usb/usb_endp.c **** #include "stm32f10x.h"
  19:src/usb/usb_endp.c **** #include "usb_lib.h"
  20:src/usb/usb_endp.c **** #include "usb_istr.h"
  21:src/usb/usb_endp.c **** #include "stm32f10x_gpio.h"
  22:src/usb/usb_endp.c **** #include "debug.h"
  23:src/usb/usb_endp.c **** 
  24:src/usb/usb_endp.c **** /* Private typedef -----------------------------------------------------------*/
  25:src/usb/usb_endp.c **** /* Private define ------------------------------------------------------------*/
  26:src/usb/usb_endp.c **** /* Private macro -------------------------------------------------------------*/
  27:src/usb/usb_endp.c **** /* Private variables ---------------------------------------------------------*/
  28:src/usb/usb_endp.c **** uint8_t Receive_Buffer[2];
  29:src/usb/usb_endp.c **** 
  30:src/usb/usb_endp.c **** /* Private function prototypes -----------------------------------------------*/
  31:src/usb/usb_endp.c **** /* Private functions ---------------------------------------------------------*/
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 2


  32:src/usb/usb_endp.c **** 
  33:src/usb/usb_endp.c **** /*******************************************************************************
  34:src/usb/usb_endp.c **** * Function Name  : EP1_IN_Callback.
  35:src/usb/usb_endp.c **** * Description    : EP1 IN Callback Routine.
  36:src/usb/usb_endp.c **** * Input          : None.
  37:src/usb/usb_endp.c **** * Output         : None.
  38:src/usb/usb_endp.c **** * Return         : None.
  39:src/usb/usb_endp.c **** *******************************************************************************/
  40:src/usb/usb_endp.c **** void EP1_IN_Callback(void)
  41:src/usb/usb_endp.c **** {
  28              		.loc 1 41 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  42:src/usb/usb_endp.c ****     DEBUG_MSG_FUNC_START;
  37              		.loc 1 42 0
  38 0002 0248     		ldr	r0, .L3
  39 0004 FFF7FEFF 		bl	DebugMsg_FunctionStart
  40              	.LVL0:
  41 0008 08BD     		pop	{r3, pc}
  42              	.L4:
  43 000a 00BF     		.align	2
  44              	.L3:
  45 000c 00000000 		.word	.LANCHOR0
  46              		.cfi_endproc
  47              	.LFE28:
  49              		.section	.text.EP1_OUT_Callback,"ax",%progbits
  50              		.align	2
  51              		.global	EP1_OUT_Callback
  52              		.thumb
  53              		.thumb_func
  55              	EP1_OUT_Callback:
  56              	.LFB29:
  43:src/usb/usb_endp.c **** }
  44:src/usb/usb_endp.c **** 
  45:src/usb/usb_endp.c **** /*******************************************************************************
  46:src/usb/usb_endp.c **** * Function Name  : EP1_OUT_Callback.
  47:src/usb/usb_endp.c **** * Description    : EP1 OUT Callback Routine.
  48:src/usb/usb_endp.c **** * Input          : None.
  49:src/usb/usb_endp.c **** * Output         : None.
  50:src/usb/usb_endp.c **** * Return         : None.
  51:src/usb/usb_endp.c **** *******************************************************************************/
  52:src/usb/usb_endp.c **** void EP1_OUT_Callback(void)
  53:src/usb/usb_endp.c **** {
  57              		.loc 1 53 0
  58              		.cfi_startproc
  59              		@ args = 0, pretend = 0, frame = 0
  60              		@ frame_needed = 0, uses_anonymous_args = 0
  61 0000 10B5     		push	{r4, lr}
  62              	.LCFI1:
  63              		.cfi_def_cfa_offset 8
  64              		.cfi_offset 4, -8
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 3


  65              		.cfi_offset 14, -4
  54:src/usb/usb_endp.c ****     DEBUG_MSG_FUNC_START;
  66              		.loc 1 54 0
  67 0002 1948     		ldr	r0, .L15
  68 0004 FFF7FEFF 		bl	DebugMsg_FunctionStart
  69              	.LVL1:
  55:src/usb/usb_endp.c **** 
  56:src/usb/usb_endp.c ****     BitAction Led_State;
  57:src/usb/usb_endp.c **** 
  58:src/usb/usb_endp.c ****     PMAToUserBufferCopy(Receive_Buffer, ENDP1_RXADDR, 2);
  70              		.loc 1 58 0
  71 0008 184C     		ldr	r4, .L15+4
  72 000a 0222     		movs	r2, #2
  73 000c 4FF48271 		mov	r1, #260
  74 0010 2046     		mov	r0, r4
  75 0012 FFF7FEFF 		bl	PMAToUserBufferCopy
  76              	.LVL2:
  59:src/usb/usb_endp.c **** 
  60:src/usb/usb_endp.c ****     if (Receive_Buffer[1] == 0)
  77              		.loc 1 60 0
  78 0016 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
  79 0018 0BB9     		cbnz	r3, .L12
  61:src/usb/usb_endp.c ****     {
  62:src/usb/usb_endp.c ****         Led_State = Bit_SET;
  80              		.loc 1 62 0
  81 001a 0122     		movs	r2, #1
  82 001c 00E0     		b	.L6
  83              	.L12:
  63:src/usb/usb_endp.c ****     }
  64:src/usb/usb_endp.c ****     else 
  65:src/usb/usb_endp.c ****     {
  66:src/usb/usb_endp.c ****         Led_State = Bit_RESET;
  84              		.loc 1 66 0
  85 001e 0022     		movs	r2, #0
  86              	.L6:
  87              	.LVL3:
  67:src/usb/usb_endp.c ****     }
  68:src/usb/usb_endp.c **** 
  69:src/usb/usb_endp.c ****     switch (Receive_Buffer[0])
  88              		.loc 1 69 0
  89 0020 124B     		ldr	r3, .L15+4
  90 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  91 0024 022B     		cmp	r3, #2
  92 0026 09D0     		beq	.L8
  93 0028 032B     		cmp	r3, #3
  94 002a 0CD0     		beq	.L9
  95 002c 012B     		cmp	r3, #1
  96 002e 10D1     		bne	.L13
  70:src/usb/usb_endp.c ****     {
  71:src/usb/usb_endp.c ****     case 1: /* Led 1 */
  72:src/usb/usb_endp.c ****         GPIO_WriteBit(GPIO_LED, GPIO_LED1_PIN, Led_State);
  97              		.loc 1 72 0
  98 0030 4FF40071 		mov	r1, #512
  99 0034 0E48     		ldr	r0, .L15+8
 100 0036 FFF7FEFF 		bl	GPIO_WriteBit
 101              	.LVL4:
  73:src/usb/usb_endp.c ****         break;
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 4


 102              		.loc 1 73 0
 103 003a 0FE0     		b	.L11
 104              	.LVL5:
 105              	.L8:
  74:src/usb/usb_endp.c ****     case 2: /* Led 2 */
  75:src/usb/usb_endp.c ****         GPIO_WriteBit(GPIO_LED, GPIO_LED2_PIN, Led_State);
 106              		.loc 1 75 0
 107 003c 2021     		movs	r1, #32
 108 003e 0C48     		ldr	r0, .L15+8
 109 0040 FFF7FEFF 		bl	GPIO_WriteBit
 110              	.LVL6:
  76:src/usb/usb_endp.c ****         break;
 111              		.loc 1 76 0
 112 0044 0AE0     		b	.L11
 113              	.LVL7:
 114              	.L9:
  77:src/usb/usb_endp.c ****     case 3: /* Led 3 */
  78:src/usb/usb_endp.c ****         GPIO_WriteBit(GPIO_LED, GPIO_LED3_PIN, Led_State);
 115              		.loc 1 78 0
 116 0046 4FF48071 		mov	r1, #256
 117 004a 0948     		ldr	r0, .L15+8
 118 004c FFF7FEFF 		bl	GPIO_WriteBit
 119              	.LVL8:
  79:src/usb/usb_endp.c ****         break;
 120              		.loc 1 79 0
 121 0050 04E0     		b	.L11
 122              	.LVL9:
 123              	.L13:
  80:src/usb/usb_endp.c ****     default:
  81:src/usb/usb_endp.c ****         GPIO_Write(GPIO_LED,
 124              		.loc 1 81 0
 125 0052 4FF6DF41 		movw	r1, #64735
 126 0056 0648     		ldr	r0, .L15+8
 127 0058 FFF7FEFF 		bl	GPIO_Write
 128              	.LVL10:
 129              	.L11:
  82:src/usb/usb_endp.c ****                    ~(uint16_t)(GPIO_LED1_PIN | GPIO_LED2_PIN | GPIO_LED3_PIN ));
  83:src/usb/usb_endp.c ****         break;
  84:src/usb/usb_endp.c ****     }
  85:src/usb/usb_endp.c **** 
  86:src/usb/usb_endp.c ****     SetEPRxStatus(ENDP1, EP_RX_VALID);
 130              		.loc 1 86 0
 131 005c 4FF44051 		mov	r1, #12288
 132 0060 0120     		movs	r0, #1
 133 0062 FFF7FEFF 		bl	SetEPRxStatus
 134              	.LVL11:
 135 0066 10BD     		pop	{r4, pc}
 136              	.L16:
 137              		.align	2
 138              	.L15:
 139 0068 00000000 		.word	.LANCHOR1
 140 006c 00000000 		.word	Receive_Buffer
 141 0070 000C0140 		.word	1073810432
 142              		.cfi_endproc
 143              	.LFE29:
 145              		.comm	Receive_Buffer,2,4
 146              		.section	.rodata.__FUNCTION__.8005,"a",%progbits
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 5


 147              		.align	2
 148              		.set	.LANCHOR1,. + 0
 151              	__FUNCTION__.8005:
 152 0000 4550315F 		.ascii	"EP1_OUT_Callback\000"
 152      4F55545F 
 152      43616C6C 
 152      6261636B 
 152      00
 153              		.section	.rodata.__FUNCTION__.8001,"a",%progbits
 154              		.align	2
 155              		.set	.LANCHOR0,. + 0
 158              	__FUNCTION__.8001:
 159 0000 4550315F 		.ascii	"EP1_IN_Callback\000"
 159      494E5F43 
 159      616C6C62 
 159      61636B00 
 160              		.text
 161              	.Letext0:
 162              		.file 2 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/machine/_default_types
 163              		.file 3 "/usr/local/Cellar/gcc-arm-none-eabi/20160926/arm-none-eabi/include/sys/_stdint.h"
 164              		.file 4 "CMSIS/Core/CM3/stm32f10x.h"
 165              		.file 5 "STM32F10x_StdPeriph_Driver/inc/stm32f10x_gpio.h"
 166              		.file 6 "Inc/debug.h"
 167              		.file 7 "STM32_USB-FS-Device_Driver/inc/usb_mem.h"
 168              		.file 8 "STM32_USB-FS-Device_Driver/inc/usb_regs.h"
ARM GAS  /var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb_endp.c
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:20     .text.EP1_IN_Callback:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:25     .text.EP1_IN_Callback:0000000000000000 EP1_IN_Callback
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:45     .text.EP1_IN_Callback:000000000000000c $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:50     .text.EP1_OUT_Callback:0000000000000000 $t
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:55     .text.EP1_OUT_Callback:0000000000000000 EP1_OUT_Callback
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:139    .text.EP1_OUT_Callback:0000000000000068 $d
                            *COM*:0000000000000002 Receive_Buffer
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:147    .rodata.__FUNCTION__.8005:0000000000000000 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:151    .rodata.__FUNCTION__.8005:0000000000000000 __FUNCTION__.8005
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:154    .rodata.__FUNCTION__.8001:0000000000000000 $d
/var/folders/g9/bbpj86ld7fx45vd1b3pqxmp00000gn/T//ccAPI0NH.s:158    .rodata.__FUNCTION__.8001:0000000000000000 __FUNCTION__.8001
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
DebugMsg_FunctionStart
PMAToUserBufferCopy
GPIO_WriteBit
GPIO_Write
SetEPRxStatus
